{"remainingRequest":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/thread-loader/dist/cjs.js!/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/babel-loader/lib/index.js!/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/src/mixins/shapeFormat.js","dependencies":[{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/src/mixins/shapeFormat.js","mtime":1633775871650},{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9iZWxsaWVjZWUvRG9jdW1lbnRzLzAwX0Jpc2lubm9jby9CaXNpbm5vY28vb2ZmaWNlLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9jb3JlL3NlcnZpY2VzL3N0b3JlIjsKaW1wb3J0IFN3YWwgZnJvbSAnc3dlZXRhbGVydDInOwpleHBvcnQgZGVmYXVsdCB7CiAgd2F0Y2g6IHt9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0aGVIZWFkZXI6IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vICAqKiogQkVHSU4gOiAyMDIwLTA0LTA2IDogVEFYIElORk8KICAgIHRheEluZm86IGZ1bmN0aW9uIHRheEluZm8oKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzWyJzaG9wL3RheCJdOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3Nob3AvZmV0Y2gnKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vICoqKiAyMDIxLTA0LTAxMyDguKPguLDguJrguKDguLLguKnguLUKICAgIC8vICoqKiByZW50YWxQcmljZVRvdGFsMSA9IHRoaXMucmVudGFsUHJpY2VUb3RhbAogICAgLy8g4Lii4Lit4LiU4LmA4LiK4LmI4Liy4Liq4Li44LiX4LiY4Li0CiAgICByZW50YWxQcmljZVRvdGFsX2ZpbmFsOiBmdW5jdGlvbiByZW50YWxQcmljZVRvdGFsX2ZpbmFsKHJlbnRhbFByaWNlLCByZW50YWxEaXNjb3VudCkgewogICAgICAvLyAgQ0FTRTEg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguYTguKHguYjguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguKPguKfguKEgVkFUCiAgICAgIGlmICh0aGlzLnRheEluZm8udmF0U3lzdGVtID09PSB0cnVlICYmIHRoaXMudGF4SW5mby5pblZhdCA9PT0gdHJ1ZSAmJiB0aGlzLmlzUmVudGFsRGlzY291bnQocmVudGFsRGlzY291bnQpID09PSBmYWxzZSkgcmV0dXJuIHRoaXMucmVudGFsUHJpY2VUb3RhbDEocmVudGFsUHJpY2UpOyAvLyAgQ0FTRTIg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguYTguKHguYjguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguYTguKHguYjguKPguKfguKEKCiAgICAgIGlmICh0aGlzLnRheEluZm8udmF0U3lzdGVtID09PSB0cnVlICYmIHRoaXMudGF4SW5mby5pblZhdCA9PT0gZmFsc2UgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gZmFsc2UpIHJldHVybiB0aGlzLnJlbnRhbFByaWNlVG90YWwyKHJlbnRhbFByaWNlKTsgLy8gIENBU0UzIOC4geC4o+C4k+C4tSDguK3guKLguLnguYjguYPguJnguKPguLDguJrguJogVkFUIHwg4Lih4Li14Liq4LmI4Lin4LiZ4Lil4LiUIHwg4Lij4Liy4LiE4Liy4Lij4Lin4LihIFZBVAoKICAgICAgaWYgKHRoaXMudGF4SW5mby52YXRTeXN0ZW0gPT09IHRydWUgJiYgdGhpcy50YXhJbmZvLmluVmF0ID09PSB0cnVlICYmIHRoaXMuaXNSZW50YWxEaXNjb3VudChyZW50YWxEaXNjb3VudCkgPT09IHRydWUpIHJldHVybiB0aGlzLnJlbnRhbFByaWNlVG90YWwzKHJlbnRhbFByaWNlLCByZW50YWxEaXNjb3VudCk7IC8vICBDQVNFNCDguIHguKPguJPguLUg4Lit4Lii4Li54LmI4LmD4LiZ4Lij4Liw4Lia4LiaIFZBVCB8IOC4oeC4teC4quC5iOC4p+C4meC4peC4lCB8IOC4o+C4suC4hOC4suC5hOC4oeC5iOC4o+C4p+C4oSBWQVQKCiAgICAgIGlmICh0aGlzLnRheEluZm8udmF0U3lzdGVtID09PSB0cnVlICYmIHRoaXMudGF4SW5mby5pblZhdCA9PT0gZmFsc2UgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gdHJ1ZSkgcmV0dXJuIHRoaXMucmVudGFsUHJpY2VUb3RhbDQocmVudGFsUHJpY2UsIHJlbnRhbERpc2NvdW50KTsKICAgIH0sCiAgICB2YXRfZmluYWw6IGZ1bmN0aW9uIHZhdF9maW5hbChyZW50YWxQcmljZSwgcmVudGFsRGlzY291bnQpIHsKICAgICAgLy8gIENBU0UxIOC4geC4o+C4k+C4tSDguK3guKLguLnguYjguYPguJnguKPguLDguJrguJogVkFUIHwg4LmE4Lih4LmI4Lih4Li14Liq4LmI4Lin4LiZ4Lil4LiUIHwg4Lij4Liy4LiE4Liy4Lij4Lin4LihIFZBVAogICAgICBpZiAodGhpcy50YXhJbmZvLnZhdFN5c3RlbSA9PT0gdHJ1ZSAmJiB0aGlzLnRheEluZm8uaW5WYXQgPT09IHRydWUgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gZmFsc2UpIHJldHVybiB0aGlzLnZhdDEocmVudGFsUHJpY2UpOyAvLyAgQ0FTRTIg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguYTguKHguYjguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguYTguKHguYjguKPguKfguKEKCiAgICAgIGlmICh0aGlzLnRheEluZm8udmF0U3lzdGVtID09PSB0cnVlICYmIHRoaXMudGF4SW5mby5pblZhdCA9PT0gZmFsc2UgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gZmFsc2UpIHJldHVybiB0aGlzLnZhdDIocmVudGFsUHJpY2UpOyAvLyAgQ0FTRTMg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguKPguKfguKEgVkFUCgogICAgICBpZiAodGhpcy50YXhJbmZvLnZhdFN5c3RlbSA9PT0gdHJ1ZSAmJiB0aGlzLnRheEluZm8uaW5WYXQgPT09IHRydWUgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gdHJ1ZSkgcmV0dXJuIHRoaXMudmF0MyhyZW50YWxQcmljZSwgcmVudGFsRGlzY291bnQpOyAvLyAgQ0FTRTQg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguYTguKHguYjguKPguKfguKEgVkFUCgogICAgICBpZiAodGhpcy50YXhJbmZvLnZhdFN5c3RlbSA9PT0gdHJ1ZSAmJiB0aGlzLnRheEluZm8uaW5WYXQgPT09IGZhbHNlICYmIHRoaXMuaXNSZW50YWxEaXNjb3VudChyZW50YWxEaXNjb3VudCkgPT09IHRydWUpIHJldHVybiB0aGlzLnZhdDQocmVudGFsUHJpY2UsIHJlbnRhbERpc2NvdW50KTsKICAgIH0sCiAgICBiZWZvcmVWYXRfZmluYWw6IGZ1bmN0aW9uIGJlZm9yZVZhdF9maW5hbChyZW50YWxQcmljZSwgcmVudGFsRGlzY291bnQpIHsKICAgICAgLy8gIENBU0UxIOC4geC4o+C4k+C4tSDguK3guKLguLnguYjguYPguJnguKPguLDguJrguJogVkFUIHwg4LmE4Lih4LmI4Lih4Li14Liq4LmI4Lin4LiZ4Lil4LiUIHwg4Lij4Liy4LiE4Liy4Lij4Lin4LihIFZBVAogICAgICBpZiAodGhpcy50YXhJbmZvLnZhdFN5c3RlbSA9PT0gdHJ1ZSAmJiB0aGlzLnRheEluZm8uaW5WYXQgPT09IHRydWUgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gZmFsc2UpIHJldHVybiB0aGlzLmJlZm9yZVZhdDEocmVudGFsUHJpY2UpOyAvLyAgQ0FTRTIg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguYTguKHguYjguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguYTguKHguYjguKPguKfguKEKCiAgICAgIGlmICh0aGlzLnRheEluZm8udmF0U3lzdGVtID09PSB0cnVlICYmIHRoaXMudGF4SW5mby5pblZhdCA9PT0gZmFsc2UgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gZmFsc2UpIHJldHVybiB0aGlzLmJlZm9yZVZhdDIocmVudGFsUHJpY2UpOyAvLyAgQ0FTRTMg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguKPguKfguKEgVkFUCgogICAgICBpZiAodGhpcy50YXhJbmZvLnZhdFN5c3RlbSA9PT0gdHJ1ZSAmJiB0aGlzLnRheEluZm8uaW5WYXQgPT09IHRydWUgJiYgdGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSA9PT0gdHJ1ZSkgcmV0dXJuIHRoaXMuYmVmb3JlVmF0MyhyZW50YWxQcmljZSwgcmVudGFsRGlzY291bnQpOyAvLyAgQ0FTRTQg4LiB4Lij4LiT4Li1IOC4reC4ouC4ueC5iOC5g+C4meC4o+C4sOC4muC4miBWQVQgfCDguKHguLXguKrguYjguKfguJnguKXguJQgfCDguKPguLLguITguLLguYTguKHguYjguKPguKfguKEgVkFUCgogICAgICBpZiAodGhpcy50YXhJbmZvLnZhdFN5c3RlbSA9PT0gdHJ1ZSAmJiB0aGlzLnRheEluZm8uaW5WYXQgPT09IGZhbHNlICYmIHRoaXMuaXNSZW50YWxEaXNjb3VudChyZW50YWxEaXNjb3VudCkgPT09IHRydWUpIHJldHVybiB0aGlzLmJlZm9yZVZhdDQocmVudGFsUHJpY2UsIHJlbnRhbERpc2NvdW50KTsKICAgIH0sCiAgICBiZWZvcmVWYXQxOiBmdW5jdGlvbiBiZWZvcmVWYXQxKHJlbnRhbFByaWNlKSB7CiAgICAgIC8vIOC5hOC4oeC5iOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguKPguKfguKHguKDguLLguKnguLUgKFZBVDEpCiAgICAgIHJldHVybiByZW50YWxQcmljZSAtIHRoaXMudmF0MShyZW50YWxQcmljZSk7CiAgICB9LAogICAgdmF0MTogZnVuY3Rpb24gdmF0MShyZW50YWxQcmljZSkgewogICAgICAvLyDguYTguKHguYjguKHguLXguKrguYjguKfguJnguKXguJQg4Lij4Liy4LiE4Liy4LmD4LiZ4Liq4LiV4LmH4Lit4LiE4Lij4Lin4Lih4Lig4Liy4Lip4Li1IChWQVQxKQogICAgICByZXR1cm4gcmVudGFsUHJpY2UgKiAodGhpcy50YXhJbmZvLnRheFJhdGUgLyAoMTAwICsgdGhpcy50YXhJbmZvLnRheFJhdGUpKTsKICAgIH0sCiAgICByZW50YWxQcmljZVRvdGFsMTogZnVuY3Rpb24gcmVudGFsUHJpY2VUb3RhbDEocmVudGFsUHJpY2UpIHsKICAgICAgLy8g4LmE4Lih4LmI4Lih4Li14Liq4LmI4Lin4LiZ4Lil4LiUIOC4o+C4suC4hOC4suC5g+C4meC4quC4leC5h+C4reC4hOC4o+C4p+C4oeC4oOC4suC4qeC4tSAoVkFUMSkKICAgICAgcmV0dXJuIHJlbnRhbFByaWNlOwogICAgfSwKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICBiZWZvcmVWYXQyOiBmdW5jdGlvbiBiZWZvcmVWYXQyKHJlbnRhbFByaWNlKSB7CiAgICAgIC8vIOC5hOC4oeC5iOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguYTguKHguYjguKPguKfguKHguKDguLLguKnguLUgKFZBVDIpCiAgICAgIHJldHVybiByZW50YWxQcmljZTsKICAgIH0sCiAgICB2YXQyOiBmdW5jdGlvbiB2YXQyKHJlbnRhbFByaWNlKSB7CiAgICAgIC8vIOC5hOC4oeC5iOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguYTguKHguYjguKPguKfguKHguKDguLLguKnguLUgKFZBVDIpCiAgICAgIHJldHVybiByZW50YWxQcmljZSAqICh0aGlzLnRheEluZm8udGF4UmF0ZSAvIDEwMCk7CiAgICB9LAogICAgcmVudGFsUHJpY2VUb3RhbDI6IGZ1bmN0aW9uIHJlbnRhbFByaWNlVG90YWwyKHJlbnRhbFByaWNlKSB7CiAgICAgIC8vIOC5hOC4oeC5iOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguYTguKHguYjguKPguKfguKHguKDguLLguKnguLUgKFZBVDIpCiAgICAgIHJldHVybiByZW50YWxQcmljZSArIHRoaXMudmF0MihyZW50YWxQcmljZSk7CiAgICB9LAogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGJlZm9yZVZhdDM6IGZ1bmN0aW9uIGJlZm9yZVZhdDMocmVudGFsUHJpY2UsIHJlbnRhbERpc2NvdW50KSB7CiAgICAgIC8vIOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguKPguKfguKHguKDguLLguKnguLUgKFZBVDMpCiAgICAgIHZhciBkaXNjb3VudCA9IDA7CgogICAgICBpZiAodGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSkgewogICAgICAgIGRpc2NvdW50ID0gcmVudGFsRGlzY291bnQ7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnJlbnRhbFByaWNlVG90YWwzKHJlbnRhbFByaWNlLCBkaXNjb3VudCkgLSB0aGlzLnZhdDMocmVudGFsUHJpY2UsIGRpc2NvdW50KTsKICAgIH0sCiAgICB2YXQzOiBmdW5jdGlvbiB2YXQzKHJlbnRhbFByaWNlLCByZW50YWxEaXNjb3VudCkgewogICAgICAvLyDguKHguLXguKrguYjguKfguJnguKXguJQg4Lij4Liy4LiE4Liy4LmD4LiZ4Liq4LiV4LmH4Lit4LiE4Lij4Lin4Lih4Lig4Liy4Lip4Li1IChWQVQzKQogICAgICB2YXIgZGlzY291bnQgPSAwOwoKICAgICAgaWYgKHRoaXMuaXNSZW50YWxEaXNjb3VudChyZW50YWxEaXNjb3VudCkpIHsKICAgICAgICBkaXNjb3VudCA9IHJlbnRhbERpc2NvdW50OwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5yZW50YWxQcmljZVRvdGFsMyhyZW50YWxQcmljZSwgZGlzY291bnQpICogKHRoaXMudGF4SW5mby50YXhSYXRlIC8gKDEwMCArIHRoaXMudGF4SW5mby50YXhSYXRlKSk7CiAgICB9LAogICAgcmVudGFsUHJpY2VUb3RhbDM6IGZ1bmN0aW9uIHJlbnRhbFByaWNlVG90YWwzKHJlbnRhbFByaWNlLCByZW50YWxEaXNjb3VudCkgewogICAgICB2YXIgZGlzY291bnQgPSAwOwoKICAgICAgaWYgKHRoaXMuaXNSZW50YWxEaXNjb3VudChyZW50YWxEaXNjb3VudCkpIHsKICAgICAgICBkaXNjb3VudCA9IHJlbnRhbERpc2NvdW50OwogICAgICB9IC8vIOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguKPguKfguKHguKDguLLguKnguLUgKFZBVDMpCgoKICAgICAgcmV0dXJuIHJlbnRhbFByaWNlIC0gZGlzY291bnQ7CiAgICB9LAogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGJlZm9yZVZhdDQ6IGZ1bmN0aW9uIGJlZm9yZVZhdDQocmVudGFsUHJpY2UsIHJlbnRhbERpc2NvdW50KSB7CiAgICAgIC8vIOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguYTguKHguYjguKPguKfguKHguKDguLLguKnguLUgKFZBVDQpCiAgICAgIHZhciBkaXNjb3VudCA9IDA7CgogICAgICBpZiAodGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSkgewogICAgICAgIGRpc2NvdW50ID0gcmVudGFsRGlzY291bnQ7CiAgICAgIH0KCiAgICAgIHJldHVybiByZW50YWxQcmljZSAtIGRpc2NvdW50OwogICAgfSwKICAgIHZhdDQ6IGZ1bmN0aW9uIHZhdDQocmVudGFsUHJpY2UsIHJlbnRhbERpc2NvdW50KSB7CiAgICAgIC8vIOC4oeC4teC4quC5iOC4p+C4meC4peC4lCDguKPguLLguITguLLguYPguJnguKrguJXguYfguK3guITguYTguKHguYjguKPguKfguKHguKDguLLguKnguLUgKFZBVDQpCiAgICAgIHZhciBkaXNjb3VudCA9IDA7CgogICAgICBpZiAodGhpcy5pc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSkgewogICAgICAgIGRpc2NvdW50ID0gcmVudGFsRGlzY291bnQ7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmJlZm9yZVZhdDQocmVudGFsUHJpY2UsIGRpc2NvdW50KSAqICh0aGlzLnRheEluZm8udGF4UmF0ZSAvIDEwMCk7CiAgICB9LAogICAgcmVudGFsUHJpY2VUb3RhbDQ6IGZ1bmN0aW9uIHJlbnRhbFByaWNlVG90YWw0KHJlbnRhbFByaWNlLCByZW50YWxEaXNjb3VudCkgewogICAgICB2YXIgZGlzY291bnQgPSAwOwoKICAgICAgaWYgKHRoaXMuaXNSZW50YWxEaXNjb3VudChyZW50YWxEaXNjb3VudCkpIHsKICAgICAgICBkaXNjb3VudCA9IHJlbnRhbERpc2NvdW50OwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5iZWZvcmVWYXQ0KHJlbnRhbFByaWNlLCBkaXNjb3VudCkgKyB0aGlzLnZhdDQocmVudGFsUHJpY2UsIGRpc2NvdW50KTsKICAgIH0sCiAgICBpc1JlbnRhbERpc2NvdW50OiBmdW5jdGlvbiBpc1JlbnRhbERpc2NvdW50KHJlbnRhbERpc2NvdW50KSB7CiAgICAgIGlmIChyZW50YWxEaXNjb3VudCA+IDAgJiYgcmVudGFsRGlzY291bnQgIT0gdW5kZWZpbmVkICYmIHJlbnRhbERpc2NvdW50ICE9IG51bGwpIHJldHVybiB0cnVlO2Vsc2UgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIC8vICoqKiAyMDIxLTA0LTAxMyDguKPguLDguJrguKDguLLguKnguLUKICAgIC8vIGJsdWVMaWdodChldmVudCkgewogICAgLy8gICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9PSAiY2hvb3NlIikgewogICAgLy8gICAgIGV2ZW50LnRhcmdldC5jbGFzc05hbWUgPSAibm90Q2hvb3NlIjsKICAgIC8vICAgfSBlbHNlIHsKICAgIC8vICAgICBldmVudC50YXJnZXQuY2xhc3NOYW1lID0gImNob29zZSI7CiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICBnZXRTaG9wTGluZVNjb3JlOiBmdW5jdGlvbiBnZXRTaG9wTGluZVNjb3JlKHNob3BJbmZvKSB7CiAgICAgIHZhciBsaW5lTnVtYmVyID0gMDsKICAgICAgdmFyIHNwQ291bnQ7CiAgICAgIHZhciBzcHRTdHIgPSAiPHA+IjsKICAgICAgdmFyIHdlaWdodCA9IDQ7CgogICAgICBpZiAoc2hvcEluZm8udGVybUFuZENvbmRpdGlvbiA9PT0gbnVsbCB8fCBzaG9wSW5mby50ZXJtQW5kQ29uZGl0aW9uID09PSB1bmRlZmluZWQgfHwgc2hvcEluZm8udGVybUFuZENvbmRpdGlvbiA9PT0gIiIpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBzcENvdW50ID0gc2hvcEluZm8udGVybUFuZENvbmRpdGlvbi5zcGxpdChzcHRTdHIpOwogICAgICB9CgogICAgICBsaW5lTnVtYmVyID0gc3BDb3VudC5sZW5ndGggLSAxOwogICAgICByZXR1cm4gTWF0aC5jZWlsKGxpbmVOdW1iZXIgLyB3ZWlnaHQpOwogICAgfSwKICAgIGNoZWNrUXVldWVTaGFyZTogZnVuY3Rpb24gY2hlY2tRdWV1ZVNoYXJlKGxpc3QpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcyA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9vcmRlcmRldGFpbC9jaGVja3EiLCBsaXN0LCBfdGhpcy4kc3RvcmUuc3RhdGUuYXV0aC5hcGlIZWFkZXIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA3OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXMuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgN11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2VuZXJhdGVSYW5kb206IGZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tKGxlbmd0aCkgewogICAgICB2YXIgcmVzdWx0ID0gJyc7CiAgICAgIHZhciBjaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JzsKICAgICAgdmFyIGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIG51bVJhbmdlOiBmdW5jdGlvbiBudW1SYW5nZShudW0pIHsKICAgICAgdmFyIGFyciA9IFtdOyAvLyBjcmVhdGUgYW4gZW1wdHkgYXJyYXkgd2l0aCBsZW5ndGggI251bQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW07IGkrKykgewogICAgICAgIGFyci5wdXNoKGkpOwogICAgICB9CgogICAgICByZXR1cm4gYXJyOwogICAgfSwKICAgIGZpbHRlcmluZ01vcmU6IGZ1bmN0aW9uIGZpbHRlcmluZ01vcmUobGlzdAogICAgLyogQXJyYXkgb2Ygb2JqZWN0IGxpc3QgKi8KICAgICwgZmlsdGVyaW5nCiAgICAvKiBBcnJheSBzaW5nbGUgbGlzdCAqLwogICAgLCBmaWxlZE5hbWUpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ0BmaWx0ZXJpbmdNb3JlIC8gb3JnaW5hbExpc3QnLCBsaXN0KTsKICAgICAgLy8gY29uc29sZS5sb2coJ0BmaWx0ZXJpbmdNb3JlIC8gZmlsdGVyaW5nJywgZmlsdGVyaW5nKTsKICAgICAgdmFyIHRlbXBsaXN0ID0gW107CgogICAgICBpZiAoZmlsdGVyaW5nLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZpbHRlcmluZy5sZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAobGlzdFtpXVtmaWxlZE5hbWVdID09PSBmaWx0ZXJpbmdbal0pIHsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQGZpbHRlcmluZ01vcmUgLyBsaXN0W2ldW2ZpbGVkTmFtZV0nLCBsaXN0W2ldW2ZpbGVkTmFtZV0pOwogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdAZmlsdGVyaW5nTW9yZSAvIGZpbHRlcmluZ1tqXScsIGZpbHRlcmluZ1tqXSk7CiAgICAgICAgICAgICAgdGVtcGxpc3QucHVzaChsaXN0W2ldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRlbXBsaXN0OwogICAgfSwKICAgIGF1dG9tYXBwZXI6IGZ1bmN0aW9uIGF1dG9tYXBwZXIobGlzdCwga2V5cykgewogICAgICB2YXIgbmV3bGlzdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGl0ZW0gPSB7fTsKCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBrZXlzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAobGlzdFswXS5oYXNPd25Qcm9wZXJ0eShrZXlzW2pdKSkgewogICAgICAgICAgICBpdGVtW2tleXNbal1dID0gbGlzdFtpXVtrZXlzW2pdXTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBpdCA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOwogICAgICAgIG5ld2xpc3QucHVzaChpdCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXdsaXN0OwogICAgfSwKICAgIGNvbnZlcnRUb0FycmF5OiBmdW5jdGlvbiBjb252ZXJ0VG9BcnJheShsaXN0LCBwcm9wKSB7CiAgICAgIHZhciBuZXdsaXN0ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBuZXdsaXN0LnB1c2gobGlzdFtpXVtwcm9wXSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXdsaXN0OwogICAgfSwKICAgIGNsb25lQXJyYXk6IGZ1bmN0aW9uIGNsb25lQXJyYXkob3JpZ2luYWwpIHsKICAgICAgdmFyIG5ld2xpc3QgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JpZ2luYWwubGVuZ3RoOyBpKyspIHsKICAgICAgICBuZXdsaXN0LnB1c2gob3JpZ2luYWxbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gbmV3bGlzdDsKICAgIH0sCiAgICBzZWFyY2hCeURhdGU6IGZ1bmN0aW9uIHNlYXJjaEJ5RGF0ZShsaXN0LCBzdGFydERhdGUsIGVuZERhdGUsIGZpbGVkTmFtZSkgewogICAgICAvLyBjb25zb2xlLmxvZygnQHNlYXJjaEJ5RGF0ZSBzdGFydERhdGUgPj4+ICcsIHRoaXMuZm9ybWF0RGF0ZShzdGFydERhdGUpKTsKICAgICAgLy8gY29uc29sZS5sb2coJ0BzZWFyY2hCeURhdGUgZW5kRGF0ZSA+Pj4gJywgdGhpcy5mb3JtYXREYXRlKGVuZERhdGUpKTsKICAgICAgdmFyIHRlbXBsaXN0ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGlzdGRhdGUgPSB0aGlzLmZvcm1hdERhdGUobGlzdFtpXVtmaWxlZE5hbWVdKTsKICAgICAgICB2YXIgY2tpbiA9IHRoaXMuZm9ybWF0RGF0ZShzdGFydERhdGUpOwogICAgICAgIHZhciBja291dCA9IHRoaXMuZm9ybWF0RGF0ZShlbmREYXRlKTsKCiAgICAgICAgaWYgKGxpc3RkYXRlID49IGNraW4gJiYgbGlzdGRhdGUgPD0gY2tvdXQpIHsKICAgICAgICAgIHRlbXBsaXN0LnB1c2gobGlzdFtpXSk7CiAgICAgICAgfQogICAgICB9IC8vIGNvbnNvbGUubG9nKCJzZWFyY2hCeURhdGUiLCB0ZW1wbGlzdCk7CgoKICAgICAgcmV0dXJuIHRlbXBsaXN0OwogICAgfSwKICAgIGRlc2NlbmRpbmdTb3J0U2hhcmU6IGZ1bmN0aW9uIGRlc2NlbmRpbmdTb3J0U2hhcmUoaW5wdXRMaXN0LCBzb3J0aW5nRmllbGQpIHsKICAgICAgdmFyIGxpc3QgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGlzdC5wdXNoKGlucHV0TGlzdFtpXSk7CiAgICAgIH0KCiAgICAgIGxpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBiW3NvcnRpbmdGaWVsZF0gLSBhW3NvcnRpbmdGaWVsZF07CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlzdDsKICAgIH0sCiAgICBkZXNjZW5kaW5nRGF0ZVNvcnRTaGFyZTogZnVuY3Rpb24gZGVzY2VuZGluZ0RhdGVTb3J0U2hhcmUoaW5wdXRMaXN0LCBzb3J0aW5nRmllbGQpIHsKICAgICAgdmFyIGxpc3QgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXRMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGlzdC5wdXNoKGlucHV0TGlzdFtpXSk7CiAgICAgIH0KCiAgICAgIGxpc3Quc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBuZXcgRGF0ZShiW3NvcnRpbmdGaWVsZF0pIC0gbmV3IERhdGUoYVtzb3J0aW5nRmllbGRdKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBsaXN0OwogICAgfSwKICAgIGFzY2VuZGluZ1NvcnRTaGFyZTogZnVuY3Rpb24gYXNjZW5kaW5nU29ydFNoYXJlKGlucHV0TGlzdCwgc29ydGluZ0ZpZWxkKSB7CiAgICAgIHZhciBsaXN0ID0gW107CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0TGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGxpc3QucHVzaChpbnB1dExpc3RbaV0pOwogICAgICB9CgogICAgICBsaXN0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYVtzb3J0aW5nRmllbGRdIC0gYltzb3J0aW5nRmllbGRdOwogICAgICB9KTsKICAgICAgcmV0dXJuIGxpc3Q7CiAgICB9LAogICAgYXNjZW5kaW5nRGF0ZVNvcnRTaGFyZTogZnVuY3Rpb24gYXNjZW5kaW5nRGF0ZVNvcnRTaGFyZShpbnB1dExpc3QsIHNvcnRpbmdGaWVsZCkgewogICAgICB2YXIgbGlzdCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBsaXN0LnB1c2goaW5wdXRMaXN0W2ldKTsKICAgICAgfQoKICAgICAgbGlzdC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGFbc29ydGluZ0ZpZWxkXSkgLSBuZXcgRGF0ZShiW3NvcnRpbmdGaWVsZF0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIGxpc3Q7CiAgICB9LAogICAgZGF0ZV9kaWZmX2luZGF5czogZnVuY3Rpb24gZGF0ZV9kaWZmX2luZGF5cyhkYXRlMSwgZGF0ZTIpIHsKICAgICAgdmFyIGR0MSA9IG5ldyBEYXRlKGRhdGUxKTsKICAgICAgdmFyIGR0MiA9IG5ldyBEYXRlKGRhdGUyKTsKICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKERhdGUuVVRDKGR0Mi5nZXRGdWxsWWVhcigpLCBkdDIuZ2V0TW9udGgoKSwgZHQyLmdldERhdGUoKSkgLSBEYXRlLlVUQyhkdDEuZ2V0RnVsbFllYXIoKSwgZHQxLmdldE1vbnRoKCksIGR0MS5nZXREYXRlKCkpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7CiAgICB9LAogICAgZ2V0ZGF0ZTogZnVuY3Rpb24gZ2V0ZGF0ZShkYWQsIGFtb3VudCkgewogICAgICB2YXIgbmV3ZGF0ZSA9IG5ldyBEYXRlKGRhZCk7CiAgICAgIG5ld2RhdGUuc2V0RGF0ZShuZXdkYXRlLmdldERhdGUoKSArIGFtb3VudCk7CiAgICAgIHZhciBkZCA9IG5ld2RhdGUuZ2V0RGF0ZSgpOwogICAgICB2YXIgbW0gPSBuZXdkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICB2YXIgeSA9IG5ld2RhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgdmFyIHNvbWVGb3JtYXR0ZWREYXRlID0geSArICctJyArIG1tICsgJy0nICsgZGQ7CiAgICAgIHJldHVybiBzb21lRm9ybWF0dGVkRGF0ZTsKICAgIH0sCiAgICBhZGREYXk6IGZ1bmN0aW9uIGFkZERheShkYXRlLCBkYXlzKSB7CiAgICAgIHZhciBjb3B5ID0gbmV3IERhdGUoTnVtYmVyKGRhdGUpKTsKICAgICAgY29weS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgZGF5cyk7CiAgICAgIHJldHVybiBjb3B5OwogICAgfSwKICAgIHJlYWxSZW50YWxQcmljZTogZnVuY3Rpb24gcmVhbFJlbnRhbFByaWNlKHJlbnRhbFByaWNlLCByZW50YWxEaXNjb3VudCwgcHJvbW90aW9uRGlzY291bnQpIHsKICAgICAgdmFyIHJwID0gaXNOYU4oTnVtYmVyKHJlbnRhbFByaWNlKSkgPyAwIDogTnVtYmVyKHJlbnRhbFByaWNlKTsKICAgICAgdmFyIHJkID0gaXNOYU4oTnVtYmVyKHJlbnRhbERpc2NvdW50KSkgPyAwIDogTnVtYmVyKHJlbnRhbERpc2NvdW50KTsKICAgICAgdmFyIHBkID0gaXNOYU4oTnVtYmVyKHByb21vdGlvbkRpc2NvdW50KSkgPyAwIDogTnVtYmVyKHByb21vdGlvbkRpc2NvdW50KTsKICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0UHJpY2UocnAgLSByZCAtIHBkKTsKICAgIH0sCiAgICByZWFsQmFpbDogZnVuY3Rpb24gcmVhbEJhaWwoYmFpbFRvdGFsLCBiYWlsRGlzY291bnQpIHsKICAgICAgdmFyIGJ0ID0gaXNOYU4oTnVtYmVyKGJhaWxUb3RhbCkpID8gMCA6IE51bWJlcihiYWlsVG90YWwpOwogICAgICB2YXIgYmQgPSBpc05hTihOdW1iZXIoYmFpbERpc2NvdW50KSkgPyAwIDogTnVtYmVyKGJhaWxEaXNjb3VudCk7CiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFByaWNlKGJ0IC0gYmQpOwogICAgfSwKICAgIHJlYWxSZXR1cm46IGZ1bmN0aW9uIHJlYWxSZXR1cm4oYmFpbFRvdGFsLCBiYWlsRGlzY291bnQsIGRlZHVjdGlvbikgewogICAgICB2YXIgYnQgPSBpc05hTihOdW1iZXIoYmFpbFRvdGFsKSkgPyAwIDogTnVtYmVyKGJhaWxUb3RhbCk7CiAgICAgIHZhciBiZCA9IGlzTmFOKE51bWJlcihiYWlsRGlzY291bnQpKSA/IDAgOiBOdW1iZXIoYmFpbERpc2NvdW50KTsKICAgICAgdmFyIGRkID0gaXNOYU4oTnVtYmVyKGRlZHVjdGlvbikpID8gMCA6IE51bWJlcihkZWR1Y3Rpb24pOwogICAgICByZXR1cm4gdGhpcy5mb3JtYXRQcmljZShidCAtIGJkIC0gZGQpOwogICAgfSwKICAgIGdldFBlcm1pc3Npb246IGZ1bmN0aW9uIGdldFBlcm1pc3Npb24oKSB7CiAgICAgIHJldHVybiBzdG9yZS5zdGF0ZS5hdXRoLnBlcm1pc3Npb247CiAgICB9LAogICAgY2hlY2tQZXJtaXNzaW9uU2hhcmU6IGZ1bmN0aW9uIGNoZWNrUGVybWlzc2lvblNoYXJlKHJvbGVzKSB7CiAgICAgIHZhciBwbSA9IHJvbGVzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4LnJvbGVOYW1lID09PSAib3duZXIiIHx8IHgucm9sZU5hbWUgPT09ICJhZG1pbiIgfHwgeC5yb2xlTmFtZSA9PT0gImFjY291bnRpbmdhZG1pbiIgfHwgeC5yb2xlTmFtZSA9PT0gInVzZXJhZG1pbiI7CiAgICAgIH0pOwoKICAgICAgaWYgKHBtLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgcmV0dXJuICJhZG1pbiI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJzdGFmZiI7CiAgICAgIH0KICAgIH0sCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KHVybCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHZzLmxvYWRpbmcoewogICAgICAgICAgICAgICAgLy8gICB0eXBlOiAicmFkaXVzIgogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHN0b3JlLnN0YXRlLmFwaVVSTCArIHVybCwgc3RvcmUuc3RhdGUuYXV0aC5hcGlIZWFkZXIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDNbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsvLyB0aGlzLiR2cy5sb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9LCAxMDAwKTsgLy8gLy8gdGhpcy5ub3RpY2VFcnJvcihlcnJvcik7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7Ly8gdGhpcy4kdnMubG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzEsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldE9uZTogZnVuY3Rpb24gZ2V0T25lKHVybCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHZzLmxvYWRpbmcoewogICAgICAgICAgICAgICAgLy8gICB0eXBlOiAicmFkaXVzIgogICAgICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IG51bGw7CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHN0b3JlLnN0YXRlLmFwaVVSTCArIHVybCwgc3RvcmUuc3RhdGUuYXV0aC5hcGlIZWFkZXIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsvLyB0aGlzLiR2cy5sb2FkaW5nLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9LCAxMDAwKTsgLy8gdGhpcy5ub3RpY2VFcnJvcihlcnJvcik7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7Ly8gdGhpcy4kdnMubG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ0LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCBudWxsLCBbWzEsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwZGF0ZVNoYXJlOiBmdW5jdGlvbiB1cGRhdGVTaGFyZSh1cmwsIGl0ZW0sIGlkKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRodHRwLnB1dChfdGhpczIuJHN0b3JlLnN0YXRlLmFwaVVSTCArIHVybCArICIvIiArIGlkLCBpdGVtLCBzdG9yZS5zdGF0ZS5hdXRoLmFwaUhlYWRlcik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgey8vIHRoaXMuJHZzLmxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0sIDMwMCk7IC8vIHRoaXMubm90aWNlRXJyb3IoZXJyb3IpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczIubm90aWNlU3VjY2Vzcygi4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIIik7CgogICAgICAgICAgICAgICAgICBfdGhpczIuJHZzLmxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCBudWxsLCBbWzAsIDZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHB1dDogZnVuY3Rpb24gcHV0KHVybCwgaXRlbSwgaWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wdXQoc3RvcmUuc3RhdGUuYXBpVVJMICsgdXJsICsgIi8iICsgaWQsIGl0ZW0sIF90aGlzMy4kc3RvcmUuc3RhdGUuYXV0aC5hcGlIZWFkZXIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Ni5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dDYudDAgPSBfY29udGV4dDZbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgaWYgKCFfY29udGV4dDYudDAucmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Ni50MC5yZXNwb25zZSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ2LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCBudWxsLCBbWzAsIDZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWF0ZVNoYXJlOiBmdW5jdGlvbiBjcmVhdGVTaGFyZSh1cmwsIGl0ZW0pIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzNC4kdnMubG9hZGluZyh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICJyYWRpdXMiCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDcucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LiRodHRwLnBvc3QoX3RoaXM0LiRzdG9yZS5zdGF0ZS5hcGlVUkwgKyB1cmwsIGl0ZW0sIHN0b3JlLnN0YXRlLmF1dGguYXBpSGVhZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSA3OwogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnQwID0gX2NvbnRleHQ3WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC4kdnMubG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSwgMzAwKTsgLy8gdGhpcy5ub3RpY2VFcnJvcihlcnJvcik7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5ub3RpY2VTdWNjZXNzKCLguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgiKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzNC4kdnMubG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgfSwgMzAwKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDcuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcsIG51bGwsIFtbMSwgN11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtYWluaW5nOiBmdW5jdGlvbiByZW1haW5pbmcobWF4VGV4dCwgdGhlVGV4dCkgewogICAgICBpZiAodGhlVGV4dCA9PT0gdW5kZWZpbmVkIHx8IHRoZVRleHQgPT09IG51bGwpIHRoZVRleHQgPSAiIjsKICAgICAgdGhpcy5ibG9ja1RleHQgPSB0aGVUZXh0OwogICAgICB0aGlzLnByZXZpb3VzVGV4dDsKICAgICAgdmFyIHQgPSBtYXhUZXh0IC0gdGhlVGV4dC5sZW5ndGg7CiAgICAgIGlmICh0IDw9IDApIHJldHVybiAwO2Vsc2UgcmV0dXJuIHQ7CiAgICB9LAogICAgcG9zdDogZnVuY3Rpb24gcG9zdCh1cmwsIGl0ZW0pIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KHN0b3JlLnN0YXRlLmFwaVVSTCArIHVybCwgaXRlbSwgX3RoaXM1LiRzdG9yZS5zdGF0ZS5hdXRoLmFwaUhlYWRlcik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC50MCA9IF9jb250ZXh0OFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0OC50MC5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ4LnQwLnJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDguc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZEFsbFdlYk9yZGVyU2hhcmU6IGZ1bmN0aW9uIGxvYWRBbGxXZWJPcmRlclNoYXJlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBudWxsOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9OYnM0dTBtOXBlaFhzZS93ZWJvcmRlciIsIF90aGlzNi4kc3RvcmUuc3RhdGUuYXV0aC5hcGlIZWFkZXIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDc7CiAgICAgICAgICAgICAgICBfY29udGV4dDkudDAgPSBfY29udGV4dDlbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ5LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5LCBudWxsLCBbWzEsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRBbGxPcmRlclNoYXJlOiBmdW5jdGlvbiBsb2FkQWxsT3JkZXJTaGFyZSgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBudWxsOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHN0b3JlLnN0YXRlLmFwaVVSTCArICIvYXBpL29yZGVyaGVhZGVyIiwgX3RoaXM3LiRzdG9yZS5zdGF0ZS5hdXRoLmFwaUhlYWRlcik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxMC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5wcmV2ID0gNzsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSBfY29udGV4dDEwWyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTAuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgbnVsbCwgW1sxLCA3XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkQWxsRGV0YWlsU2hhcmU6IGZ1bmN0aW9uIGxvYWRBbGxEZXRhaWxTaGFyZSgpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9vcmRlcmRldGFpbCIsIHN0b3JlLnN0YXRlLmF1dGguYXBpSGVhZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dDExLnQwID0gX2NvbnRleHQxMVsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMS5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExLCBudWxsLCBbWzAsIDZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWREZXRhaWxTaGFyZTogZnVuY3Rpb24gbG9hZERldGFpbFNoYXJlKG9yZGVySWQpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHN0b3JlLnN0YXRlLmFwaVVSTCArICIvYXBpL29yZGVyZGV0YWlsLyIgKyBvcmRlcklkLCBfdGhpczguJHN0b3JlLnN0YXRlLmF1dGguYXBpSGVhZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDEyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnQwID0gX2NvbnRleHQxMlsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMi5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyLCBudWxsLCBbWzAsIDZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRCcmFuY2hTaGFyZTogZnVuY3Rpb24gbG9hZEJyYW5jaFNoYXJlKGlkKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEzJChfY29udGV4dDEzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTMucHJldiA9IF9jb250ZXh0MTMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gbnVsbDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9icmFuY2gvIiArIGlkLCBfdGhpczkuJHN0b3JlLnN0YXRlLmF1dGguYXBpSGVhZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDEzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSA3OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy50MCA9IF9jb250ZXh0MTNbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxMy5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzLCBudWxsLCBbWzEsIDddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRCcmFuY2hPcmRlclNoYXJlOiBmdW5jdGlvbiBsb2FkQnJhbmNoT3JkZXJTaGFyZShicmFuY2hJZCkgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTQoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTQkKF9jb250ZXh0MTQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxNC5wcmV2ID0gX2NvbnRleHQxNC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHN0b3JlLnN0YXRlLmFwaVVSTCArICIvYXBpL29yZGVyaGVhZGVyL2JyYW5jaC8iICsgYnJhbmNoSWQsIF90aGlzMTAuJHN0b3JlLnN0YXRlLmF1dGguYXBpSGVhZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDE0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTQucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dDE0LnQwID0gX2NvbnRleHQxNFsiY2F0Y2giXSgwKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQxNC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE0LCBudWxsLCBbWzAsIDZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRPcmRlckJ5QnJhbmNoU2hhcmVkOiBmdW5jdGlvbiBsb2FkT3JkZXJCeUJyYW5jaFNoYXJlZChicmFuY2hsaXN0KSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxNSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNSQoX2NvbnRleHQxNSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE1LnByZXYgPSBfY29udGV4dDE1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDE1LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KHN0b3JlLnN0YXRlLmFwaVVSTCArICIvYXBpL29yZGVyaGVhZGVyL2J5YnJhbmNoZXMiLCBicmFuY2hsaXN0LCBfdGhpczExLiRzdG9yZS5zdGF0ZS5hdXRoLmFwaUhlYWRlcik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxNS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQxNS5uZXh0ID0gODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDE1LnByZXYgPSA2OwogICAgICAgICAgICAgICAgX2NvbnRleHQxNS50MCA9IF9jb250ZXh0MTVbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTUubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTUuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxNSwgbnVsbCwgW1swLCA2XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2FkT3JkZXJCeUJyYW5jaE9iamVjdFNoYXJlZDogZnVuY3Rpb24gbG9hZE9yZGVyQnlCcmFuY2hPYmplY3RTaGFyZWQoYUJyYW5jaCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTYoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlLCBhcnI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxNiQoX2NvbnRleHQxNikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDE2LnByZXYgPSBfY29udGV4dDE2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBhcnIgPSBbXTsgLy8g4LmB4Lib4Lil4LiH4LmA4Lib4LmH4LiZIGFycmF5IOC4geC5iOC4reC4mQoKICAgICAgICAgICAgICAgIGFyci5wdXNoKGFCcmFuY2gpOwogICAgICAgICAgICAgICAgX2NvbnRleHQxNi5wcmV2ID0gMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9vcmRlcmhlYWRlci9ieWJyYW5jaGVzIiwgYXJyLCBfdGhpczEyLiRzdG9yZS5zdGF0ZS5hdXRoLmFwaUhlYWRlcik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxNi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX2NvbnRleHQxNi5wcmV2ID0gODsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTYudDAgPSBfY29udGV4dDE2WyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxNi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE2LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQxNi5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTE2LCBudWxsLCBbWzIsIDhdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vICAgdmFsaWRhdGVFbWFpbChlbWFpbCkgewogICAgLy8gICAgIGNvbnN0IHJlID0gL14oKFtePD4oKVxbXF1cXC4sOzpcc0AiXSsoXC5bXjw+KClcW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cXSl8KChbYS16QS1aXC0wLTldK1wuKStbYS16QS1aXXsyLH0pKSQvOwogICAgLy8gICAgIHJldHVybiByZS50ZXN0KFN0cmluZyhlbWFpbCkudG9Mb3dlckNhc2UoKSk7CiAgICAvLyAgfSwKICAgIGxvYWRCcmFuY2hPcmRlclBpY2t1cGRhdGVTb3J0U2hhcmU6IGZ1bmN0aW9uIGxvYWRCcmFuY2hPcmRlclBpY2t1cGRhdGVTb3J0U2hhcmUoYnJhbmNoSWQpIHsKICAgICAgdmFyIF90aGlzMTMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTE3KCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTE3JChfY29udGV4dDE3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTcucHJldiA9IF9jb250ZXh0MTcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9vcmRlcmhlYWRlci9icmFuY2gvcGlja3VwZGF0ZS1zb3J0LyIgKyBicmFuY2hJZCwgX3RoaXMxMy4kc3RvcmUuc3RhdGUuYXV0aC5hcGlIZWFkZXIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTcuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQxNy5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTcudDAgPSBfY29udGV4dDE3WyJjYXRjaCJdKDApOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDE3Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDE3LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxNy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTcsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0QnJhbmNoQnlDb2RlOiBmdW5jdGlvbiBnZXRCcmFuY2hCeUNvZGUoY29kZSkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTgoKSB7CiAgICAgICAgdmFyIGJyLCBhQnJhbmNoOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTgkKF9jb250ZXh0MTgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOC5wcmV2ID0gX2NvbnRleHQxOC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE0LmxvYWRBbGxCcmFuY2hTaGFyZSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBiciA9IF9jb250ZXh0MTguc2VudDsKICAgICAgICAgICAgICAgIGFCcmFuY2ggPSBudWxsOwoKICAgICAgICAgICAgICAgIGlmICghKGJyID09PSBudWxsIHx8IGJyID09PSB1bmRlZmluZWQgfHwgYnIubGVuZ3RoID09PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDE4Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBici5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB4LmNvZGUgPT09ICIwIjsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBhQnJhbmNoID0gX2NvbnRleHQxOC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQxOC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTgubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGJyLmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHguY29kZSA9PT0gY29kZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgYUJyYW5jaCA9IF9jb250ZXh0MTguc2VudDsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LmFicnVwdCgicmV0dXJuIiwgYUJyYW5jaCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEJyYW5jaFNoYXJlOiBmdW5jdGlvbiBnZXRCcmFuY2hTaGFyZShpZCkgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTkoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTkkKF9jb250ZXh0MTkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxOS5wcmV2ID0gX2NvbnRleHQxOS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxOS5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHN0b3JlLnN0YXRlLmFwaVVSTCArICIvYXBpL2JyYW5jaC8iICsgaWQsIF90aGlzMTUuJHN0b3JlLnN0YXRlLmF1dGguYXBpSGVhZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDE5LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDE5Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTkucHJldiA9IDY7CiAgICAgICAgICAgICAgICBfY29udGV4dDE5LnQwID0gX2NvbnRleHQxOVsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTkubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxOS5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0MTkuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDE5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxOSwgbnVsbCwgW1swLCA2XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRBbGxCcmFuY2g6IGZ1bmN0aW9uIGdldEFsbEJyYW5jaCgpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIwKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIwJChfY29udGV4dDIwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjAucHJldiA9IF9jb250ZXh0MjAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MjAucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIwLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9icmFuY2giLCBfdGhpczE2LiRzdG9yZS5zdGF0ZS5hdXRoLmFwaUhlYWRlcik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyMC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX2NvbnRleHQyMC5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0MjAudDAgPSBfY29udGV4dDIwWyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgLy8gdGhpcy5ub3RpY2VFcnJvcihlcnJvcik7CiAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICB0aXRsZTogJ+C4oeC4teC4ouC4suC4h+C4reC4ouC5iOC4suC4h+C4nOC4tOC4lOC4nuC4peC4suC4lCcgLy8gdGV4dDogJ1NvbWV0aGluZyB3ZW50IHdyb25nIScsCgogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMC5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyMC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIwLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyMC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjAuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIwLCBudWxsLCBbWzAsIDZdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEltYWdlOiBmdW5jdGlvbiBnZXRJbWFnZShzaG9wSWQsIGltYWdlUGF0aCkgewogICAgICB2YXIgdXJsID0gIiI7CgogICAgICBpZiAoaW1hZ2VQYXRoID09PSBudWxsIHx8IGltYWdlUGF0aCA9PT0gdW5kZWZpbmVkIHx8IGltYWdlUGF0aCA9PT0gIiIpIHsKICAgICAgICB1cmwgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jb21tb24uaW1hZ2VVcmwgKyAiLyIgKyBzaG9wSWQgKyAiLyIgKyAiZGVmYXVsdF9zaG9wLnBuZyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdXJsID0gdGhpcy4kc3RvcmUuc3RhdGUuY29tbW9uLmltYWdlVXJsICsgIi8iICsgc2hvcElkICsgIi8iICsgaW1hZ2VQYXRoOwogICAgICB9CgogICAgICByZXR1cm4gdXJsOwogICAgfSwKICAgIGdldEltYWdlcGF0aDogZnVuY3Rpb24gZ2V0SW1hZ2VwYXRoKG1haW5JbWFnZSkgewogICAgICBpZiAobWFpbkltYWdlID09PSB1bmRlZmluZWQgfHwgbWFpbkltYWdlID09PSBudWxsIHx8IG1haW5JbWFnZSA9PT0gIiIgfHwgbWFpbkltYWdlID09PSB0aGlzLiRzdG9yZS5zdGF0ZS5pbWFnZVN0b3JlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmRlZmF1bHRJbWFnZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAobWFpbkltYWdlLnN0YXJ0c1dpdGgoImh0dHBzOi8vIikpIHJldHVybiBtYWluSW1hZ2U7ZWxzZSByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuaW1hZ2VTdG9yZSArIG1haW5JbWFnZTsKICAgICAgfQogICAgfSwKICAgIGdldEZ1bGxQYXRoOiBmdW5jdGlvbiBnZXRGdWxsUGF0aChtYWluSW1hZ2UpIHsKICAgICAgaWYgKG1haW5JbWFnZSA9PT0gdW5kZWZpbmVkIHx8IG1haW5JbWFnZSA9PT0gbnVsbCB8fCBtYWluSW1hZ2UgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLmltYWdlU3RvcmUgKyAiZGVmYXVsdGltYWdlLnBuZyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHN0b3JlLnN0YXRlLmltYWdlU3RvcmUgKyBtYWluSW1hZ2U7CiAgICAgIH0KICAgIH0sCiAgICBiYXNlSW1hZ2VQYXRoOiBmdW5jdGlvbiBiYXNlSW1hZ2VQYXRoKG1haW5JbWFnZSkgewogICAgICBpZiAobWFpbkltYWdlID09PSB1bmRlZmluZWQgfHwgbWFpbkltYWdlID09PSBudWxsIHx8IG1haW5JbWFnZSA9PT0gIiIpIHsKICAgICAgICByZXR1cm4gc3RvcmUuc3RhdGUuaW1hZ2VTdG9yZSArICJkZWZhdWx0aW1hZ2UucG5nIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gc3RvcmUuc3RhdGUuYmFzZUltYWdlU3RvcmUgKyBtYWluSW1hZ2U7CiAgICAgIH0KICAgIH0sCiAgICBnZXRXZWJQYXRoOiBmdW5jdGlvbiBnZXRXZWJQYXRoKG1haW5JbWFnZSkgewogICAgICBpZiAobWFpbkltYWdlID09PSB1bmRlZmluZWQgfHwgbWFpbkltYWdlID09PSBudWxsIHx8IG1haW5JbWFnZSA9PT0gIiIpIHsKICAgICAgICByZXR1cm4gc3RvcmUuc3RhdGUuaW1hZ2VTdG9yZSArICJkZWZhdWx0aW1hZ2UucG5nIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gc3RvcmUuc3RhdGUud2ViSW1hZ2UgKyBtYWluSW1hZ2U7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkQWxsQnJhbmNoU2hhcmU6IGZ1bmN0aW9uIGxvYWRBbGxCcmFuY2hTaGFyZSgpIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIxKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIxJChfY29udGV4dDIxKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjEucHJldiA9IF9jb250ZXh0MjEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MjEucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIxLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9icmFuY2giLCBfdGhpczE3LiRzdG9yZS5zdGF0ZS5hdXRoLmFwaUhlYWRlcik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyMS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyMS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIxLnByZXYgPSA2OwogICAgICAgICAgICAgICAgX2NvbnRleHQyMS50MCA9IF9jb250ZXh0MjFbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dDIxLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjEuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIxLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjEsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8qKiogMjAyMS0wMy0wOSA6IEJFR0lOIEZvciBBQkIgUkVDRUlQVAogICAgY2FsY3VsYXRlU2NvcmVGb3JBYmJSZWNlaXB0OiBmdW5jdGlvbiBjYWxjdWxhdGVTY29yZUZvckFiYlJlY2VpcHQoc2hvcExpbmVTY29yZSwgcmVjb3JkU2NvcmUpIHsKICAgICAgLy8gICDguITguLPguK3guJjguLTguJrguLLguKIgMyDguJrguKPguKPguJfguLHguJQg4LiV4Li14LmA4Lib4LmH4LiZIDEgcmVjb3JkCiAgICAgIC8vICAg4LmA4LiJ4Lil4Li04Li14LmI4Lii4LiI4Liw4Lih4Li1IDYg4Lia4Lij4Lij4LiX4Lix4LiUIOC4q+C4o+C4t+C4rSAyIHJlY29yZCDguKrguLPguKvguKPguLHguJog4LiC4LmJ4Lit4LiV4LiB4Lil4LiH4LiB4Liy4Lij4LmA4LiK4LmI4Liy4LiK4Li44LiUCiAgICAgIC8vICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAvLyAxIFJlY29yZCDguITguKfguLLguKHguKrguLnguIcgNjRweCDguKvguKPguLfguK3guJvguKPguLDguKHguLLguJMgMTYuOTMzMzMKICAgICAgLy8gMSBweCB+IDAuMjY0NTgzMzMzMyBtbQogICAgICAvLyAxIFJlY29yZHMg4Lib4Lij4Liw4Lih4Liy4LiTIDE2LjkzMzMzMzMzMTIgbW0KICAgICAgLy8gNSBSZWNvcmRzIOC4m+C4o+C4sOC4oeC4suC4kyA4NSBtbQogICAgICAvLyAgMS4gdXAgdG8gMyByZWNvcmRzICgxIHJlY29yZCArIDYgbGluZXMpIDMwMG1tIC8gMzEwbW0gKGh0bWwgLyBwYWdlc2l6ZSkKICAgICAgLy8gIDIuIHVwIHRvIDQgLSA1IHJlY29yZHMgKDIgcmVjb3JkcyArIDMgcmVjb3JkcykgIDMyMG1tIC8gMzMwbW0gKGh0bWwgLyBwYWdlc2l6ZSkKICAgICAgLy8gIDMuIHVwIHRvIDYgLSA3IHJlY29yZHMgKDIgcmVjb3JkcyArIDUgcmVjb3JkcykgIDM1MG1tIC8gMzYwbW0gIChodG1sIC8gcGFnZXNpemUpCiAgICAgIC8vICA0LiB1cCB0byA4IC0gMTIgcmVjb3JkcyAgNDUwbW0gLyA0NjBtbSAoaHRtbCAvIHBhZ2VzaXplKQogICAgICAvLyAgNS4gdXAgdG8gMTMgLSAxNyByZWNvcmRzICA1NTBtbSAvIDU2MG1tIChodG1sIC8gcGFnZXNpemUpCiAgICAgIC8vICA2LiB1cCB0byAxOCAtIDIyIHJlY29yZHMgIDY1MG1tIC8gNjYwbW0gKGh0bWwgLyBwYWdlc2l6ZSkKICAgICAgLy8gIDcuIHVwIHRvIDIzIC0gMjcgcmVjb3JkcyAgNzUwbW0gLyA3NjBtbSAoaHRtbCAvIHBhZ2VzaXplKQogICAgICB2YXIgdG90YWwgPSBzaG9wTGluZVNjb3JlICsgcmVjb3JkU2NvcmU7IC8vIGNvbnNvbGUubG9nKCd0b3RhbCBzY29yZSA+Pj4gJywgdG90YWwpOwoKICAgICAgaWYgKHRvdGFsIDw9IDMpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfSBlbHNlIGlmICh0b3RhbCA+PSA0ICYmIHRvdGFsIDw9IDUpIHsKICAgICAgICByZXR1cm4gMjsKICAgICAgfSBlbHNlIGlmICh0b3RhbCA+PSA2ICYmIHRvdGFsIDw9IDgpIHsKICAgICAgICByZXR1cm4gMzsKICAgICAgfSBlbHNlIGlmICh0b3RhbCA+PSA5ICYmIHRvdGFsIDw9IDEyKSB7CiAgICAgICAgcmV0dXJuIDQ7CiAgICAgIH0gZWxzZSBpZiAodG90YWwgPj0gMTMgJiYgdG90YWwgPD0gMTcpIHsKICAgICAgICByZXR1cm4gNTsKICAgICAgfSBlbHNlIGlmICh0b3RhbCA+PSAxNCAmJiB0b3RhbCA8PSAyMikgewogICAgICAgIHJldHVybiA2OwogICAgICB9IGVsc2UgaWYgKHRvdGFsID49IDIzICYmIHRvdGFsIDw9IDI3KSB7CiAgICAgICAgcmV0dXJuIDc7CiAgICAgIH0gLy8gaWYgKHRvdGFsIDw9IDMpIHsKICAgICAgLy8gICByZXR1cm4gMTsKICAgICAgLy8gfSBlbHNlIGlmICh0b3RhbCA+PSA0ICYmIHRvdGFsIDw9IDUpIHsKICAgICAgLy8gICByZXR1cm4gMgogICAgICAvLyB9IGVsc2UgaWYgKHRvdGFsID49IDYgJiYgdG90YWwgPD0gNykgewogICAgICAvLyAgIHJldHVybiAzCiAgICAgIC8vIH0gZWxzZSBpZiAodG90YWwgPj0gOCAmJiB0b3RhbCA8PSAxMikgewogICAgICAvLyAgIHJldHVybiA0CiAgICAgIC8vIH0gZWxzZSBpZiAodG90YWwgPj0gMTMgJiYgdG90YWwgPD0gMTcpIHsKICAgICAgLy8gICByZXR1cm4gNQogICAgICAvLyB9IGVsc2UgaWYgKHRvdGFsID49IDE4ICYmIHRvdGFsIDw9IDIyKSB7CiAgICAgIC8vICAgcmV0dXJuIDYKICAgICAgLy8gfSBlbHNlIGlmICh0b3RhbCA+PSAyMyAmJiB0b3RhbCA8PSAyNykgewogICAgICAvLyAgIHJldHVybiA3CiAgICAgIC8vIH0KCiAgICB9LAogICAgLy8qKiogMjAyMS0wMy0wOSA6IEVORCBGb3IgQUJCIFJFQ0VJUFQKICAgIGdldFNob3BJbmZvOiBmdW5jdGlvbiBnZXRTaG9wSW5mbygpIHsKICAgICAgdmFyIF90aGlzMTggPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIyKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIyJChfY29udGV4dDIyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MjIucHJldiA9IF9jb250ZXh0MjIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MjIucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldChzdG9yZS5zdGF0ZS5hcGlVUkwgKyAiL2FwaS9zaG9waW5mbyIsIF90aGlzMTguJHN0b3JlLnN0YXRlLmF1dGguYXBpSGVhZGVyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDIyLnByZXYgPSA2OwogICAgICAgICAgICAgICAgX2NvbnRleHQyMi50MCA9IF9jb250ZXh0MjJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICAvLyB0aGlzLm5vdGljZUVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiAn4Lih4Li14Lii4Liy4LiH4Lit4Lii4LmI4Liy4LiH4Lic4Li04LiU4Lie4Lil4Liy4LiUJyAvLyB0ZXh0OiAnU29tZXRoaW5nIHdlbnQgd3JvbmchJywKCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIyLmFicnVwdCgicmV0dXJuIiwgbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MjIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIyLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyMi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMjIsIG51bGwsIFtbMCwgNl1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgb25Db3B5OiBmdW5jdGlvbiBvbkNvcHkoKSB7CiAgICAgIHRoaXMuJHZzLm5vdGlmeSh7CiAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICB0ZXh0OiAnVGV4dCBjb3BpZWQgc3VjY2Vzc2Z1bGx5JywKICAgICAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgICAgIGljb25QYWNrOiAnZmVhdGhlcicsCiAgICAgICAgcG9zaXRpb246ICd0b3AtY2VudGVyJywKICAgICAgICBpY29uOiAnaWNvbi1jaGVjay1jaXJjbGUnCiAgICAgIH0pOwogICAgfSwKICAgIG9uRXJyb3I6IGZ1bmN0aW9uIG9uRXJyb3IoKSB7CiAgICAgIHRoaXMuJHZzLm5vdGlmeSh7CiAgICAgICAgdGl0bGU6ICdGYWlsZWQnLAogICAgICAgIHRleHQ6ICdFcnJvciBpbiBjb3B5aW5nIHRleHQnLAogICAgICAgIGNvbG9yOiAnZGFuZ2VyJywKICAgICAgICBpY29uUGFjazogJ2ZlYXRoZXInLAogICAgICAgIHBvc2l0aW9uOiAndG9wLWNlbnRlcicsCiAgICAgICAgaWNvbjogJ2ljb24tYWxlcnQtY2lyY2xlJwogICAgICB9KTsKICAgIH0sCiAgICBub3RpY2VTdWNjZXNzOiBmdW5jdGlvbiBub3RpY2VTdWNjZXNzKHRleHQpIHsKICAgICAgdGhpcy4kdnMubm90aWZ5KHsKICAgICAgICB0aXRsZTogIuC4lOC4s+C5gOC4meC4tOC4meC4geC4suC4o+C4quC4s+C5gOC4o+C5h+C4iCIsCiAgICAgICAgcG9zaXRpb246ICJ0b3AtY2VudGVyIiwKICAgICAgICB0ZXh0OiB0ZXh0LAogICAgICAgIGljb25QYWNrOiAiZmVhdGhlciIsCiAgICAgICAgaWNvbjogImljb24tYWxlcnQtY2lyY2xlIiwKICAgICAgICBjb2xvcjogInN1Y2Nlc3MiCiAgICAgIH0pOwogICAgfSwKICAgIG5vdGljZUVycm9yOiBmdW5jdGlvbiBub3RpY2VFcnJvcih0ZXh0KSB7CiAgICAgIHRoaXMuJHZzLm5vdGlmeSh7CiAgICAgICAgdGl0bGU6ICLguYDguIHguLTguJTguILguYnguK3guJzguLTguJTguJ7guKXguLLguJQiLAogICAgICAgIHBvc2l0aW9uOiAidG9wLWNlbnRlciIsCiAgICAgICAgdGV4dDogdGV4dCwKICAgICAgICBpY29uUGFjazogImZlYXRoZXIiLAogICAgICAgIGljb246ICJpY29uLWFsZXJ0LWNpcmNsZSIsCiAgICAgICAgY29sb3I6ICJkYW5nZXIiCiAgICAgIH0pOwogICAgfSwKICAgIG5vdGljZVdhcm5pbmc6IGZ1bmN0aW9uIG5vdGljZVdhcm5pbmcodGl0bGUsIHRleHQpIHsKICAgICAgdGhpcy4kdnMubm90aWZ5KHsKICAgICAgICB0aXRsZTogdGl0bGUsCiAgICAgICAgcG9zaXRpb246ICJ0b3AtY2VudGVyIiwKICAgICAgICB0ZXh0OiB0ZXh0LAogICAgICAgIGljb25QYWNrOiAiZmVhdGhlciIsCiAgICAgICAgaWNvbjogImljb24tYWxlcnQtY2lyY2xlIiwKICAgICAgICBjb2xvcjogIndhcm5pbmciCiAgICAgIH0pOwogICAgfSwKICAgIG5vdGljZUluZm86IGZ1bmN0aW9uIG5vdGljZUluZm8odGV4dCkgewogICAgICB0aGlzLiR2cy5ub3RpZnkoewogICAgICAgIHRpdGxlOiAi4LmA4LiB4Li04LiU4LiC4LmJ4Lit4Lic4Li04LiU4Lie4Lil4Liy4LiUIiwKICAgICAgICBwb3NpdGlvbjogInRvcC1jZW50ZXIiLAogICAgICAgIHRleHQ6IHRleHQsCiAgICAgICAgaWNvblBhY2s6ICJmZWF0aGVyIiwKICAgICAgICBpY29uOiAiaWNvbi1hbGVydC1jaXJjbGUiLAogICAgICAgIGNvbG9yOiAiaW5mbyIKICAgICAgfSk7CiAgICB9LAogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7CiAgICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSksCiAgICAgICAgICBtb250aCA9ICcnICsgKGQuZ2V0TW9udGgoKSArIDEpLAogICAgICAgICAgZGF5ID0gJycgKyBkLmdldERhdGUoKSwKICAgICAgICAgIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgIGlmIChtb250aC5sZW5ndGggPCAyKSBtb250aCA9ICcwJyArIG1vbnRoOwogICAgICBpZiAoZGF5Lmxlbmd0aCA8IDIpIGRheSA9ICcwJyArIGRheTsKICAgICAgcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XS5qb2luKCctJyk7CiAgICB9LAogICAgZm9ybWF0X2RkbW15eXk6IGZ1bmN0aW9uIGZvcm1hdF9kZG1teXl5KGRhdGUpIHsKICAgICAgdmFyIGQgPSBuZXcgRGF0ZShkYXRlKSwKICAgICAgICAgIG1vbnRoID0gJycgKyAoZC5nZXRNb250aCgpICsgMSksCiAgICAgICAgICBkYXkgPSAnJyArIGQuZ2V0RGF0ZSgpLAogICAgICAgICAgeWVhciA9IGQuZ2V0RnVsbFllYXIoKTsKICAgICAgaWYgKG1vbnRoLmxlbmd0aCA8IDIpIG1vbnRoID0gJzAnICsgbW9udGg7CiAgICAgIGlmIChkYXkubGVuZ3RoIDwgMikgZGF5ID0gJzAnICsgZGF5OwogICAgICByZXR1cm4gW2RheSwgbW9udGgsIHllYXJdLmpvaW4oJy8nKTsKICAgIH0sCiAgICBmb3JtYXRBbHBoYWJldDogZnVuY3Rpb24gZm9ybWF0QWxwaGFiZXQoZGF0ZSkgewogICAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUpLAogICAgICAgICAgbW9udGhfaW5kID0gZC5nZXRNb250aCgpLAogICAgICAgICAgZGF5ID0gZC5nZXREYXRlKCksCiAgICAgICAgICB5ZWFyID0gZC5nZXRGdWxsWWVhcigpOwogICAgICB2YXIgbW9udGhfYXJyID0gWyJKYW4iLCAiRmViIiwgIk1hciIsICJBcHIiLCAiTWF5IiwgIkp1biIsICJKdWwiLCAiQXVnIiwgIlNlcHQiLCAiT2N0IiwgIk5vdiIsICJEZWMiXTsKICAgICAgdmFyIG1vbnRoX3N0ciA9IG1vbnRoX2Fyclttb250aF9pbmRdOyAvLyBpZiAobW9udGgubGVuZ3RoIDwgMikgbW9udGggPSAnMCcgKyBtb250aDsKICAgICAgLy8gaWYgKGRheS5sZW5ndGggPCAyKSBkYXkgPSAnMCcgKyBkYXk7CgogICAgICByZXR1cm4gW2RheSwgbW9udGhfc3RyLCB5ZWFyXS5qb2luKCcgJyk7CiAgICB9LAogICAgZm9ybWF0VGhhaTogZnVuY3Rpb24gZm9ybWF0VGhhaShkYXRlKSB7CiAgICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSksCiAgICAgICAgICBtb250aF9pbmQgPSBkLmdldE1vbnRoKCksCiAgICAgICAgICBkYXkgPSBkLmdldERhdGUoKSwKICAgICAgICAgIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICAgIHZhciBtb250aF9hcnIgPSBbIuC4oeC4geC4o+C4suC4hOC4oSIsICLguIHguLjguKHguKDguLLguJ7guLHguJnguJjguYwiLCAi4Lih4Li14LiZ4Liy4LiE4LihIiwgIuC5gOC4oeC4qeC4suC4ouC4mSIsICLguJ7guKTguKnguKDguLLguITguKEiLCAi4Lih4Li04LiW4Li44LiZ4Liy4Lii4LiZIiwgIuC4geC4o+C4geC4juC4suC4hOC4oSIsICLguKrguLTguIfguKvguLLguITguKEiLCAi4LiB4Lix4LiZ4Lii4Liy4Lii4LiZIiwgIuC4leC4uOC4peC4suC4hOC4oSIsICLguJ7guKTguKjguIjguLTguIHguLLguKLguJkiLCAi4LiY4Lix4LiZ4Lin4Liy4LiE4LihIl07CiAgICAgIHZhciBtb250aF9zdHIgPSBtb250aF9hcnJbbW9udGhfaW5kXTsgLy8gaWYgKG1vbnRoLmxlbmd0aCA8IDIpIG1vbnRoID0gJzAnICsgbW9udGg7CiAgICAgIC8vIGlmIChkYXkubGVuZ3RoIDwgMikgZGF5ID0gJzAnICsgZGF5OwoKICAgICAgcmV0dXJuIFtkYXksIG1vbnRoX3N0ciwgeWVhcl0uam9pbignICcpOwogICAgfSwKICAgIGZvcm1hdEFNUE06IGZ1bmN0aW9uIGZvcm1hdEFNUE0oZGF0ZV9zdHIpIHsKICAgICAgaWYgKHR5cGVvZiBkYXRlX3N0ciA9PT0gInN0cmluZyIpIHsKICAgICAgICB2YXIgc3BsID0gZGF0ZV9zdHIuc3BsaXQoJyAnKTsKCiAgICAgICAgaWYgKHNwbC5sZW5ndGggPCAyKSB7CiAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVfc3RyKTsKICAgICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRIb3VycygpOyAvLyBjb25zb2xlLmxvZygiQU1QTSBpbiBob3VycyA+Pj4+ICIsdHlwZW9mKGRhdGUpKTsKCiAgICAgIHZhciBtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgIHZhciBhbXBtID0gaG91cnMgPj0gMTIgPyAncG0nIDogJ2FtJzsKICAgICAgaG91cnMgPSBob3VycyAlIDEyOwogICAgICBob3VycyA9IGhvdXJzID8gaG91cnMgOiAxMjsgLy8gdGhlIGhvdXIgJzAnIHNob3VsZCBiZSAnMTInCgogICAgICBtaW51dGVzID0gbWludXRlcyA8IDEwID8gJzAnICsgbWludXRlcyA6IG1pbnV0ZXM7CiAgICAgIHZhciBzdHJUaW1lID0gaG91cnMgKyAnOicgKyBtaW51dGVzICsgJyAnICsgYW1wbTsKICAgICAgcmV0dXJuIHN0clRpbWU7CiAgICB9LAogICAgZm9ybWF0RGF0ZUxvY2FsOiBmdW5jdGlvbiBmb3JtYXREYXRlTG9jYWwoZGF0ZSkgewogICAgICByZXR1cm4gdGhpcy5mb3JtYXREYXRlKGRhdGUpICsgIlQwMDowMDowMC4wMDBaIjsKICAgIH0sCiAgICBmb3JtYXRQcmljZTogZnVuY3Rpb24gZm9ybWF0UHJpY2UodmFsdWUpIHsKICAgICAgLy8gdmFyIG51bWJlciA9ICt2YWx1ZS5yZXBsYWNlKC9bXlxkLl0vZywgIiIpOwogICAgICB2YWx1ZSA9IHRoaXMuY29udmVydFRvTnVtKHZhbHVlKTsKICAgICAgdmFyIGFtb3VudCA9IGlzTmFOKHZhbHVlKSA/IDAgOiB2YWx1ZTsKICAgICAgcmV0dXJuIGFtb3VudC50b1N0cmluZygpLnJlcGxhY2UoLyhcZCkoPz0oXGR7M30pKyg/IVxkKSkvZywgIiQxLCIpOwogICAgfSwKICAgIGZvcm1hdFByaWNlMlBvaW50OiBmdW5jdGlvbiBmb3JtYXRQcmljZTJQb2ludCh2YWx1ZSkgewogICAgICB2YXIgdmFsID0gKHZhbHVlIC8gMSkudG9GaXhlZCgyKS5yZXBsYWNlKCIsIiwgIi4iKTsKICAgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICIsIik7CiAgICB9LAogICAgY29udmVydFRvTnVtOiBmdW5jdGlvbiBjb252ZXJ0VG9OdW0odmFsdWUpIHsKICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZS5yZXBsYWNlKCIsIiwgIiIpKTsKICAgICAgfQoKICAgICAgaWYgKGlzTmFOKHZhbHVlKSkgewogICAgICAgIHZhbHVlID0gMDsKICAgICAgfQoKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfSwKICAgIG51bWJlckZvcm1hdDogZnVuY3Rpb24gbnVtYmVyRm9ybWF0KHZhbHVlKSB7CiAgICAgIGlmIChpc05hTihOdW1iZXIodmFsdWUpKSkgcmV0dXJuIDA7CiAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpOwogICAgfSwKICAgIGZvcm1hdE51bWJlcjogZnVuY3Rpb24gZm9ybWF0TnVtYmVyKHZhbHVlKSB7CiAgICAgIGlmIChpc05hTihOdW1iZXIodmFsdWUpKSkgcmV0dXJuIDA7CiAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpOwogICAgfSwKICAgIC8vIFJldHVybnMgaWYgdmFsdWUgaXMgYSBkYXRlIG9iamVjdAogICAgaXNEYXRlOiBmdW5jdGlvbiBpc0RhdGUodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/src/mixins/shapeFormat.js"],"names":["axios","store","Swal","watch","data","theHeader","computed","taxInfo","getters","created","dispatch","methods","rentalPriceTotal_final","rentalPrice","rentalDiscount","vatSystem","inVat","isRentalDiscount","rentalPriceTotal1","rentalPriceTotal2","rentalPriceTotal3","rentalPriceTotal4","vat_final","vat1","vat2","vat3","vat4","beforeVat_final","beforeVat1","beforeVat2","beforeVat3","beforeVat4","taxRate","discount","undefined","getShopLineScore","shopInfo","lineNumber","spCount","sptStr","weight","termAndCondition","split","length","Math","ceil","checkQueueShare","list","res","post","state","apiURL","$store","auth","apiHeader","generateRandom","result","characters","charactersLength","i","charAt","floor","random","numRange","num","arr","push","filteringMore","filtering","filedName","templist","j","automapper","keys","newlist","item","hasOwnProperty","it","Object","assign","convertToArray","prop","cloneArray","original","searchByDate","startDate","endDate","listdate","formatDate","ckin","ckout","descendingSortShare","inputList","sortingField","sort","a","b","descendingDateSortShare","Date","ascendingSortShare","ascendingDateSortShare","date_diff_indays","date1","date2","dt1","dt2","UTC","getFullYear","getMonth","getDate","getdate","dad","amount","newdate","setDate","dd","mm","y","someFormattedDate","addDay","date","days","copy","Number","realRentalPrice","promotionDiscount","rp","isNaN","rd","pd","formatPrice","realBail","bailTotal","bailDiscount","bt","bd","realReturn","deduction","getPermission","permission","checkPermissionShare","roles","pm","filter","x","roleName","getList","url","response","get","setTimeout","getOne","updateShare","id","$http","put","noticeSuccess","$vs","loading","close","createShare","type","remaining","maxText","theText","blockText","previousText","t","loadAllWebOrderShare","loadAllOrderShare","loadAllDetailShare","loadDetailShare","orderId","loadBranchShare","loadBranchOrderShare","branchId","loadOrderByBranchShared","branchlist","loadOrderByBranchObjectShared","aBranch","loadBranchOrderPickupdateSortShare","getBranchByCode","code","loadAllBranchShare","br","find","getBranchShare","getAllBranch","fire","icon","title","getImage","shopId","imagePath","common","imageUrl","getImagepath","mainImage","imageStore","defaultImage","startsWith","getFullPath","baseImagePath","baseImageStore","getWebPath","webImage","calculateScoreForAbbReceipt","shopLineScore","recordScore","total","getShopInfo","onCopy","notify","text","color","iconPack","position","onError","noticeError","noticeWarning","noticeInfo","d","month","day","year","join","format_ddmmyyy","formatAlphabet","month_ind","month_arr","month_str","formatThai","formatAMPM","date_str","spl","hours","getHours","minutes","getMinutes","ampm","strTime","formatDateLocal","value","convertToNum","toString","replace","formatPrice2Point","val","toFixed","numberFormat","formatNumber","isDate"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport store from \"@/core/services/store\"\nimport Swal from 'sweetalert2'\n\nexport default {\n  watch: {\n\n  },\n  data() {\n    return {\n      theHeader: {}\n    }\n  },\n  computed: {\n//  *** BEGIN : 2020-04-06 : TAX INFO\n    taxInfo(){\n      return store.getters[\"shop/tax\"];\n    }\n  },\n  async created() {\n     await store.dispatch('shop/fetch');\n    // var tk = localStorage.getItem(\"token\");\n    // var theToken = JSON.parse(tk);\n    // this.$store.state.auth.apiHeader = {\n    //   headers: {\n    //     Authorization: \"bearer \" + theToken\n    //   }\n    // };\n  },\n  methods: {\n    // *** 2021-04-013 ระบภาษี\n    // *** rentalPriceTotal1 = this.rentalPriceTotal\n\n    // ยอดเช่าสุทธิ\n\n    rentalPriceTotal_final(rentalPrice, rentalDiscount){\n      //  CASE1 กรณี อยู่ในระบบ VAT | ไม่มีส่วนลด | ราคารวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===true && this.isRentalDiscount(rentalDiscount) === false)\n        return this.rentalPriceTotal1(rentalPrice);\n      //  CASE2 กรณี อยู่ในระบบ VAT | ไม่มีส่วนลด | ราคาไม่รวม\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===false && this.isRentalDiscount(rentalDiscount) === false)\n        return this.rentalPriceTotal2(rentalPrice);\n      //  CASE3 กรณี อยู่ในระบบ VAT | มีส่วนลด | ราคารวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===true && this.isRentalDiscount(rentalDiscount) === true)\n        return this.rentalPriceTotal3(rentalPrice, rentalDiscount);\n      //  CASE4 กรณี อยู่ในระบบ VAT | มีส่วนลด | ราคาไม่รวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===false && this.isRentalDiscount(rentalDiscount) === true)\n        return this.rentalPriceTotal4(rentalPrice, rentalDiscount);\n    },\n    vat_final(rentalPrice, rentalDiscount){\n      //  CASE1 กรณี อยู่ในระบบ VAT | ไม่มีส่วนลด | ราคารวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===true && this.isRentalDiscount(rentalDiscount) === false)\n        return this.vat1(rentalPrice);\n      //  CASE2 กรณี อยู่ในระบบ VAT | ไม่มีส่วนลด | ราคาไม่รวม\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===false && this.isRentalDiscount(rentalDiscount) === false)\n        return this.vat2(rentalPrice);\n      //  CASE3 กรณี อยู่ในระบบ VAT | มีส่วนลด | ราคารวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===true && this.isRentalDiscount(rentalDiscount) === true)\n        return this.vat3(rentalPrice, rentalDiscount);\n      //  CASE4 กรณี อยู่ในระบบ VAT | มีส่วนลด | ราคาไม่รวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===false && this.isRentalDiscount(rentalDiscount) === true)\n        return this.vat4(rentalPrice, rentalDiscount);\n    },\n    beforeVat_final(rentalPrice, rentalDiscount){\n      //  CASE1 กรณี อยู่ในระบบ VAT | ไม่มีส่วนลด | ราคารวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===true && this.isRentalDiscount(rentalDiscount) === false)\n        return this.beforeVat1(rentalPrice);\n      //  CASE2 กรณี อยู่ในระบบ VAT | ไม่มีส่วนลด | ราคาไม่รวม\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===false && this.isRentalDiscount(rentalDiscount) === false)\n        return this.beforeVat2(rentalPrice);\n      //  CASE3 กรณี อยู่ในระบบ VAT | มีส่วนลด | ราคารวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===true && this.isRentalDiscount(rentalDiscount) === true)\n        return this.beforeVat3(rentalPrice, rentalDiscount);\n      //  CASE4 กรณี อยู่ในระบบ VAT | มีส่วนลด | ราคาไม่รวม VAT\n      if(this.taxInfo.vatSystem===true && this.taxInfo.inVat===false && this.isRentalDiscount(rentalDiscount) === true)\n        return this.beforeVat4(rentalPrice, rentalDiscount);\n    },\n    beforeVat1(rentalPrice){\n      // ไม่มีส่วนลด ราคาในสต็อครวมภาษี (VAT1)\n      return rentalPrice - this.vat1(rentalPrice);\n    },\n    vat1(rentalPrice){\n      // ไม่มีส่วนลด ราคาในสต็อครวมภาษี (VAT1)\n      return rentalPrice * (this.taxInfo.taxRate / (100 + this.taxInfo.taxRate) );\n    },\n    rentalPriceTotal1(rentalPrice){\n      // ไม่มีส่วนลด ราคาในสต็อครวมภาษี (VAT1)\n      return rentalPrice ;\n\n    },\n    // ================================\n\n    beforeVat2(rentalPrice){\n      // ไม่มีส่วนลด ราคาในสต็อคไม่รวมภาษี (VAT2)\n      return rentalPrice;\n    },\n    vat2(rentalPrice){\n      // ไม่มีส่วนลด ราคาในสต็อคไม่รวมภาษี (VAT2)\n      return rentalPrice * (this.taxInfo.taxRate / 100);\n    },\n    rentalPriceTotal2(rentalPrice){\n      // ไม่มีส่วนลด ราคาในสต็อคไม่รวมภาษี (VAT2)\n      return rentalPrice + this.vat2(rentalPrice);\n\n    },\n\n    // ================================\n\n    beforeVat3(rentalPrice, rentalDiscount){\n      // มีส่วนลด ราคาในสต็อครวมภาษี (VAT3)\n      var discount = 0;\n      if(this.isRentalDiscount(rentalDiscount)){\n          discount = rentalDiscount;\n      }\n      return this.rentalPriceTotal3(rentalPrice, discount) - this.vat3(rentalPrice, discount);\n    },\n    vat3(rentalPrice, rentalDiscount ){\n      // มีส่วนลด ราคาในสต็อครวมภาษี (VAT3)\n      var discount = 0;\n      if(this.isRentalDiscount(rentalDiscount)){\n          discount = rentalDiscount;\n      }\n\n      return this.rentalPriceTotal3(rentalPrice, discount) * (this.taxInfo.taxRate  / (100 + this.taxInfo.taxRate ) );\n    },\n    rentalPriceTotal3(rentalPrice, rentalDiscount){\n      var discount = 0;\n      if(this.isRentalDiscount(rentalDiscount)){\n          discount = rentalDiscount;\n      }\n      // มีส่วนลด ราคาในสต็อครวมภาษี (VAT3)\n      return rentalPrice - discount;\n\n    },\n    // ================================\n     beforeVat4(rentalPrice, rentalDiscount){\n      // มีส่วนลด ราคาในสต็อคไม่รวมภาษี (VAT4)\n       var discount = 0;\n      if(this.isRentalDiscount(rentalDiscount)){\n          discount = rentalDiscount;\n      }\n      return rentalPrice - discount;\n    },\n    vat4(rentalPrice, rentalDiscount){\n      // มีส่วนลด ราคาในสต็อคไม่รวมภาษี (VAT4)\n       var discount = 0;\n      if(this.isRentalDiscount(rentalDiscount)){\n          discount = rentalDiscount;\n      }\n      return  this.beforeVat4(rentalPrice, discount)  * (this.taxInfo.taxRate  / 100);\n    },\n    rentalPriceTotal4(rentalPrice, rentalDiscount){\n       var discount = 0;\n      if(this.isRentalDiscount(rentalDiscount)){\n          discount = rentalDiscount;\n      }\n\n      return this.beforeVat4(rentalPrice, discount)  + this.vat4(rentalPrice, discount);\n    },\n    isRentalDiscount(rentalDiscount){\n         if(\n              rentalDiscount > 0 &&\n                  rentalDiscount != undefined &&\n                  rentalDiscount != null\n         )\n         return true;\n         else return false;\n    },\n    // *** 2021-04-013 ระบภาษี\n\n    // blueLight(event) {\n    //   if (event.target.className == \"choose\") {\n    //     event.target.className = \"notChoose\";\n    //   } else {\n    //     event.target.className = \"choose\";\n    //   }\n    // },\n\n    getShopLineScore(shopInfo){\n      var lineNumber = 0;\n      var spCount;\n      var sptStr = \"<p>\";\n      var weight = 4;\n\n      if(shopInfo.termAndCondition === null || shopInfo.termAndCondition === undefined || shopInfo.termAndCondition === \"\")\n      {\n          return 0;\n      }else{\n          spCount = shopInfo.termAndCondition.split(sptStr);\n      }\n      lineNumber = spCount.length - 1;\n\n      return Math.ceil(lineNumber/weight);\n\n    },\n\n    async checkQueueShare(list) {\n      var res = null;\n      try {\n        res = await axios.post(\n          store.state.apiURL + \"/api/orderdetail/checkq\",\n          list,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n        return null;\n\n      }\n\n      return await res.data;\n    },\n\n    generateRandom(length) {\n      var result = '';\n      var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      var charactersLength = characters.length;\n      for (var i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n      return result;\n    },\n    numRange(num) {\n      var arr = [] // create an empty array with length #num\n      for (var i = 0; i < num; i++) {\n        arr.push(i);\n      }\n      return arr;\n    },\n    filteringMore(\n      list /* Array of object list */ ,\n      filtering /* Array single list */ ,\n      filedName\n    ) {\n      // console.log('@filteringMore / orginalList', list);\n      // console.log('@filteringMore / filtering', filtering);\n\n      var templist = [];\n      if (filtering.length >= 1) {\n        for (var i = 0; i < list.length; i++) {\n          for (var j = 0; j < filtering.length; j++) {\n            if (list[i][filedName] === filtering[j]) {\n              // console.log('@filteringMore / list[i][filedName]', list[i][filedName]);\n              // console.log('@filteringMore / filtering[j]', filtering[j]);\n              templist.push(list[i]);\n            }\n          }\n        }\n      }\n      return templist;\n    },\n    automapper(list, keys) {\n      var newlist = [];\n      for (let i = 0; i < list.length; i++) {\n        var item = {};\n        for (let j = 0; j < keys.length; j++) {\n          if (list[0].hasOwnProperty(keys[j])) {\n            item[keys[j]] = list[i][keys[j]];\n          }\n\n        }\n        const it = Object.assign({}, item);\n        newlist.push(it);\n      }\n\n      return newlist;\n\n    },\n\n    convertToArray(list, prop) {\n      var newlist = [];\n\n      for (var i = 0; i < list.length; i++) {\n        newlist.push(list[i][prop]);\n      }\n\n      return newlist;\n    },\n\n\n    cloneArray(original) {\n      var newlist = [];\n\n      for (var i = 0; i < original.length; i++) {\n        newlist.push(original[i]);\n      }\n\n      return newlist;\n    },\n\n\n    searchByDate(list, startDate, endDate, filedName) {\n      // console.log('@searchByDate startDate >>> ', this.formatDate(startDate));\n      // console.log('@searchByDate endDate >>> ', this.formatDate(endDate));\n\n      var templist = [];\n      for (var i = 0; i < list.length; i++) {\n        var listdate = this.formatDate(list[i][filedName]);\n        var ckin = this.formatDate(startDate);\n        var ckout = this.formatDate(endDate);\n\n\n        if (listdate >= ckin && listdate <= ckout) {\n          templist.push(list[i]);\n        }\n      }\n      // console.log(\"searchByDate\", templist);\n\n      return templist;\n    },\n\n\n    descendingSortShare(inputList, sortingField) {\n      var list = [];\n      for (var i = 0; i < inputList.length; i++) {\n        list.push(inputList[i]);\n      }\n      list.sort((a, b) => b[sortingField] - a[sortingField]);\n      return list;\n    },\n    descendingDateSortShare(inputList, sortingField) {\n      var list = [];\n      for (var i = 0; i < inputList.length; i++) {\n        list.push(inputList[i]);\n      }\n      list.sort((a, b) => new Date(b[sortingField]) - new Date(a[sortingField]));\n      return list;\n    },\n\n    ascendingSortShare(inputList, sortingField) {\n      var list = [];\n      for (var i = 0; i < inputList.length; i++) {\n        list.push(inputList[i]);\n      }\n      list.sort((a, b) => a[sortingField] - b[sortingField]);\n      return list;\n    },\n\n    ascendingDateSortShare(inputList, sortingField) {\n      var list = [];\n      for (var i = 0; i < inputList.length; i++) {\n        list.push(inputList[i]);\n      }\n      list.sort((a, b) => new Date(a[sortingField]) - new Date(b[sortingField]));\n      return list;\n    },\n\n\n\n    date_diff_indays(date1, date2) {\n      var dt1 = new Date(date1);\n      var dt2 = new Date(date2);\n      return Math.floor(\n        (Date.UTC(dt2.getFullYear(), dt2.getMonth(), dt2.getDate()) -\n          Date.UTC(dt1.getFullYear(), dt1.getMonth(), dt1.getDate())) /\n        (1000 * 60 * 60 * 24)\n      );\n    },\n\n    getdate(dad, amount) {\n\n\n      var newdate = new Date(dad);\n\n      newdate.setDate(newdate.getDate() + amount);\n\n      var dd = newdate.getDate();\n      var mm = newdate.getMonth() + 1;\n      var y = newdate.getFullYear();\n\n      var someFormattedDate = y + '-' + mm + '-' + dd;\n      return someFormattedDate;\n    },\n\n    addDay(date, days) {\n      const copy = new Date(Number(date));\n      copy.setDate(date.getDate() + days);\n      return copy;\n    },\n    realRentalPrice(rentalPrice, rentalDiscount, promotionDiscount) {\n      var rp = isNaN(Number(rentalPrice)) ? 0 : Number(rentalPrice);\n\n      var rd = isNaN(Number(rentalDiscount)) ? 0 : Number(rentalDiscount);\n\n      var pd = isNaN(Number(promotionDiscount)) ? 0 : Number(promotionDiscount);\n\n      return this.formatPrice(rp - rd - pd);\n    },\n    realBail(bailTotal, bailDiscount) {\n      var bt = isNaN(Number(bailTotal)) ? 0 : Number(bailTotal);\n      var bd = isNaN(Number(bailDiscount)) ? 0 : Number(bailDiscount);\n      return this.formatPrice(bt - bd);\n    },\n    realReturn(bailTotal, bailDiscount, deduction) {\n      var bt = isNaN(Number(bailTotal)) ? 0 : Number(bailTotal);\n      var bd = isNaN(Number(bailDiscount)) ? 0 : Number(bailDiscount);\n      var dd = isNaN(Number(deduction)) ? 0 : Number(deduction);\n      return this.formatPrice(bt - bd - dd);\n    },\n    getPermission() {\n      return store.state.auth.permission;\n    },\n    checkPermissionShare(roles) {\n      var pm = roles.filter(\n        x =>\n        x.roleName === \"owner\" ||\n        x.roleName === \"admin\" ||\n        x.roleName === \"accountingadmin\" ||\n        x.roleName === \"useradmin\"\n      );\n      if (pm.length >= 1) {\n        return \"admin\";\n      } else {\n        return \"staff\";\n      }\n    },\n\n    async getList(url) {\n      // this.$vs.loading({\n      //   type: \"radius\"\n      // });\n      var response = null;\n      try {\n        response = await axios.get(\n          store.state.apiURL + url, store.state.auth.apiHeader\n        );\n      } catch (error) {\n        setTimeout(() => {\n          // this.$vs.loading.close();\n        }, 1000);\n        // // this.noticeError(error);\n        return null;\n\n      }\n\n      setTimeout(() => {\n        // this.$vs.loading.close();\n      }, 1000);\n\n      return await response.data;\n    },\n    async getOne(url) {\n      // this.$vs.loading({\n      //   type: \"radius\"\n      // });\n      var response = null;\n      try {\n        response = await axios.get(\n          store.state.apiURL + url, store.state.auth.apiHeader\n        );\n      } catch (error) {\n        setTimeout(() => {\n          // this.$vs.loading.close();\n        }, 1000);\n        // this.noticeError(error);\n        return null;\n\n      }\n\n      setTimeout(() => {\n        // this.$vs.loading.close();\n      }, 1000);\n      return await response.data;\n    },\n    async updateShare(url, item, id) {\n      // this.$vs.loading({\n      //   type: \"radius\"\n      // });\n      var response;\n      try {\n        response = await this.$http.put(\n          this.$store.state.apiURL + url + \"/\" + id,\n          item,\n          store.state.auth.apiHeader\n        );\n\n      } catch (error) {\n        setTimeout(() => {\n          // this.$vs.loading.close();\n        }, 300);\n        // this.noticeError(error);\n        return null;\n      }\n      setTimeout(() => {\n        this.noticeSuccess(\"บันทึกสำเร็จ\");\n        this.$vs.loading.close();\n      }, 300);\n\n      return await response.data;\n    },\n\n    async put(url, item, id) {\n      var response;\n      try {\n        response = await axios.put(store.state.apiURL + url + \"/\" + id, item, this.$store.state.auth.apiHeader);\n      } catch (error) {\n        if (error.response) {\n          //   console.log(\"error.response >>> \", error.response);\n          return error.response;\n        } else {\n          return null;\n        }\n      }\n\n      return await response.data;\n    },\n\n\n\n    async createShare(url, item) {\n      this.$vs.loading({\n        type: \"radius\"\n      });\n      var response;\n      try {\n        response = await this.$http.post(\n          this.$store.state.apiURL + url,\n          item,\n          store.state.auth.apiHeader\n        );\n\n      } catch (error) {\n        setTimeout(() => {\n          this.$vs.loading.close();\n        }, 300);\n        // this.noticeError(error);\n        return null;\n      }\n      setTimeout(() => {\n        this.noticeSuccess(\"บันทึกสำเร็จ\");\n        this.$vs.loading.close();\n      }, 300);\n\n      return await response.data;\n    },\n\n    remaining(maxText, theText){\n      if(theText === undefined || theText === null) theText = \"\";\n      this.blockText = theText;\n      this.previousText\n      var t = maxText - theText.length;\n      if(t <= 0) return 0;\n      else\n        return t;\n    },\n\n    async post(url, item) {\n      var response;\n\n      try {\n        response = await axios.post(store.state.apiURL + url, item, this.$store.state.auth.apiHeader);\n      } catch (error) {\n        if (error.response) {\n          //   console.log(\"error.response >>> \", error.response);\n          return error.response;\n        } else {\n          return null;\n        }\n      }\n\n      return await response.data;\n    },\n\n\n    async loadAllWebOrderShare() {\n      var response = null;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/Nbs4u0m9pehXse/weborder\", this.$store.state.auth.apiHeader\n\n        );\n      } catch (error) {\n        // // this.noticeError(error);\n        return null;\n\n      }\n\n      return await response.data;\n    },\n\n    async loadAllOrderShare() {\n      var response = null;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/orderheader\", this.$store.state.auth.apiHeader\n\n\n        );\n      } catch (error) {\n        // this.noticeError(error);\n        return null;\n\n      }\n\n      return await response.data;\n    },\n    async loadAllDetailShare() {\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/orderdetail\",\n          store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n      }\n\n      return await response.data;\n    },\n    async loadDetailShare(orderId) {\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/orderdetail/\" + orderId,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n      }\n\n      return await response.data;\n    },\n\n    async loadBranchShare(id) {\n      var response = null;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/branch/\" + id,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n        return null;\n      }\n\n      return await response.data;\n    },\n\n    async loadBranchOrderShare(branchId) {\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/orderheader/branch/\" + branchId,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n      }\n\n      return await response.data;\n    },\n    async loadOrderByBranchShared(branchlist) {\n      var response;\n      try {\n        response = await axios.post(\n          store.state.apiURL + \"/api/orderheader/bybranches\" ,\n          branchlist,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.\n        // this.noticeError(error);\n      }\n\n      return await response.data;\n    },\n    async loadOrderByBranchObjectShared(aBranch) {\n      var response;\n      var arr = [];\n      // แปลงเป็น array ก่อน\n      arr.push(aBranch);\n      try {\n        response = await axios.post(\n          store.state.apiURL + \"/api/orderheader/bybranches\" ,\n          arr,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.\n        // this.noticeError(error);\n      }\n\n      return await response.data;\n    },\n  //   validateEmail(email) {\n  //     const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  //     return re.test(String(email).toLowerCase());\n  //  },\n    async loadBranchOrderPickupdateSortShare(branchId) {\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/orderheader/branch/pickupdate-sort/\" + branchId,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n      }\n\n      return await response.data;\n    },\n    async getBranchByCode(code) {\n\n      var br = await this.loadAllBranchShare();\n      var aBranch = null;\n\n      if (br === null || br === undefined || br.length === 0) {\n        aBranch = await br.find(x => x.code === \"0\");\n      } else {\n        aBranch = await br.find(x => x.code === code);\n\n      }\n\n      return aBranch;\n\n    },\n\n    async getBranchShare(id) {\n\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/branch/\" + id,\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n        return null;\n      }\n\n      return await response.data;\n\n\n    },\n\n    async getAllBranch() {\n\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/branch\",\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n        Swal.fire({\n          icon: 'error',\n          title: 'มียางอย่างผิดพลาด',\n          // text: 'Something went wrong!',\n        });\n        return null;\n      }\n\n      return await response.data;\n\n\n    },\n    getImage(shopId, imagePath){\n      var url = \"\";\n      if(imagePath === null || imagePath === undefined || imagePath === \"\"){\n        url = this.$store.state.common.imageUrl + \"/\" + shopId + \"/\" + \"default_shop.png\"\n      }else{\n        url = this.$store.state.common.imageUrl + \"/\" + shopId + \"/\" + imagePath ;\n      }\n      return url\n\t},\n\n    getImagepath(mainImage) {\n      if (\n        mainImage === undefined ||\n        mainImage === null ||\n        mainImage === \"\" ||\n        mainImage === this.$store.state.imageStore\n      ) {\n        return this.$store.state.defaultImage;\n      } else {\n        if (mainImage.startsWith(\"https://\"))\n          return mainImage;\n        else\n          return this.$store.state.imageStore + mainImage;\n      }\n    },\n\n    getFullPath(mainImage) {\n      if (mainImage === undefined || mainImage === null || mainImage === \"\") {\n\n        return store.state.imageStore + \"defaultimage.png\";\n      } else {\n        return store.state.imageStore + mainImage;\n      }\n    },\n    baseImagePath(mainImage) {\n      if (mainImage === undefined || mainImage === null || mainImage === \"\") {\n\n        return store.state.imageStore + \"defaultimage.png\";\n      } else {\n        return store.state.baseImageStore + mainImage;\n      }\n    },\n    getWebPath(mainImage) {\n      if (mainImage === undefined || mainImage === null || mainImage === \"\") {\n\n        return store.state.imageStore + \"defaultimage.png\";\n      } else {\n        return store.state.webImage + mainImage;\n      }\n    },\n\n    async loadAllBranchShare() {\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/branch\",\n          this.$store.state.auth.apiHeader\n        );\n      } catch (error) {\n        // this.noticeError(error);\n        return null;\n      }\n\n      return await response.data;\n    },\n\n    //*** 2021-03-09 : BEGIN For ABB RECEIPT\n\n    calculateScoreForAbbReceipt(shopLineScore, recordScore) {\n  //   คำอธิบาย 3 บรรทัด ตีเป็น 1 record\n  //   เฉลิี่ยจะมี 6 บรรทัด หรือ 2 record สำหรับ ข้อตกลงการเช่าชุด\n\n  //   ----------------------------------------------------------------------------------------\n  // 1 Record ความสูง 64px หรือประมาณ 16.93333\n  // 1 px ~ 0.2645833333 mm\n  // 1 Records ประมาณ 16.9333333312 mm\n  // 5 Records ประมาณ 85 mm\n\n  //  1. up to 3 records (1 record + 6 lines) 300mm / 310mm (html / pagesize)\n  //  2. up to 4 - 5 records (2 records + 3 records)  320mm / 330mm (html / pagesize)\n  //  3. up to 6 - 7 records (2 records + 5 records)  350mm / 360mm  (html / pagesize)\n  //  4. up to 8 - 12 records  450mm / 460mm (html / pagesize)\n  //  5. up to 13 - 17 records  550mm / 560mm (html / pagesize)\n  //  6. up to 18 - 22 records  650mm / 660mm (html / pagesize)\n  //  7. up to 23 - 27 records  750mm / 760mm (html / pagesize)\n\n\n\n      var total = shopLineScore + recordScore;\n\n      // console.log('total score >>> ', total);\n\n      if (total <= 3) {\n        return 1;\n      } else if (total >= 4 && total <= 5) {\n        return 2\n      } else if (total >= 6 && total <= 8) {\n        return 3\n      } else if (total >= 9 && total <= 12) {\n        return 4\n      } else if (total >= 13 && total <= 17) {\n        return 5\n      } else if (total >= 14 && total <= 22) {\n        return 6\n      } else if (total >= 23 && total <= 27) {\n        return 7\n      }\n\n\n      // if (total <= 3) {\n      //   return 1;\n      // } else if (total >= 4 && total <= 5) {\n      //   return 2\n      // } else if (total >= 6 && total <= 7) {\n      //   return 3\n      // } else if (total >= 8 && total <= 12) {\n      //   return 4\n      // } else if (total >= 13 && total <= 17) {\n      //   return 5\n      // } else if (total >= 18 && total <= 22) {\n      //   return 6\n      // } else if (total >= 23 && total <= 27) {\n      //   return 7\n      // }\n    },\n\n    //*** 2021-03-09 : END For ABB RECEIPT\n\n    async getShopInfo() {\n      var response;\n      try {\n        response = await axios.get(\n          store.state.apiURL + \"/api/shopinfo\",\n          this.$store.state.auth.apiHeader\n        );\n      } catch (err) {\n        // this.noticeError(error);\n        Swal.fire({\n          icon: 'error',\n          title: 'มียางอย่างผิดพลาด',\n          // text: 'Something went wrong!',\n        });\n        return null;\n      }\n\n      return await response.data;\n    },\n    onCopy() {\n            this.$vs.notify({\n                title: 'Success',\n                text: 'Text copied successfully',\n                color: 'success',\n                iconPack: 'feather',\n                position: 'top-center',\n                icon: 'icon-check-circle'\n            })\n        },\n        onError() {\n            this.$vs.notify({\n                title: 'Failed',\n                text: 'Error in copying text',\n                color: 'danger',\n                iconPack: 'feather',\n                position: 'top-center',\n                icon: 'icon-alert-circle'\n            })\n        },\n\n    noticeSuccess(text) {\n      this.$vs.notify({\n        title: \"ดำเนินการสำเร็จ\",\n        position: \"top-center\",\n        text: text,\n        iconPack: \"feather\",\n        icon: \"icon-alert-circle\",\n        color: \"success\"\n      });\n    },\n    noticeError(text) {\n      this.$vs.notify({\n        title: \"เกิดข้อผิดพลาด\",\n        position: \"top-center\",\n        text: text,\n        iconPack: \"feather\",\n        icon: \"icon-alert-circle\",\n        color: \"danger\"\n      });\n    },\n    noticeWarning(title, text) {\n      this.$vs.notify({\n        title: title,\n        position: \"top-center\",\n        text: text,\n        iconPack: \"feather\",\n        icon: \"icon-alert-circle\",\n        color: \"warning\"\n      });\n    },\n    noticeInfo(text) {\n      this.$vs.notify({\n        title: \"เกิดข้อผิดพลาด\",\n        position: \"top-center\",\n        text: text,\n        iconPack: \"feather\",\n        icon: \"icon-alert-circle\",\n        color: \"info\"\n      });\n    },\n\n    formatDate(date) {\n      var d = new Date(date),\n        month = '' + (d.getMonth() + 1),\n        day = '' + d.getDate(),\n        year = d.getFullYear();\n\n      if (month.length < 2) month = '0' + month;\n      if (day.length < 2) day = '0' + day;\n\n      return [year, month, day].join('-');\n    },\n\n    format_ddmmyyy(date) {\n      var d = new Date(date),\n        month = '' + (d.getMonth() + 1),\n        day = '' + d.getDate(),\n        year = d.getFullYear();\n\n      if (month.length < 2) month = '0' + month;\n      if (day.length < 2) day = '0' + day;\n\n      return [ day, month ,  year].join('/');\n    },\n\n    formatAlphabet(date) {\n      var d = new Date(date),\n        month_ind = d.getMonth() ,\n        day =  d.getDate(),\n        year = d.getFullYear();\n\n      var month_arr = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sept\", \"Oct\", \"Nov\", \"Dec\"];\n\n      var month_str = month_arr[month_ind];\n\n      // if (month.length < 2) month = '0' + month;\n      // if (day.length < 2) day = '0' + day;\n\n      return [ day, month_str ,  year].join(' ');\n    },\n\n    formatThai(date) {\n      var d = new Date(date),\n        month_ind = d.getMonth() ,\n        day =  d.getDate(),\n        year = d.getFullYear();\n\n      var month_arr = [\"มกราคม\", \"กุมภาพันธ์\", \"มีนาคม\", \"เมษายน\", \"พฤษภาคม\", \"มิถุนายน\", \"กรกฎาคม\", \"สิงหาคม\", \"กันยายน\", \"ตุลาคม\", \"พฤศจิกายน\", \"ธันวาคม\"];\n\n      var month_str = month_arr[month_ind];\n\n      // if (month.length < 2) month = '0' + month;\n      // if (day.length < 2) day = '0' + day;\n\n      return [ day, month_str ,  year].join(' ');\n    },\n\n    formatAMPM(date_str) {\n\n      \n      if (typeof (date_str) === \"string\")\n      {\n        var spl = date_str.split(' ');\n        if (spl.length < 2) {\n          return \"\";\n        }\n      }\n\n      var date = new Date(date_str);\n      var hours = date.getHours();\n\n      \n\n      // console.log(\"AMPM in hours >>>> \",typeof(date));\n\n      var minutes = date.getMinutes();\n      var ampm = hours >= 12 ? 'pm' : 'am';\n      hours = hours % 12;\n      hours = hours ? hours : 12; // the hour '0' should be '12'\n      minutes = minutes < 10 ? '0'+minutes : minutes;\n      var strTime = hours + ':' + minutes + ' ' + ampm;\n      return strTime;\n    },\n\n\n    formatDateLocal(date) {\n      return this.formatDate(date) + \"T00:00:00.000Z\";\n    },\n    formatPrice(value) {\n      // var number = +value.replace(/[^\\d.]/g, \"\");\n      value = this.convertToNum(value);\n      var amount = isNaN(value) ? 0 : value;\n\n      return amount.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\n    },\n\n    formatPrice2Point(value) {\n      let val = (value / 1).toFixed(2).replace(\",\", \".\");\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    },\n    convertToNum(value) {\n      if (typeof value === 'string') {\n\n        value = Number(value.replace(\",\", \"\"));\n      }\n      if (isNaN(value)) {\n        value = 0;\n      }\n      return value;\n    },\n    numberFormat(value) {\n      if (isNaN(Number(value))) return 0;\n      return Number(value);\n    },\n    formatNumber(value) {\n      if (isNaN(Number(value))) return 0;\n      return Number(value);\n    },\n    // Returns if value is a date object\n    isDate(value) {\n      return value instanceof Date;\n    },\n    \n  }\n}\n"]}]}