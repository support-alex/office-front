{"remainingRequest":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/babel-loader/lib/index.js!/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/eslint-loader/index.js??ref--13-0!/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/src/assets/js/components/menu.js","dependencies":[{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/src/assets/js/components/menu.js","mtime":1626379736000},{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgS1RVdGlsIGZyb20gIi4vdXRpbCI7IC8vIENvbXBvbmVudCBEZWZpbml0aW9uCgp2YXIgS1RNZW51ID0gZnVuY3Rpb24gS1RNZW51KGVsZW1lbnRJZCwgb3B0aW9ucykgewogIC8vIE1haW4gb2JqZWN0CiAgdmFyIHRoZSA9IHRoaXM7CiAgdmFyIGluaXQgPSBmYWxzZTsgLy8gR2V0IGVsZW1lbnQgb2JqZWN0CgogIHZhciBlbGVtZW50ID0gS1RVdGlsLmdldEJ5SWQoZWxlbWVudElkKTsKICB2YXIgYm9keSA9IEtUVXRpbC5nZXRCb2R5KCk7CgogIGlmICghZWxlbWVudCkgewogICAgcmV0dXJuOwogIH0gLy8gRGVmYXVsdCBvcHRpb25zCgoKICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAvLyBzY3JvbGxhYmxlIGFyZWEgd2l0aCBQZXJmZWN0IFNjcm9sbAogICAgc2Nyb2xsOiB7CiAgICAgIHJlbWVtYmVyUG9zaXRpb246IGZhbHNlCiAgICB9LAogICAgLy8gYWNjb3JkaW9uIHN1Ym1lbnUgbW9kZQogICAgYWNjb3JkaW9uOiB7CiAgICAgIHNsaWRlU3BlZWQ6IDIwMCwKICAgICAgLy8gYWNjb3JkaW9uIHRvZ2dsZSBzbGlkZSBzcGVlZCBpbiBtaWxsaXNlY29uZHMKICAgICAgYXV0b1Njcm9sbDogZmFsc2UsCiAgICAgIC8vIGVuYWJsZSBhdXRvIHNjcm9sbGluZyhmb2N1cykgdG8gdGhlIGNsaWNrZWQgbWVudSBpdGVtCiAgICAgIGF1dG9TY3JvbGxTcGVlZDogMTIwMCwKICAgICAgZXhwYW5kQWxsOiB0cnVlIC8vIGFsbG93IGhhdmluZyBtdWx0aXBsZSBleHBhbmRlZCBhY2NvcmRpb25zIGluIHRoZSBtZW51CgogICAgfSwKICAgIC8vIGRyb3Bkb3duIHN1Ym1lbnUgbW9kZQogICAgZHJvcGRvd246IHsKICAgICAgdGltZW91dDogNTAwIC8vIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIHNob3cgYW5kIGhpZGUgdGhlIGhvdmVyYWJsZSBzdWJtZW51IGRyb3Bkb3duCgogICAgfQogIH07IC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyAqKiBQcml2YXRlIE1ldGhvZHMgICoqIC8vCiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICB2YXIgUGx1Z2luID0gewogICAgLyoqDQogICAgICogUnVuIHBsdWdpbg0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIGNvbnN0cnVjdChvcHRpb25zKSB7CiAgICAgIGlmIChLVFV0aWwuZGF0YShlbGVtZW50KS5oYXMoJ21lbnUnKSkgewogICAgICAgIHRoZSA9IEtUVXRpbC5kYXRhKGVsZW1lbnQpLmdldCgnbWVudScpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHJlc2V0IG1lbnUKICAgICAgICBQbHVnaW4uaW5pdChvcHRpb25zKTsgLy8gcmVzZXQgbWVudQoKICAgICAgICBQbHVnaW4ucmVzZXQoKTsgLy8gYnVpbGQgbWVudQoKICAgICAgICBQbHVnaW4uYnVpbGQoKTsKICAgICAgICBLVFV0aWwuZGF0YShlbGVtZW50KS5zZXQoJ21lbnUnLCB0aGUpOwogICAgICB9CgogICAgICByZXR1cm4gdGhlOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBIYW5kbGVzIHN1Ym1lbnUgY2xpY2sgdG9nZ2xlDQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQob3B0aW9ucykgewogICAgICB0aGUuZXZlbnRzID0gW107CiAgICAgIHRoZS5ldmVudEhhbmRsZXJzID0ge307IC8vIG1lcmdlIGRlZmF1bHQgYW5kIHVzZXIgZGVmaW5lZCBvcHRpb25zCgogICAgICB0aGUub3B0aW9ucyA9IEtUVXRpbC5kZWVwRXh0ZW5kKHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7IC8vIHBhdXNlIG1lbnUKCiAgICAgIHRoZS5wYXVzZURyb3Bkb3duSG92ZXJUaW1lID0gMDsKICAgICAgdGhlLnVpZCA9IEtUVXRpbC5nZXRVbmlxdWVJRCgpOwogICAgfSwKICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9wdGlvbnMpIHsKICAgICAgLy8gbWVyZ2UgZGVmYXVsdCBhbmQgdXNlciBkZWZpbmVkIG9wdGlvbnMKICAgICAgdGhlLm9wdGlvbnMgPSBLVFV0aWwuZGVlcEV4dGVuZCh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpOyAvLyBwYXVzZSBtZW51CgogICAgICB0aGUucGF1c2VEcm9wZG93bkhvdmVyVGltZSA9IDA7IC8vIHJlc2V0IG1lbnUKCiAgICAgIFBsdWdpbi5yZXNldCgpOwogICAgICB0aGUuZXZlbnRIYW5kbGVycyA9IHt9OyAvLyBidWlsZCBtZW51CgogICAgICBQbHVnaW4uYnVpbGQoKTsKICAgICAgS1RVdGlsLmRhdGEoZWxlbWVudCkuc2V0KCdtZW51JywgdGhlKTsKICAgIH0sCiAgICByZWxvYWQ6IGZ1bmN0aW9uIHJlbG9hZCgpIHsKICAgICAgLy8gcmVzZXQgbWVudQogICAgICBQbHVnaW4ucmVzZXQoKTsgLy8gYnVpbGQgbWVudQoKICAgICAgUGx1Z2luLmJ1aWxkKCk7IC8vIHJlc2V0IHN1Ym1lbnUgcHJvcHMKCiAgICAgIFBsdWdpbi5yZXNldFN1Ym1lbnVQcm9wcygpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBSZXNldCBtZW51DQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIGJ1aWxkOiBmdW5jdGlvbiBidWlsZCgpIHsKICAgICAgLy8gR2VuZXJhbCBhY2NvcmRpb24gc3VibWVudSB0b2dnbGUKICAgICAgdGhlLmV2ZW50SGFuZGxlcnNbJ2V2ZW50XzEnXSA9IEtUVXRpbC5vbihlbGVtZW50LCAnLm1lbnUtdG9nZ2xlJywgJ2NsaWNrJywgUGx1Z2luLmhhbmRsZVN1Ym1lbnVBY2NvcmRpb24pOyAvLyBEcm9wZG93biBtb2RlKGhvdmVyYWJsZSkKCiAgICAgIGlmIChQbHVnaW4uZ2V0U3VibWVudU1vZGUoKSA9PT0gJ2Ryb3Bkb3duJyB8fCBQbHVnaW4uaXNDb25kaXRpb25hbFN1Ym1lbnVEcm9wZG93bigpKSB7CiAgICAgICAgLy8gZHJvcGRvd24gc3VibWVudSAtIGhvdmVyIHRvZ2dsZQogICAgICAgIHRoZS5ldmVudEhhbmRsZXJzWydldmVudF8yJ10gPSBLVFV0aWwub24oZWxlbWVudCwgJ1tkYXRhLW1lbnUtdG9nZ2xlPSJob3ZlciJdJywgJ21vdXNlb3ZlcicsIFBsdWdpbi5oYW5kbGVTdWJtZW51RHJvZG93bkhvdmVyRW50ZXIpOwogICAgICAgIHRoZS5ldmVudEhhbmRsZXJzWydldmVudF8zJ10gPSBLVFV0aWwub24oZWxlbWVudCwgJ1tkYXRhLW1lbnUtdG9nZ2xlPSJob3ZlciJdJywgJ21vdXNlb3V0JywgUGx1Z2luLmhhbmRsZVN1Ym1lbnVEcm9kb3duSG92ZXJFeGl0KTsgLy8gZHJvcGRvd24gc3VibWVudSAtIGNsaWNrIHRvZ2dsZQoKICAgICAgICB0aGUuZXZlbnRIYW5kbGVyc1snZXZlbnRfNCddID0gS1RVdGlsLm9uKGVsZW1lbnQsICdbZGF0YS1tZW51LXRvZ2dsZT0iY2xpY2siXSA+IC5tZW51LXRvZ2dsZSwgW2RhdGEtbWVudS10b2dnbGU9ImNsaWNrIl0gPiAubWVudS1saW5rIC5tZW51LXRvZ2dsZScsICdjbGljaycsIFBsdWdpbi5oYW5kbGVTdWJtZW51RHJvcGRvd25DbGljayk7CiAgICAgICAgdGhlLmV2ZW50SGFuZGxlcnNbJ2V2ZW50XzUnXSA9IEtUVXRpbC5vbihlbGVtZW50LCAnW2RhdGEtbWVudS10b2dnbGU9InRhYiJdID4gLm1lbnUtdG9nZ2xlLCBbZGF0YS1tZW51LXRvZ2dsZT0idGFiIl0gPiAubWVudS1saW5rIC5tZW51LXRvZ2dsZScsICdjbGljaycsIFBsdWdpbi5oYW5kbGVTdWJtZW51RHJvcGRvd25UYWJDbGljayk7CiAgICAgIH0gLy8gSGFuZGxlIGdlbmVyYWwgbGluayBjbGljawoKCiAgICAgIHRoZS5ldmVudEhhbmRsZXJzWydldmVudF82J10gPSBLVFV0aWwub24oZWxlbWVudCwgJy5tZW51LWl0ZW0gPiAubWVudS1saW5rOm5vdCgubWVudS10b2dnbGUpOm5vdCgubWVudS1saW5rLXRvZ2dsZS1za2lwKScsICdjbGljaycsIFBsdWdpbi5oYW5kbGVMaW5rQ2xpY2spOyAvLyBJbml0IHNjcm9sbGFibGUgbWVudQoKICAgICAgaWYgKHRoZS5vcHRpb25zLnNjcm9sbCAmJiB0aGUub3B0aW9ucy5zY3JvbGwuaGVpZ2h0KSB7CiAgICAgICAgUGx1Z2luLnNjcm9sbEluaXQoKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBSZXNldCBtZW51DQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgS1RVdGlsLm9mZihlbGVtZW50LCAnY2xpY2snLCB0aGUuZXZlbnRIYW5kbGVyc1snZXZlbnRfMSddKTsgLy8gZHJvcGRvd24gc3VibWVudSAtIGhvdmVyIHRvZ2dsZQoKICAgICAgS1RVdGlsLm9mZihlbGVtZW50LCAnbW91c2VvdmVyJywgdGhlLmV2ZW50SGFuZGxlcnNbJ2V2ZW50XzInXSk7CiAgICAgIEtUVXRpbC5vZmYoZWxlbWVudCwgJ21vdXNlb3V0JywgdGhlLmV2ZW50SGFuZGxlcnNbJ2V2ZW50XzMnXSk7IC8vIGRyb3Bkb3duIHN1Ym1lbnUgLSBjbGljayB0b2dnbGUKCiAgICAgIEtUVXRpbC5vZmYoZWxlbWVudCwgJ2NsaWNrJywgdGhlLmV2ZW50SGFuZGxlcnNbJ2V2ZW50XzQnXSk7CiAgICAgIEtUVXRpbC5vZmYoZWxlbWVudCwgJ2NsaWNrJywgdGhlLmV2ZW50SGFuZGxlcnNbJ2V2ZW50XzUnXSk7IC8vIGhhbmRsZSBsaW5rIGNsaWNrCgogICAgICBLVFV0aWwub2ZmKGVsZW1lbnQsICdjbGljaycsIHRoZS5ldmVudEhhbmRsZXJzWydldmVudF82J10pOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBJbml0IHNjcm9sbCBtZW51DQogICAgICoNCiAgICAqLwogICAgc2Nyb2xsSW5pdDogZnVuY3Rpb24gc2Nyb2xsSW5pdCgpIHsKICAgICAgaWYgKHRoZS5vcHRpb25zLnNjcm9sbCAmJiB0aGUub3B0aW9ucy5zY3JvbGwuaGVpZ2h0KSB7CiAgICAgICAgS1RVdGlsLnNjcm9sbERlc3Ryb3koZWxlbWVudCwgdHJ1ZSk7CiAgICAgICAgS1RVdGlsLnNjcm9sbEluaXQoZWxlbWVudCwgewogICAgICAgICAgbW9iaWxlTmF0aXZlU2Nyb2xsOiB0cnVlLAogICAgICAgICAgd2luZG93U2Nyb2xsOiBmYWxzZSwKICAgICAgICAgIHJlc2V0SGVpZ2h0T25EZXN0cm95OiB0cnVlLAogICAgICAgICAgaGFuZGxlV2luZG93UmVzaXplOiB0cnVlLAogICAgICAgICAgaGVpZ2h0OiB0aGUub3B0aW9ucy5zY3JvbGwuaGVpZ2h0LAogICAgICAgICAgcmVtZW1iZXJQb3NpdGlvbjogdGhlLm9wdGlvbnMuc2Nyb2xsLnJlbWVtYmVyUG9zaXRpb24KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBLVFV0aWwuc2Nyb2xsRGVzdHJveShlbGVtZW50LCB0cnVlKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBVcGRhdGUgc2Nyb2xsIG1lbnUNCiAgICAqLwogICAgc2Nyb2xsVXBkYXRlOiBmdW5jdGlvbiBzY3JvbGxVcGRhdGUoKSB7CiAgICAgIGlmICh0aGUub3B0aW9ucy5zY3JvbGwgJiYgdGhlLm9wdGlvbnMuc2Nyb2xsLmhlaWdodCkgewogICAgICAgIEtUVXRpbC5zY3JvbGxVcGRhdGUoZWxlbWVudCk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogU2Nyb2xsIHRvcA0KICAgICovCiAgICBzY3JvbGxUb3A6IGZ1bmN0aW9uIHNjcm9sbFRvcCgpIHsKICAgICAgaWYgKHRoZS5vcHRpb25zLnNjcm9sbCAmJiB0aGUub3B0aW9ucy5zY3JvbGwuaGVpZ2h0KSB7CiAgICAgICAgS1RVdGlsLnNjcm9sbFRvcChlbGVtZW50KTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBHZXQgc3VibWVudSBtb2RlIGZvciBjdXJyZW50IGJyZWFrcG9pbnQgYW5kIG1lbnUgc3RhdGUNCiAgICAgKiBAcmV0dXJucyB7S1RNZW51fQ0KICAgICAqLwogICAgZ2V0U3VibWVudU1vZGU6IGZ1bmN0aW9uIGdldFN1Ym1lbnVNb2RlKGVsKSB7CiAgICAgIGlmIChLVFV0aWwuaXNCcmVha3BvaW50VXAoJ2xnJykpIHsKICAgICAgICBpZiAoZWwgJiYgS1RVdGlsLmhhc0F0dHIoZWwsICdkYXRhLW1lbnUtdG9nZ2xlJykgJiYgS1RVdGlsLmF0dHIoZWwsICdkYXRhLW1lbnUtdG9nZ2xlJykgPT0gJ2hvdmVyJykgewogICAgICAgICAgcmV0dXJuICdkcm9wZG93bic7CiAgICAgICAgfQoKICAgICAgICBpZiAoS1RVdGlsLmlzc2V0KHRoZS5vcHRpb25zLnN1Ym1lbnUsICdkZXNrdG9wLnN0YXRlLmJvZHknKSkgewogICAgICAgICAgaWYgKEtUVXRpbC5oYXNDbGFzc2VzKGJvZHksIHRoZS5vcHRpb25zLnN1Ym1lbnUuZGVza3RvcC5zdGF0ZS5ib2R5KSkgewogICAgICAgICAgICByZXR1cm4gdGhlLm9wdGlvbnMuc3VibWVudS5kZXNrdG9wLnN0YXRlLm1vZGU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhlLm9wdGlvbnMuc3VibWVudS5kZXNrdG9wLmRlZmF1bHQ7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChLVFV0aWwuaXNzZXQodGhlLm9wdGlvbnMuc3VibWVudSwgJ2Rlc2t0b3AnKSkgewogICAgICAgICAgcmV0dXJuIHRoZS5vcHRpb25zLnN1Ym1lbnUuZGVza3RvcDsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoS1RVdGlsLmlzQnJlYWtwb2ludFVwKCdtZCcpICYmIEtUVXRpbC5pc0JyZWFrcG9pbnREb3duKCdsZycpICYmIEtUVXRpbC5pc3NldCh0aGUub3B0aW9ucy5zdWJtZW51LCAndGFibGV0JykpIHsKICAgICAgICByZXR1cm4gdGhlLm9wdGlvbnMuc3VibWVudS50YWJsZXQ7CiAgICAgIH0gZWxzZSBpZiAoS1RVdGlsLmlzQnJlYWtwb2ludERvd24oJ21kJykgJiYgS1RVdGlsLmlzc2V0KHRoZS5vcHRpb25zLnN1Ym1lbnUsICdtb2JpbGUnKSkgewogICAgICAgIHJldHVybiB0aGUub3B0aW9ucy5zdWJtZW51Lm1vYmlsZTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogR2V0IHN1Ym1lbnUgbW9kZSBmb3IgY3VycmVudCBicmVha3BvaW50IGFuZCBtZW51IHN0YXRlDQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIGlzQ29uZGl0aW9uYWxTdWJtZW51RHJvcGRvd246IGZ1bmN0aW9uIGlzQ29uZGl0aW9uYWxTdWJtZW51RHJvcGRvd24oKSB7CiAgICAgIGlmIChLVFV0aWwuaXNCcmVha3BvaW50VXAoJ2xnJykgJiYgS1RVdGlsLmlzc2V0KHRoZS5vcHRpb25zLnN1Ym1lbnUsICdkZXNrdG9wLnN0YXRlLmJvZHknKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBSZXNldCBzdWJtZW51IGF0dHJpYnV0ZXMNCiAgICAgKiBAcmV0dXJucyB7S1RNZW51fQ0KICAgICAqLwogICAgcmVzZXRTdWJtZW51UHJvcHM6IGZ1bmN0aW9uIHJlc2V0U3VibWVudVByb3BzKGUpIHsKICAgICAgdmFyIHN1Ym1lbnVzID0gS1RVdGlsLmZpbmRBbGwoZWxlbWVudCwgJy5tZW51LXN1Ym1lbnUnKTsKCiAgICAgIGlmIChzdWJtZW51cykgewogICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzdWJtZW51cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgdmFyIHN1Ym1lbnUgPSBzdWJtZW51c1swXTsKICAgICAgICAgIEtUVXRpbC5jc3Moc3VibWVudSwgJ2Rpc3BsYXknLCAnJyk7CiAgICAgICAgICBLVFV0aWwuY3NzKHN1Ym1lbnUsICdvdmVyZmxvdycsICcnKTsKCiAgICAgICAgICBpZiAoc3VibWVudS5oYXNBdHRyaWJ1dGUoJ2RhdGEtaG9yLWRpcmVjdGlvbicpKSB7CiAgICAgICAgICAgIEtUVXRpbC5yZW1vdmVDbGFzcyhzdWJtZW51LCAnbWVudS1zdWJtZW51LWxlZnQnKTsKICAgICAgICAgICAgS1RVdGlsLnJlbW92ZUNsYXNzKHN1Ym1lbnUsICdtZW51LXN1Ym1lbnUtcmlnaHQnKTsKICAgICAgICAgICAgS1RVdGlsLmFkZENsYXNzKHN1Ym1lbnUsIHN1Ym1lbnUuZ2V0QXR0cmlidXRlKCdkYXRhLWhvci1kaXJlY3Rpb24nKSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEhhbmRsZXMgc3VibWVudSBob3ZlciB0b2dnbGUNCiAgICAgKiBAcmV0dXJucyB7S1RNZW51fQ0KICAgICAqLwogICAgaGFuZGxlU3VibWVudURyb2Rvd25Ib3ZlckVudGVyOiBmdW5jdGlvbiBoYW5kbGVTdWJtZW51RHJvZG93bkhvdmVyRW50ZXIoZSkgewogICAgICBpZiAoUGx1Z2luLmdldFN1Ym1lbnVNb2RlKHRoaXMpID09PSAnYWNjb3JkaW9uJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoZS5yZXN1bWVEcm9wZG93bkhvdmVyKCkgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgaXRlbSA9IHRoaXM7CgogICAgICBpZiAoaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaG92ZXInKSA9PSAnMScpIHsKICAgICAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1ob3ZlcicpOwogICAgICAgIGNsZWFyVGltZW91dChpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS10aW1lb3V0JykpOwogICAgICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXRpbWVvdXQnKTsKICAgICAgfQoKICAgICAgUGx1Z2luLnNob3dTdWJtZW51RHJvcGRvd24oaXRlbSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEhhbmRsZXMgc3VibWVudSBob3ZlciB0b2dnbGUNCiAgICAgKiBAcmV0dXJucyB7S1RNZW51fQ0KICAgICAqLwogICAgaGFuZGxlU3VibWVudURyb2Rvd25Ib3ZlckV4aXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1lbnVEcm9kb3duSG92ZXJFeGl0KGUpIHsKICAgICAgaWYgKHRoZS5yZXN1bWVEcm9wZG93bkhvdmVyKCkgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoUGx1Z2luLmdldFN1Ym1lbnVNb2RlKHRoaXMpID09PSAnYWNjb3JkaW9uJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGl0ZW0gPSB0aGlzOwogICAgICB2YXIgdGltZSA9IHRoZS5vcHRpb25zLmRyb3Bkb3duLnRpbWVvdXQ7CiAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWhvdmVyJykgPT0gJzEnKSB7CiAgICAgICAgICBQbHVnaW4uaGlkZVN1Ym1lbnVEcm9wZG93bihpdGVtLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0sIHRpbWUpOwogICAgICBpdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1ob3ZlcicsICcxJyk7CiAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLXRpbWVvdXQnLCB0aW1lb3V0KTsKICAgIH0sCgogICAgLyoqDQogICAgICogSGFuZGxlcyBzdWJtZW51IGNsaWNrIHRvZ2dsZQ0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBoYW5kbGVTdWJtZW51RHJvcGRvd25DbGljazogZnVuY3Rpb24gaGFuZGxlU3VibWVudURyb3Bkb3duQ2xpY2soZSkgewogICAgICBpZiAoUGx1Z2luLmdldFN1Ym1lbnVNb2RlKHRoaXMpID09PSAnYWNjb3JkaW9uJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGl0ZW0gPSB0aGlzLmNsb3Nlc3QoJy5tZW51LWl0ZW0nKTsgLy8gVHJpZ2dlciBjbGljayBldmVudCBoYW5kbGVycwoKICAgICAgdmFyIHJlc3VsdCA9IFBsdWdpbi5ldmVudFRyaWdnZXIoJ3N1Ym1lbnVUb2dnbGUnLCB0aGlzLCBlKTsKCiAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWVudS1zdWJtZW51LW1vZGUnKSA9PSAnYWNjb3JkaW9uJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKEtUVXRpbC5oYXNDbGFzcyhpdGVtLCAnbWVudS1pdGVtLWhvdmVyJykgPT09IGZhbHNlKSB7CiAgICAgICAgS1RVdGlsLmFkZENsYXNzKGl0ZW0sICdtZW51LWl0ZW0tb3Blbi1kcm9wZG93bicpOwogICAgICAgIFBsdWdpbi5zaG93U3VibWVudURyb3Bkb3duKGl0ZW0pOwogICAgICB9IGVsc2UgewogICAgICAgIEtUVXRpbC5yZW1vdmVDbGFzcyhpdGVtLCAnbWVudS1pdGVtLW9wZW4tZHJvcGRvd24nKTsKICAgICAgICBQbHVnaW4uaGlkZVN1Ym1lbnVEcm9wZG93bihpdGVtLCB0cnVlKTsKICAgICAgfQoKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBIYW5kbGVzIHRhYiBjbGljayB0b2dnbGUNCiAgICAgKiBAcmV0dXJucyB7S1RNZW51fQ0KICAgICAqLwogICAgaGFuZGxlU3VibWVudURyb3Bkb3duVGFiQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1lbnVEcm9wZG93blRhYkNsaWNrKGUpIHsKICAgICAgaWYgKFBsdWdpbi5nZXRTdWJtZW51TW9kZSh0aGlzKSA9PT0gJ2FjY29yZGlvbicpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpdGVtID0gdGhpcy5jbG9zZXN0KCcubWVudS1pdGVtJyk7IC8vIFRyaWdnZXIgY2xpY2sgZXZlbnQgaGFuZGxlcnMKCiAgICAgIHZhciByZXN1bHQgPSBQbHVnaW4uZXZlbnRUcmlnZ2VyKCdzdWJtZW51VG9nZ2xlJywgdGhpcywgZSk7CgogICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUtc3VibWVudS1tb2RlJykgPT0gJ2FjY29yZGlvbicpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChLVFV0aWwuaGFzQ2xhc3MoaXRlbSwgJ21lbnUtaXRlbS1ob3ZlcicpID09IGZhbHNlKSB7CiAgICAgICAgS1RVdGlsLmFkZENsYXNzKGl0ZW0sICdtZW51LWl0ZW0tb3Blbi1kcm9wZG93bicpOwogICAgICAgIFBsdWdpbi5zaG93U3VibWVudURyb3Bkb3duKGl0ZW0pOwogICAgICB9CgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEhhbmRsZXMgbGluayBjbGljaw0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBoYW5kbGVMaW5rQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUxpbmtDbGljayhlKSB7CiAgICAgIHZhciBzdWJtZW51ID0gdGhpcy5jbG9zZXN0KCcubWVudS1pdGVtLm1lbnUtaXRlbS1zdWJtZW51Jyk7IC8vIFRyaWdnZXIgY2xpY2sgZXZlbnQgaGFuZGxlcnMKCiAgICAgIHZhciByZXN1bHQgPSBQbHVnaW4uZXZlbnRUcmlnZ2VyKCdsaW5rQ2xpY2snLCB0aGlzLCBlKTsKCiAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoc3VibWVudSAmJiBQbHVnaW4uZ2V0U3VibWVudU1vZGUoc3VibWVudSkgPT09ICdkcm9wZG93bicpIHsKICAgICAgICBQbHVnaW4uaGlkZVN1Ym1lbnVEcm9wZG93bnMoKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBIYW5kbGVzIHN1Ym1lbnUgZHJvcGRvd24gY2xvc2Ugb24gbGluayBjbGljaw0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBoYW5kbGVTdWJtZW51RHJvcGRvd25DbG9zZTogZnVuY3Rpb24gaGFuZGxlU3VibWVudURyb3Bkb3duQ2xvc2UoZSwgZWwpIHsKICAgICAgLy8gZXhpdCBpZiBpdHMgbm90IHN1Ym1lbnUgZHJvcGRvd24gbW9kZQogICAgICBpZiAoUGx1Z2luLmdldFN1Ym1lbnVNb2RlKGVsKSA9PT0gJ2FjY29yZGlvbicpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzaG93biA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbS5tZW51LWl0ZW0tc3VibWVudS5tZW51LWl0ZW0taG92ZXI6bm90KC5tZW51LWl0ZW0tdGFicyknKTsgLy8gY2hlY2sgaWYgY3VycmVudGx5IGNsaWNrZWQgbGluaydzIHBhcmVudCBpdGVtIGhhCgogICAgICBpZiAoc2hvd24ubGVuZ3RoID4gMCAmJiBLVFV0aWwuaGFzQ2xhc3MoZWwsICdtZW51LXRvZ2dsZScpID09PSBmYWxzZSAmJiBlbC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS10b2dnbGUnKS5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBjbG9zZSBvcGVuZWQgZHJvcGRvd24gbWVudXMKICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2hvd24ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgIFBsdWdpbi5oaWRlU3VibWVudURyb3Bkb3duKHNob3duWzBdLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogaGVscGVyIGZ1bmN0aW9ucw0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBoYW5kbGVTdWJtZW51QWNjb3JkaW9uOiBmdW5jdGlvbiBoYW5kbGVTdWJtZW51QWNjb3JkaW9uKGUsIGVsKSB7CiAgICAgIHZhciBxdWVyeTsKICAgICAgdmFyIGl0ZW0gPSBlbCA/IGVsIDogdGhpczsgLy8gVHJpZ2dlciBjbGljayBldmVudCBoYW5kbGVycwoKICAgICAgdmFyIHJlc3VsdCA9IFBsdWdpbi5ldmVudFRyaWdnZXIoJ3N1Ym1lbnVUb2dnbGUnLCB0aGlzLCBlKTsKCiAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoUGx1Z2luLmdldFN1Ym1lbnVNb2RlKGVsKSA9PT0gJ2Ryb3Bkb3duJyAmJiAocXVlcnkgPSBpdGVtLmNsb3Nlc3QoJy5tZW51LWl0ZW0nKSkpIHsKICAgICAgICBpZiAocXVlcnkuZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUtc3VibWVudS1tb2RlJykgIT0gJ2FjY29yZGlvbicpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBsaSA9IGl0ZW0uY2xvc2VzdCgnLm1lbnUtaXRlbScpOwogICAgICB2YXIgc3VibWVudSA9IEtUVXRpbC5jaGlsZChsaSwgJy5tZW51LXN1Ym1lbnUsIC5tZW51LWlubmVyJyk7CgogICAgICBpZiAoS1RVdGlsLmhhc0NsYXNzKGl0ZW0uY2xvc2VzdCgnLm1lbnUtaXRlbScpLCAnbWVudS1pdGVtLW9wZW4tYWx3YXlzJykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChsaSAmJiBzdWJtZW51KSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHZhciBzcGVlZCA9IHRoZS5vcHRpb25zLmFjY29yZGlvbi5zbGlkZVNwZWVkOwogICAgICAgIHZhciBoYXNDbG9zYWJsZXMgPSBmYWxzZTsKCiAgICAgICAgaWYgKEtUVXRpbC5oYXNDbGFzcyhsaSwgJ21lbnUtaXRlbS1vcGVuJykgPT09IGZhbHNlKSB7CiAgICAgICAgICAvLyBoaWRlIG90aGVyIGFjY29yZGlvbnMKICAgICAgICAgIGlmICh0aGUub3B0aW9ucy5hY2NvcmRpb24uZXhwYW5kQWxsID09PSBmYWxzZSkgewogICAgICAgICAgICB2YXIgc3VibmF2ID0gaXRlbS5jbG9zZXN0KCcubWVudS1uYXYsIC5tZW51LXN1Ym5hdicpOwogICAgICAgICAgICB2YXIgY2xvc2FibGVzID0gS1RVdGlsLmNoaWxkcmVuKHN1Ym5hdiwgJy5tZW51LWl0ZW0ubWVudS1pdGVtLW9wZW4ubWVudS1pdGVtLXN1Ym1lbnU6bm90KC5tZW51LWl0ZW0taGVyZSk6bm90KC5tZW51LWl0ZW0tb3Blbi1hbHdheXMpJyk7CgogICAgICAgICAgICBpZiAoc3VibmF2ICYmIGNsb3NhYmxlcykgewogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjbG9zYWJsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIHZhciBlbF8gPSBjbG9zYWJsZXNbMF07CiAgICAgICAgICAgICAgICB2YXIgc3VibWVudV8gPSBLVFV0aWwuY2hpbGQoZWxfLCAnLm1lbnUtc3VibWVudScpOwoKICAgICAgICAgICAgICAgIGlmIChzdWJtZW51XykgewogICAgICAgICAgICAgICAgICBLVFV0aWwuc2xpZGVVcChzdWJtZW51Xywgc3BlZWQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBQbHVnaW4uc2Nyb2xsVXBkYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgS1RVdGlsLnJlbW92ZUNsYXNzKGVsXywgJ21lbnUtaXRlbS1vcGVuJyk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIEtUVXRpbC5zbGlkZURvd24oc3VibWVudSwgc3BlZWQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgUGx1Z2luLnNjcm9sbFRvSXRlbShpdGVtKTsKICAgICAgICAgICAgUGx1Z2luLnNjcm9sbFVwZGF0ZSgpOwogICAgICAgICAgICBQbHVnaW4uZXZlbnRUcmlnZ2VyKCdzdWJtZW51VG9nZ2xlJywgc3VibWVudSwgZSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIEtUVXRpbC5hZGRDbGFzcyhsaSwgJ21lbnUtaXRlbS1vcGVuJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEtUVXRpbC5zbGlkZVVwKHN1Ym1lbnUsIHNwZWVkLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIFBsdWdpbi5zY3JvbGxUb0l0ZW0oaXRlbSk7CiAgICAgICAgICAgIFBsdWdpbi5zY3JvbGxVcGRhdGUoKTsKICAgICAgICAgICAgUGx1Z2luLmV2ZW50VHJpZ2dlcignc3VibWVudVRvZ2dsZScsIHN1Ym1lbnUsIGUpOwogICAgICAgICAgfSk7CiAgICAgICAgICBLVFV0aWwucmVtb3ZlQ2xhc3MobGksICdtZW51LWl0ZW0tb3BlbicpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBzY3JvbGwgdG8gaXRlbSBmdW5jdGlvbg0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBzY3JvbGxUb0l0ZW06IGZ1bmN0aW9uIHNjcm9sbFRvSXRlbShpdGVtKSB7CiAgICAgIC8vIGhhbmRsZSBhdXRvIHNjcm9sbCBmb3IgYWNjb3JkaW9uIHN1Ym1lbnVzCiAgICAgIGlmIChLVFV0aWwuaXNCcmVha3BvaW50VXAoJ2xnJykgJiYgdGhlLm9wdGlvbnMuYWNjb3JkaW9uLmF1dG9TY3JvbGwgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWVudS1zY3JvbGwnKSAhPT0gJzEnKSB7CiAgICAgICAgS1RVdGlsLnNjcm9sbFRvKGl0ZW0sIHRoZS5vcHRpb25zLmFjY29yZGlvbi5hdXRvU2Nyb2xsU3BlZWQpOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEhpZGUgc3VibWVudSBkcm9wZG93bg0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBoaWRlU3VibWVudURyb3Bkb3duOiBmdW5jdGlvbiBoaWRlU3VibWVudURyb3Bkb3duKGl0ZW0sIGNsYXNzQWxzbykgewogICAgICAvLyByZW1vdmUgc3VibWVudSBhY3RpdmF0aW9uIGNsYXNzCiAgICAgIGlmIChjbGFzc0Fsc28pIHsKICAgICAgICBLVFV0aWwucmVtb3ZlQ2xhc3MoaXRlbSwgJ21lbnUtaXRlbS1ob3ZlcicpOwogICAgICAgIEtUVXRpbC5yZW1vdmVDbGFzcyhpdGVtLCAnbWVudS1pdGVtLWFjdGl2ZS10YWInKTsKICAgICAgfSAvLyBjbGVhciB0aW1lb3V0CgoKICAgICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaG92ZXInKTsKCiAgICAgIGlmIChpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW51LXRvZ2dsZS1jbGFzcycpKSB7CiAgICAgICAgS1RVdGlsLnJlbW92ZUNsYXNzKGJvZHksIGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUtdG9nZ2xlLWNsYXNzJykpOwogICAgICB9CgogICAgICB2YXIgdGltZW91dCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXRpbWVvdXQnKTsKICAgICAgaXRlbS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtdGltZW91dCcpOwogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEhpZGUgc3VibWVudSBkcm9wZG93bnMNCiAgICAgKiBAcmV0dXJucyB7S1RNZW51fQ0KICAgICAqLwogICAgaGlkZVN1Ym1lbnVEcm9wZG93bnM6IGZ1bmN0aW9uIGhpZGVTdWJtZW51RHJvcGRvd25zKCkgewogICAgICB2YXIgaXRlbXM7CgogICAgICBpZiAoaXRlbXMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0tc3VibWVudS5tZW51LWl0ZW0taG92ZXI6bm90KC5tZW51LWl0ZW0tdGFicyk6bm90KFtkYXRhLW1lbnUtdG9nZ2xlPSJ0YWIiXSknKSkgewogICAgICAgIGZvciAodmFyIGogPSAwLCBjbnQgPSBpdGVtcy5sZW5ndGg7IGogPCBjbnQ7IGorKykgewogICAgICAgICAgUGx1Z2luLmhpZGVTdWJtZW51RHJvcGRvd24oaXRlbXNbal0sIHRydWUpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBoZWxwZXIgZnVuY3Rpb25zDQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIHNob3dTdWJtZW51RHJvcGRvd246IGZ1bmN0aW9uIHNob3dTdWJtZW51RHJvcGRvd24oaXRlbSkgewogICAgICAvLyBjbG9zZSBhY3RpdmUgc3VibWVudXMKICAgICAgdmFyIGxpc3QgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0tc3VibWVudS5tZW51LWl0ZW0taG92ZXIsIC5tZW51LWl0ZW0tc3VibWVudS5tZW51LWl0ZW0tYWN0aXZlLXRhYicpOwoKICAgICAgaWYgKGxpc3QpIHsKICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgdmFyIGVsID0gbGlzdFtpXTsKCiAgICAgICAgICBpZiAoaXRlbSAhPT0gZWwgJiYgZWwuY29udGFpbnMoaXRlbSkgPT09IGZhbHNlICYmIGl0ZW0uY29udGFpbnMoZWwpID09PSBmYWxzZSkgewogICAgICAgICAgICBQbHVnaW4uaGlkZVN1Ym1lbnVEcm9wZG93bihlbCwgdHJ1ZSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIGFkZCBzdWJtZW51IGFjdGl2YXRpb24gY2xhc3MKCgogICAgICBLVFV0aWwuYWRkQ2xhc3MoaXRlbSwgJ21lbnUtaXRlbS1ob3ZlcicpOyAvLyBDaGFuZ2UgdGhlIGFsaWdubWVudCBvZiBzdWJtZW51IGlzIG9mZnNjcmVlbi4KCiAgICAgIHZhciBzdWJtZW51ID0gS1RVdGlsLmZpbmQoaXRlbSwgJy5tZW51LXN1Ym1lbnUnKTsKCiAgICAgIGlmIChzdWJtZW51ICYmIHN1Ym1lbnUuaGFzQXR0cmlidXRlKCdkYXRhLWhvci1kaXJlY3Rpb24nKSA9PT0gZmFsc2UpIHsKICAgICAgICBpZiAoS1RVdGlsLmhhc0NsYXNzKHN1Ym1lbnUsICdtZW51LXN1Ym1lbnUtbGVmdCcpKSB7CiAgICAgICAgICBzdWJtZW51LnNldEF0dHJpYnV0ZSgnZGF0YS1ob3ItZGlyZWN0aW9uJywgJ21lbnUtc3VibWVudS1sZWZ0Jyk7CiAgICAgICAgfSBlbHNlIGlmIChLVFV0aWwuaGFzQ2xhc3Moc3VibWVudSwgJ21lbnUtc3VibWVudS1yaWdodCcpKSB7CiAgICAgICAgICBzdWJtZW51LnNldEF0dHJpYnV0ZSgnZGF0YS1ob3ItZGlyZWN0aW9uJywgJ21lbnUtc3VibWVudS1yaWdodCcpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHN1Ym1lbnUgJiYgS1RVdGlsLmlzT2Zmc2NyZWVuKHN1Ym1lbnUsICdsZWZ0JywgMTUpID09PSB0cnVlKSB7CiAgICAgICAgS1RVdGlsLnJlbW92ZUNsYXNzKHN1Ym1lbnUsICdtZW51LXN1Ym1lbnUtbGVmdCcpOwogICAgICAgIEtUVXRpbC5hZGRDbGFzcyhzdWJtZW51LCAnbWVudS1zdWJtZW51LXJpZ2h0Jyk7CiAgICAgIH0gZWxzZSBpZiAoc3VibWVudSAmJiBLVFV0aWwuaXNPZmZzY3JlZW4oc3VibWVudSwgJ3JpZ2h0JywgMTUpID09PSB0cnVlKSB7CiAgICAgICAgS1RVdGlsLnJlbW92ZUNsYXNzKHN1Ym1lbnUsICdtZW51LXN1Ym1lbnUtcmlnaHQnKTsKICAgICAgICBLVFV0aWwuYWRkQ2xhc3Moc3VibWVudSwgJ21lbnUtc3VibWVudS1sZWZ0Jyk7CiAgICAgIH0KCiAgICAgIGlmIChpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW51LXRvZ2dsZS1jbGFzcycpKSB7CiAgICAgICAgS1RVdGlsLmFkZENsYXNzKGJvZHksIGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUtdG9nZ2xlLWNsYXNzJykpOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEhhbmRsZXMgc3VibWVudSBzbGlkZSB0b2dnbGUNCiAgICAgKiBAcmV0dXJucyB7S1RNZW51fQ0KICAgICAqLwogICAgY3JlYXRlU3VibWVudURyb3Bkb3duQ2xpY2tEcm9wb2ZmOiBmdW5jdGlvbiBjcmVhdGVTdWJtZW51RHJvcGRvd25DbGlja0Ryb3BvZmYoZWwpIHsKICAgICAgdmFyIHF1ZXJ5OwogICAgICB2YXIgekluZGV4ID0gKHF1ZXJ5ID0gS1RVdGlsLmNoaWxkKGVsLCAnLm1lbnUtc3VibWVudScpID8gS1RVdGlsLmNzcyhxdWVyeSwgJ3otaW5kZXgnKSA6IDApIC0gMTsKICAgICAgdmFyIGRyb3BvZmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCc8ZGl2IGNsYXNzPSJtZW51LWRyb3BvZmYiIHN0eWxlPSJiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IHotaW5kZXg6ICcgKyB6SW5kZXggKyAnIj48L2Rpdj4nKTsKICAgICAgYm9keS5hcHBlbmRDaGlsZChkcm9wb2ZmKTsKICAgICAgS1RVdGlsLmFkZEV2ZW50KGRyb3BvZmYsICdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgS1RVdGlsLnJlbW92ZSh0aGlzKTsKICAgICAgICBQbHVnaW4uaGlkZVN1Ym1lbnVEcm9wZG93bihlbCwgdHJ1ZSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBIYW5kbGVzIHN1Ym1lbnUgaG92ZXIgdG9nZ2xlDQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIHBhdXNlRHJvcGRvd25Ib3ZlcjogZnVuY3Rpb24gcGF1c2VEcm9wZG93bkhvdmVyKHRpbWUpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB0aGUucGF1c2VEcm9wZG93bkhvdmVyVGltZSA9IGRhdGUuZ2V0VGltZSgpICsgdGltZTsKICAgIH0sCgogICAgLyoqDQogICAgICogSGFuZGxlcyBzdWJtZW51IGhvdmVyIHRvZ2dsZQ0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICByZXN1bWVEcm9wZG93bkhvdmVyOiBmdW5jdGlvbiByZXN1bWVEcm9wZG93bkhvdmVyKCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSA+IHRoZS5wYXVzZURyb3Bkb3duSG92ZXJUaW1lID8gdHJ1ZSA6IGZhbHNlOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBSZXNldCBtZW51J3MgY3VycmVudCBhY3RpdmUgaXRlbQ0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICByZXNldEFjdGl2ZUl0ZW06IGZ1bmN0aW9uIHJlc2V0QWN0aXZlSXRlbShpdGVtKSB7CiAgICAgIHZhciBsaXN0OwogICAgICB2YXIgcGFyZW50czsKICAgICAgbGlzdCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbS1hY3RpdmUnKTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgdmFyIGVsID0gbGlzdFswXTsKICAgICAgICBLVFV0aWwucmVtb3ZlQ2xhc3MoZWwsICdtZW51LWl0ZW0tYWN0aXZlJyk7CiAgICAgICAgS1RVdGlsLmhpZGUoS1RVdGlsLmNoaWxkKGVsLCAnLm1lbnUtc3VibWVudScpKTsKICAgICAgICBwYXJlbnRzID0gS1RVdGlsLnBhcmVudHMoZWwsICcubWVudS1pdGVtLXN1Ym1lbnUnKSB8fCBbXTsKCiAgICAgICAgZm9yICh2YXIgaV8gPSAwLCBsZW5fID0gcGFyZW50cy5sZW5ndGg7IGlfIDwgbGVuXzsgaV8rKykgewogICAgICAgICAgdmFyIGVsXyA9IHBhcmVudHNbaV07CiAgICAgICAgICBLVFV0aWwucmVtb3ZlQ2xhc3MoZWxfLCAnbWVudS1pdGVtLW9wZW4nKTsKICAgICAgICAgIEtUVXRpbC5oaWRlKEtUVXRpbC5jaGlsZChlbF8sICcubWVudS1zdWJtZW51JykpOwogICAgICAgIH0KICAgICAgfSAvLyBjbG9zZSBvcGVuIHN1Ym1lbnVzCgoKICAgICAgaWYgKHRoZS5vcHRpb25zLmFjY29yZGlvbi5leHBhbmRBbGwgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKGxpc3QgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0tb3BlbicpKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBLVFV0aWwucmVtb3ZlQ2xhc3MocGFyZW50c1swXSwgJ21lbnUtaXRlbS1vcGVuJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFNldHMgbWVudSdzIGFjdGl2ZSBpdGVtDQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIHNldEFjdGl2ZUl0ZW06IGZ1bmN0aW9uIHNldEFjdGl2ZUl0ZW0oaXRlbSkgewogICAgICAvLyByZXNldCBjdXJyZW50IGFjdGl2ZSBpdGVtCiAgICAgIFBsdWdpbi5yZXNldEFjdGl2ZUl0ZW0oKTsKICAgICAgdmFyIHBhcmVudHMgPSBLVFV0aWwucGFyZW50cyhpdGVtLCAnLm1lbnUtaXRlbS1zdWJtZW51JykgfHwgW107CgogICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGFyZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIEtUVXRpbC5hZGRDbGFzcyhwYXJlbnRzW2ldLCAnbWVudS1pdGVtLW9wZW4nKTsKICAgICAgfQoKICAgICAgS1RVdGlsLmFkZENsYXNzKGl0ZW0sICdtZW51LWl0ZW0tYWN0aXZlJyk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFJldHVybnMgcGFnZSBicmVhZGNydW1icyBmb3IgdGhlIG1lbnUncyBhY3RpdmUgaXRlbQ0KICAgICAqIEByZXR1cm5zIHtLVE1lbnV9DQogICAgICovCiAgICBnZXRCcmVhZGNydW1iczogZnVuY3Rpb24gZ2V0QnJlYWRjcnVtYnMoaXRlbSkgewogICAgICB2YXIgcXVlcnk7CiAgICAgIHZhciBicmVhZGNydW1icyA9IFtdOwogICAgICB2YXIgbGluayA9IEtUVXRpbC5jaGlsZChpdGVtLCAnLm1lbnUtbGluaycpOwogICAgICBicmVhZGNydW1icy5wdXNoKHsKICAgICAgICB0ZXh0OiBxdWVyeSA9IEtUVXRpbC5jaGlsZChsaW5rLCAnLm1lbnUtdGV4dCcpID8gcXVlcnkuaW5uZXJIVE1MIDogJycsCiAgICAgICAgdGl0bGU6IGxpbmsuZ2V0QXR0cmlidXRlKCd0aXRsZScpLAogICAgICAgIGhyZWY6IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJykKICAgICAgfSk7CiAgICAgIHZhciBwYXJlbnRzID0gS1RVdGlsLnBhcmVudHMoaXRlbSwgJy5tZW51LWl0ZW0tc3VibWVudScpOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHBhcmVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICB2YXIgc3VibWVudUxpbmsgPSBLVFV0aWwuY2hpbGQocGFyZW50c1tpXSwgJy5tZW51LWxpbmsnKTsKICAgICAgICBicmVhZGNydW1icy5wdXNoKHsKICAgICAgICAgIHRleHQ6IHF1ZXJ5ID0gS1RVdGlsLmNoaWxkKHN1Ym1lbnVMaW5rLCAnLm1lbnUtdGV4dCcpID8gcXVlcnkuaW5uZXJIVE1MIDogJycsCiAgICAgICAgICB0aXRsZTogc3VibWVudUxpbmsuZ2V0QXR0cmlidXRlKCd0aXRsZScpLAogICAgICAgICAgaHJlZjogc3VibWVudUxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJykKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJyZWFkY3J1bWJzLnJldmVyc2UoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogUmV0dXJucyBwYWdlIHRpdGxlIGZvciB0aGUgbWVudSdzIGFjdGl2ZSBpdGVtDQogICAgICogQHJldHVybnMge0tUTWVudX0NCiAgICAgKi8KICAgIGdldFBhZ2VUaXRsZTogZnVuY3Rpb24gZ2V0UGFnZVRpdGxlKGl0ZW0pIHsKICAgICAgdmFyIHF1ZXJ5OwogICAgICByZXR1cm4gcXVlcnkgPSBLVFV0aWwuY2hpbGQoaXRlbSwgJy5tZW51LXRleHQnKSA/IHF1ZXJ5LmlubmVySFRNTCA6ICcnOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBUcmlnZ2VyIGV2ZW50cw0KICAgICAqLwogICAgZXZlbnRUcmlnZ2VyOiBmdW5jdGlvbiBldmVudFRyaWdnZXIobmFtZSwgdGFyZ2V0LCBlKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhlLmV2ZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBldmVudCA9IHRoZS5ldmVudHNbaV07CgogICAgICAgIGlmIChldmVudC5uYW1lID09IG5hbWUpIHsKICAgICAgICAgIGlmIChldmVudC5vbmUgPT0gdHJ1ZSkgewogICAgICAgICAgICBpZiAoZXZlbnQuZmlyZWQgPT0gZmFsc2UpIHsKICAgICAgICAgICAgICB0aGUuZXZlbnRzW2ldLmZpcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICByZXR1cm4gZXZlbnQuaGFuZGxlci5jYWxsKHRoaXMsIHRhcmdldCwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBldmVudC5oYW5kbGVyLmNhbGwodGhpcywgdGFyZ2V0LCBlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBhZGRFdmVudDogZnVuY3Rpb24gYWRkRXZlbnQobmFtZSwgaGFuZGxlciwgb25lKSB7CiAgICAgIHRoZS5ldmVudHMucHVzaCh7CiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLAogICAgICAgIG9uZTogb25lLAogICAgICAgIGZpcmVkOiBmYWxzZQogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVFdmVudDogZnVuY3Rpb24gcmVtb3ZlRXZlbnQobmFtZSkgewogICAgICBpZiAodGhlLmV2ZW50c1tuYW1lXSkgewogICAgICAgIGRlbGV0ZSB0aGUuZXZlbnRzW25hbWVdOwogICAgICB9CiAgICB9CiAgfTsgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyAqKiBQdWJsaWMgTWV0aG9kcyAqKiAvLwogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogIC8qKg0KICAgKiBTZXQgZGVmYXVsdCBvcHRpb25zDQogICAqLwoKICB0aGUuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAob3B0aW9ucykgewogICAgZGVmYXVsdE9wdGlvbnMgPSBvcHRpb25zOwogIH07CiAgLyoqDQogICAqIFVwZGF0ZSBzY3JvbGwNCiAgICovCgoKICB0aGUuc2Nyb2xsVXBkYXRlID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIFBsdWdpbi5zY3JvbGxVcGRhdGUoKTsKICB9OwogIC8qKg0KICAgKiBSZS1pbml0IHNjcm9sbA0KICAgKi8KCgogIHRoZS5zY3JvbGxSZUluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gUGx1Z2luLnNjcm9sbEluaXQoKTsKICB9OwogIC8qKg0KICAgKiBTY3JvbGwgdG9wDQogICAqLwoKCiAgdGhlLnNjcm9sbFRvcCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBQbHVnaW4uc2Nyb2xsVG9wKCk7CiAgfTsKICAvKioNCiAgICogU2V0IGFjdGl2ZSBtZW51IGl0ZW0NCiAgICovCgoKICB0aGUuc2V0QWN0aXZlSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gUGx1Z2luLnNldEFjdGl2ZUl0ZW0oaXRlbSk7CiAgfTsKCiAgdGhlLnJlbG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBQbHVnaW4ucmVsb2FkKCk7CiAgfTsKCiAgdGhlLnVwZGF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICByZXR1cm4gUGx1Z2luLnVwZGF0ZShvcHRpb25zKTsKICB9OwogIC8qKg0KICAgKiBTZXQgYnJlYWRjcnVtYiBmb3IgbWVudSBpdGVtDQogICAqLwoKCiAgdGhlLmdldEJyZWFkY3J1bWJzID0gZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBQbHVnaW4uZ2V0QnJlYWRjcnVtYnMoaXRlbSk7CiAgfTsKICAvKioNCiAgICogU2V0IHBhZ2UgdGl0bGUgZm9yIG1lbnUgaXRlbQ0KICAgKi8KCgogIHRoZS5nZXRQYWdlVGl0bGUgPSBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIFBsdWdpbi5nZXRQYWdlVGl0bGUoaXRlbSk7CiAgfTsKICAvKioNCiAgICogR2V0IHN1Ym1lbnUgbW9kZQ0KICAgKi8KCgogIHRoZS5nZXRTdWJtZW51TW9kZSA9IGZ1bmN0aW9uIChlbCkgewogICAgcmV0dXJuIFBsdWdpbi5nZXRTdWJtZW51TW9kZShlbCk7CiAgfTsKICAvKioNCiAgICogSGlkZSBkcm9wZG93bg0KICAgKiBAcmV0dXJucyB7T2JqZWN0fQ0KICAgKi8KCgogIHRoZS5oaWRlRHJvcGRvd24gPSBmdW5jdGlvbiAoaXRlbSkgewogICAgUGx1Z2luLmhpZGVTdWJtZW51RHJvcGRvd24oaXRlbSwgdHJ1ZSk7CiAgfTsKICAvKioNCiAgICogSGlkZSBkcm9wZG93bnMNCiAgICogQHJldHVybnMge09iamVjdH0NCiAgICovCgoKICB0aGUuaGlkZURyb3Bkb3ducyA9IGZ1bmN0aW9uICgpIHsKICAgIFBsdWdpbi5oaWRlU3VibWVudURyb3Bkb3ducygpOwogIH07CiAgLyoqDQogICAqIERpc2FibGUgbWVudSBmb3IgZ2l2ZW4gdGltZQ0KICAgKiBAcmV0dXJucyB7T2JqZWN0fQ0KICAgKi8KCgogIHRoZS5wYXVzZURyb3Bkb3duSG92ZXIgPSBmdW5jdGlvbiAodGltZSkgewogICAgUGx1Z2luLnBhdXNlRHJvcGRvd25Ib3Zlcih0aW1lKTsKICB9OwogIC8qKg0KICAgKiBEaXNhYmxlIG1lbnUgZm9yIGdpdmVuIHRpbWUNCiAgICogQHJldHVybnMge09iamVjdH0NCiAgICovCgoKICB0aGUucmVzdW1lRHJvcGRvd25Ib3ZlciA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBQbHVnaW4ucmVzdW1lRHJvcGRvd25Ib3ZlcigpOwogIH07CiAgLyoqDQogICAqIFJlZ2lzdGVyIGV2ZW50DQogICAqLwoKCiAgdGhlLm9uID0gZnVuY3Rpb24gKG5hbWUsIGhhbmRsZXIpIHsKICAgIHJldHVybiBQbHVnaW4uYWRkRXZlbnQobmFtZSwgaGFuZGxlcik7CiAgfTsKCiAgdGhlLm9mZiA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICByZXR1cm4gUGx1Z2luLnJlbW92ZUV2ZW50KG5hbWUpOwogIH07CgogIHRoZS5vbmUgPSBmdW5jdGlvbiAobmFtZSwgaGFuZGxlcikgewogICAgcmV0dXJuIFBsdWdpbi5hZGRFdmVudChuYW1lLCBoYW5kbGVyLCB0cnVlKTsKICB9OyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgLy8gKiogUGx1Z2luIENvbnN0cnVjdGlvbiAqKiAvLwogIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyBSdW4gcGx1Z2luCgoKICBQbHVnaW4uY29uc3RydWN0LmFwcGx5KHRoZSwgW29wdGlvbnNdKTsgLy8gSGFuZGxlIHBsdWdpbiBvbiB3aW5kb3cgcmVzaXplCgogIEtUVXRpbC5hZGRSZXNpemVIYW5kbGVyKGZ1bmN0aW9uICgpIHsKICAgIGlmIChpbml0KSB7CiAgICAgIHRoZS5yZWxvYWQoKTsKICAgIH0KICB9KTsgLy8gSW5pdCBkb25lCgogIGluaXQgPSB0cnVlOyAvLyBSZXR1cm4gcGx1Z2luIGluc3RhbmNlCgogIHJldHVybiB0aGU7Cn07IC8vIHdlYnBhY2sgc3VwcG9ydAoKCmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7CiAgbW9kdWxlLmV4cG9ydHMgPSBLVE1lbnU7Cn0gLy8gUGx1Z2luIGdsb2JhbCBsYXp5IGluaXRpYWxpemF0aW9uCgoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogIHZhciBib2R5ID0gS1RVdGlsLmdldEJ5VGFnTmFtZSgnYm9keScpWzBdOwogIHZhciBxdWVyeTsKCiAgaWYgKHF1ZXJ5ID0gYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1uYXYgLm1lbnUtaXRlbS5tZW51LWl0ZW0tc3VibWVudS5tZW51LWl0ZW0taG92ZXI6bm90KC5tZW51LWl0ZW0tdGFicylbZGF0YS1tZW51LXRvZ2dsZT0iY2xpY2siXScpKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcXVlcnkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgdmFyIGVsZW1lbnQgPSBxdWVyeVtpXS5jbG9zZXN0KCcubWVudS1uYXYnKS5wYXJlbnROb2RlOwoKICAgICAgaWYgKGVsZW1lbnQpIHsKICAgICAgICB2YXIgdGhlID0gS1RVdGlsLmRhdGEoZWxlbWVudCkuZ2V0KCdtZW51Jyk7CgogICAgICAgIGlmICghdGhlKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmICghdGhlIHx8IHRoZS5nZXRTdWJtZW51TW9kZSgpICE9PSAnZHJvcGRvd24nKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIGlmIChlLnRhcmdldCAhPT0gZWxlbWVudCAmJiBlbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSA9PT0gZmFsc2UpIHsKICAgICAgICAgIHRoZS5oaWRlRHJvcGRvd25zKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgS1RNZW51Ow=="},{"version":3,"sources":["/Users/belliecee/Documents/00_Bisinnoco/Bisinnoco/office-front/src/assets/js/components/menu.js"],"names":["KTUtil","KTMenu","elementId","options","the","init","element","getById","body","getBody","defaultOptions","scroll","rememberPosition","accordion","slideSpeed","autoScroll","autoScrollSpeed","expandAll","dropdown","timeout","Plugin","construct","data","has","get","reset","build","set","events","eventHandlers","deepExtend","pauseDropdownHoverTime","uid","getUniqueID","update","reload","resetSubmenuProps","on","handleSubmenuAccordion","getSubmenuMode","isConditionalSubmenuDropdown","handleSubmenuDrodownHoverEnter","handleSubmenuDrodownHoverExit","handleSubmenuDropdownClick","handleSubmenuDropdownTabClick","handleLinkClick","height","scrollInit","off","scrollDestroy","mobileNativeScroll","windowScroll","resetHeightOnDestroy","handleWindowResize","scrollUpdate","scrollTop","el","isBreakpointUp","hasAttr","attr","isset","submenu","hasClasses","desktop","state","mode","default","isBreakpointDown","tablet","mobile","e","submenus","findAll","i","len","length","css","hasAttribute","removeClass","addClass","getAttribute","resumeDropdownHover","item","removeAttribute","clearTimeout","showSubmenuDropdown","time","setTimeout","hideSubmenuDropdown","setAttribute","closest","result","eventTrigger","hasClass","preventDefault","hideSubmenuDropdowns","handleSubmenuDropdownClose","shown","querySelectorAll","query","li","child","speed","hasClosables","subnav","closables","children","el_","submenu_","slideUp","slideDown","scrollToItem","scrollTo","classAlso","items","j","cnt","list","contains","find","isOffscreen","createSubmenuDropdownClickDropoff","zIndex","dropoff","document","createElement","appendChild","addEvent","stopPropagation","remove","pauseDropdownHover","date","Date","getTime","resetActiveItem","parents","hide","i_","len_","setActiveItem","getBreadcrumbs","breadcrumbs","link","push","text","innerHTML","title","href","submenuLink","reverse","getPageTitle","name","target","event","one","fired","handler","call","removeEvent","setDefaults","scrollReInit","hideDropdown","hideDropdowns","apply","addResizeHandler","module","exports","addEventListener","getByTagName","parentNode"],"mappings":"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","sourcesContent":["\"use strict\";\n\nimport KTUtil from \"./util\";\r\n\r\n// Component Definition\r\nvar KTMenu = function(elementId, options) {\r\n    // Main object\r\n    var the = this;\r\n    var init = false;\r\n\r\n    // Get element object\r\n    var element = KTUtil.getById(elementId);\r\n    var body = KTUtil.getBody();\r\n\r\n    if (!element) {\r\n        return;\r\n    }\r\n\r\n    // Default options\r\n    var defaultOptions = {\r\n        // scrollable area with Perfect Scroll\r\n        scroll: {\r\n            rememberPosition: false\r\n        },\r\n\r\n        // accordion submenu mode\r\n        accordion: {\r\n            slideSpeed: 200, // accordion toggle slide speed in milliseconds\r\n            autoScroll: false, // enable auto scrolling(focus) to the clicked menu item\r\n            autoScrollSpeed: 1200,\r\n            expandAll: true // allow having multiple expanded accordions in the menu\r\n        },\r\n\r\n        // dropdown submenu mode\r\n        dropdown: {\r\n            timeout: 500 // timeout in milliseconds to show and hide the hoverable submenu dropdown\r\n        }\r\n    };\r\n\r\n    ////////////////////////////\r\n    // ** Private Methods  ** //\r\n    ////////////////////////////\r\n\r\n    var Plugin = {\r\n        /**\r\n         * Run plugin\r\n         * @returns {KTMenu}\r\n         */\r\n        construct: function(options) {\r\n            if (KTUtil.data(element).has('menu')) {\r\n                the = KTUtil.data(element).get('menu');\r\n            } else {\r\n                // reset menu\r\n                Plugin.init(options);\r\n\r\n                // reset menu\r\n                Plugin.reset();\r\n\r\n                // build menu\r\n                Plugin.build();\r\n\r\n                KTUtil.data(element).set('menu', the);\r\n            }\r\n\r\n            return the;\r\n        },\r\n\r\n        /**\r\n         * Handles submenu click toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        init: function(options) {\r\n            the.events = [];\r\n\r\n            the.eventHandlers = {};\r\n\r\n            // merge default and user defined options\r\n            the.options = KTUtil.deepExtend({}, defaultOptions, options);\r\n\r\n            // pause menu\r\n            the.pauseDropdownHoverTime = 0;\r\n\r\n            the.uid = KTUtil.getUniqueID();\r\n        },\r\n\r\n        update: function(options) {\r\n            // merge default and user defined options\r\n            the.options = KTUtil.deepExtend({}, defaultOptions, options);\r\n\r\n            // pause menu\r\n            the.pauseDropdownHoverTime = 0;\r\n\r\n             // reset menu\r\n            Plugin.reset();\r\n\r\n            the.eventHandlers = {};\r\n\r\n            // build menu\r\n            Plugin.build();\r\n\r\n            KTUtil.data(element).set('menu', the);\r\n        },\r\n\r\n        reload: function() {\r\n             // reset menu\r\n            Plugin.reset();\r\n\r\n            // build menu\r\n            Plugin.build();\r\n\r\n            // reset submenu props\r\n            Plugin.resetSubmenuProps();\r\n        },\r\n\r\n        /**\r\n         * Reset menu\r\n         * @returns {KTMenu}\r\n         */\r\n        build: function() {\r\n            // General accordion submenu toggle\r\n            the.eventHandlers['event_1'] = KTUtil.on( element, '.menu-toggle', 'click', Plugin.handleSubmenuAccordion);\r\n\r\n            // Dropdown mode(hoverable)\r\n            if (Plugin.getSubmenuMode() === 'dropdown' || Plugin.isConditionalSubmenuDropdown()) {\r\n                // dropdown submenu - hover toggle\r\n                the.eventHandlers['event_2'] = KTUtil.on( element, '[data-menu-toggle=\"hover\"]', 'mouseover', Plugin.handleSubmenuDrodownHoverEnter);\r\n                the.eventHandlers['event_3'] = KTUtil.on( element, '[data-menu-toggle=\"hover\"]', 'mouseout', Plugin.handleSubmenuDrodownHoverExit);\r\n\r\n                // dropdown submenu - click toggle\r\n                the.eventHandlers['event_4'] = KTUtil.on( element, '[data-menu-toggle=\"click\"] > .menu-toggle, [data-menu-toggle=\"click\"] > .menu-link .menu-toggle', 'click', Plugin.handleSubmenuDropdownClick);\r\n                the.eventHandlers['event_5'] = KTUtil.on( element, '[data-menu-toggle=\"tab\"] > .menu-toggle, [data-menu-toggle=\"tab\"] > .menu-link .menu-toggle', 'click', Plugin.handleSubmenuDropdownTabClick);\r\n            }\r\n\r\n            // Handle general link click\r\n            the.eventHandlers['event_6'] = KTUtil.on(element, '.menu-item > .menu-link:not(.menu-toggle):not(.menu-link-toggle-skip)', 'click', Plugin.handleLinkClick);\r\n\r\n            // Init scrollable menu\r\n            if (the.options.scroll && the.options.scroll.height) {\r\n                Plugin.scrollInit();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Reset menu\r\n         * @returns {KTMenu}\r\n         */\r\n        reset: function() {\r\n            KTUtil.off( element, 'click', the.eventHandlers['event_1']);\r\n\r\n            // dropdown submenu - hover toggle\r\n            KTUtil.off( element, 'mouseover', the.eventHandlers['event_2']);\r\n            KTUtil.off( element, 'mouseout', the.eventHandlers['event_3']);\r\n\r\n            // dropdown submenu - click toggle\r\n            KTUtil.off( element, 'click', the.eventHandlers['event_4']);\r\n            KTUtil.off( element, 'click', the.eventHandlers['event_5']);\r\n\r\n            // handle link click\r\n            KTUtil.off(element, 'click', the.eventHandlers['event_6']);\r\n        },\r\n\r\n        /**\r\n         * Init scroll menu\r\n         *\r\n        */\r\n        scrollInit: function() {\r\n            if ( the.options.scroll && the.options.scroll.height ) {\r\n                KTUtil.scrollDestroy(element, true);\r\n                KTUtil.scrollInit(element, {mobileNativeScroll: true, windowScroll: false, resetHeightOnDestroy: true, handleWindowResize: true, height: the.options.scroll.height, rememberPosition: the.options.scroll.rememberPosition});\r\n            } else {\r\n                KTUtil.scrollDestroy(element, true);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update scroll menu\r\n        */\r\n        scrollUpdate: function() {\r\n            if ( the.options.scroll && the.options.scroll.height ) {\r\n                KTUtil.scrollUpdate(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Scroll top\r\n        */\r\n        scrollTop: function() {\r\n            if ( the.options.scroll && the.options.scroll.height ) {\r\n                KTUtil.scrollTop(element);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get submenu mode for current breakpoint and menu state\r\n         * @returns {KTMenu}\r\n         */\r\n        getSubmenuMode: function(el) {\r\n            if ( KTUtil.isBreakpointUp('lg') ) {\r\n                if (el && KTUtil.hasAttr(el, 'data-menu-toggle') && KTUtil.attr(el, 'data-menu-toggle') == 'hover') {\r\n                    return 'dropdown';\r\n                }\r\n\r\n                if ( KTUtil.isset(the.options.submenu, 'desktop.state.body') ) {\r\n                    if ( KTUtil.hasClasses(body, the.options.submenu.desktop.state.body) ) {\r\n                        return the.options.submenu.desktop.state.mode;\r\n                    } else {\r\n                        return the.options.submenu.desktop.default;\r\n                    }\r\n                } else if ( KTUtil.isset(the.options.submenu, 'desktop') ) {\r\n                    return the.options.submenu.desktop;\r\n                }\r\n            } else if ( KTUtil.isBreakpointUp('md') && KTUtil.isBreakpointDown('lg') && KTUtil.isset(the.options.submenu, 'tablet') ) {\r\n                return the.options.submenu.tablet;\r\n            } else if ( KTUtil.isBreakpointDown('md') && KTUtil.isset(the.options.submenu, 'mobile') ) {\r\n                return the.options.submenu.mobile;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get submenu mode for current breakpoint and menu state\r\n         * @returns {KTMenu}\r\n         */\r\n        isConditionalSubmenuDropdown: function() {\r\n            if ( KTUtil.isBreakpointUp('lg') && KTUtil.isset(the.options.submenu, 'desktop.state.body') ) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n\r\n        /**\r\n         * Reset submenu attributes\r\n         * @returns {KTMenu}\r\n         */\r\n        resetSubmenuProps: function(e) {\r\n            var submenus = KTUtil.findAll(element, '.menu-submenu');\r\n            if ( submenus ) {\r\n                for (var i = 0, len = submenus.length; i < len; i++) {\r\n                    var submenu = submenus[0];\r\n\r\n                    KTUtil.css(submenu, 'display', '');\r\n                    KTUtil.css(submenu, 'overflow', '');\r\n\r\n                    if (submenu.hasAttribute('data-hor-direction')) {\r\n                        KTUtil.removeClass(submenu, 'menu-submenu-left');\r\n                        KTUtil.removeClass(submenu, 'menu-submenu-right');\r\n                        KTUtil.addClass(submenu, submenu.getAttribute('data-hor-direction'));\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        handleSubmenuDrodownHoverEnter: function(e) {\r\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\r\n                return;\r\n            }\r\n\r\n            if ( the.resumeDropdownHover() === false ) {\r\n                return;\r\n            }\r\n\r\n            var item = this;\r\n\r\n            if ( item.getAttribute('data-hover') == '1' ) {\r\n                item.removeAttribute('data-hover');\r\n                clearTimeout( item.getAttribute('data-timeout') );\r\n                item.removeAttribute('data-timeout');\r\n            }\r\n\r\n            Plugin.showSubmenuDropdown(item);\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        handleSubmenuDrodownHoverExit: function(e) {\r\n            if ( the.resumeDropdownHover() === false ) {\r\n                return;\r\n            }\r\n\r\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\r\n                return;\r\n            }\r\n\r\n            var item = this;\r\n            var time = the.options.dropdown.timeout;\r\n\r\n            var timeout = setTimeout(function() {\r\n                if ( item.getAttribute('data-hover') == '1' ) {\r\n                    Plugin.hideSubmenuDropdown(item, true);\r\n                }\r\n            }, time);\r\n\r\n            item.setAttribute('data-hover', '1');\r\n            item.setAttribute('data-timeout', timeout);\r\n        },\r\n\r\n        /**\r\n         * Handles submenu click toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        handleSubmenuDropdownClick: function(e) {\r\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\r\n                return;\r\n            }\r\n\r\n            var item = this.closest('.menu-item');\r\n\r\n            // Trigger click event handlers\r\n            var result = Plugin.eventTrigger('submenuToggle', this, e);\r\n            if (result === false) {\r\n                return;\r\n            }\r\n\r\n            if ( item.getAttribute('data-menu-submenu-mode') == 'accordion' ) {\r\n                return;\r\n            }\r\n\r\n            if ( KTUtil.hasClass(item, 'menu-item-hover') === false ) {\r\n                KTUtil.addClass(item, 'menu-item-open-dropdown');\r\n                Plugin.showSubmenuDropdown(item);\r\n            } else {\r\n                KTUtil.removeClass(item, 'menu-item-open-dropdown' );\r\n                Plugin.hideSubmenuDropdown(item, true);\r\n            }\r\n\r\n            e.preventDefault();\r\n        },\r\n\r\n        /**\r\n         * Handles tab click toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        handleSubmenuDropdownTabClick: function(e) {\r\n            if (Plugin.getSubmenuMode(this) === 'accordion') {\r\n                return;\r\n            }\r\n            var item = this.closest('.menu-item');\r\n\r\n            // Trigger click event handlers\r\n            var result = Plugin.eventTrigger('submenuToggle', this, e);\r\n            if (result === false) {\r\n                return;\r\n            }\r\n\r\n            if (item.getAttribute('data-menu-submenu-mode') == 'accordion') {\r\n                return;\r\n            }\r\n\r\n            if (KTUtil.hasClass(item, 'menu-item-hover') == false) {\r\n                KTUtil.addClass(item, 'menu-item-open-dropdown');\r\n                Plugin.showSubmenuDropdown(item);\r\n            }\r\n\r\n            e.preventDefault();\r\n        },\r\n\r\n        /**\r\n         * Handles link click\r\n         * @returns {KTMenu}\r\n         */\r\n        handleLinkClick: function(e) {\r\n            var submenu = this.closest('.menu-item.menu-item-submenu');\r\n\r\n            // Trigger click event handlers\r\n            var result = Plugin.eventTrigger('linkClick', this, e);\r\n            if (result === false) {\r\n                return;\r\n            }\r\n\r\n            if ( submenu && Plugin.getSubmenuMode(submenu) === 'dropdown' ) {\r\n                Plugin.hideSubmenuDropdowns();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles submenu dropdown close on link click\r\n         * @returns {KTMenu}\r\n         */\r\n        handleSubmenuDropdownClose: function(e, el) {\r\n            // exit if its not submenu dropdown mode\r\n            if (Plugin.getSubmenuMode(el) === 'accordion') {\r\n                return;\r\n            }\r\n\r\n            var shown = element.querySelectorAll('.menu-item.menu-item-submenu.menu-item-hover:not(.menu-item-tabs)');\r\n\r\n            // check if currently clicked link's parent item ha\r\n            if (shown.length > 0 && KTUtil.hasClass(el, 'menu-toggle') === false && el.querySelectorAll('.menu-toggle').length === 0) {\r\n                // close opened dropdown menus\r\n                for (var i = 0, len = shown.length; i < len; i++) {\r\n                    Plugin.hideSubmenuDropdown(shown[0], true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * helper functions\r\n         * @returns {KTMenu}\r\n         */\r\n        handleSubmenuAccordion: function(e, el) {\r\n            var query;\r\n            var item = el ? el : this;\r\n\r\n            // Trigger click event handlers\r\n            var result = Plugin.eventTrigger('submenuToggle', this, e);\r\n            if (result === false) {\r\n                return;\r\n            }\r\n\r\n            if ( Plugin.getSubmenuMode(el) === 'dropdown' && (query = item.closest('.menu-item') ) ) {\r\n                if (query.getAttribute('data-menu-submenu-mode') != 'accordion' ) {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            var li = item.closest('.menu-item');\r\n            var submenu = KTUtil.child(li, '.menu-submenu, .menu-inner');\r\n\r\n            if (KTUtil.hasClass(item.closest('.menu-item'), 'menu-item-open-always')) {\r\n                return;\r\n            }\r\n\r\n            if ( li && submenu ) {\r\n                e.preventDefault();\r\n                var speed = the.options.accordion.slideSpeed;\r\n                var hasClosables = false;\r\n\r\n                if ( KTUtil.hasClass(li, 'menu-item-open') === false ) {\r\n                    // hide other accordions\r\n                    if ( the.options.accordion.expandAll === false ) {\r\n                        var subnav = item.closest('.menu-nav, .menu-subnav');\r\n                        var closables = KTUtil.children(subnav, '.menu-item.menu-item-open.menu-item-submenu:not(.menu-item-here):not(.menu-item-open-always)');\r\n\r\n                        if ( subnav && closables ) {\r\n                            for (var i = 0, len = closables.length; i < len; i++) {\r\n                                var el_ = closables[0];\r\n                                var submenu_ = KTUtil.child(el_, '.menu-submenu');\r\n                                if ( submenu_ ) {\r\n                                    KTUtil.slideUp(submenu_, speed, function() {\r\n                                        Plugin.scrollUpdate();\r\n                                        KTUtil.removeClass(el_, 'menu-item-open');\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    KTUtil.slideDown(submenu, speed, function() {\r\n                        Plugin.scrollToItem(item);\r\n                        Plugin.scrollUpdate();\r\n\r\n                        Plugin.eventTrigger('submenuToggle', submenu, e);\r\n                    });\r\n\r\n                    KTUtil.addClass(li, 'menu-item-open');\r\n\r\n                } else {\r\n                    KTUtil.slideUp(submenu, speed, function() {\r\n                        Plugin.scrollToItem(item);\r\n                        Plugin.scrollUpdate();\r\n                        Plugin.eventTrigger('submenuToggle', submenu, e);\r\n                    });\r\n\r\n                    KTUtil.removeClass(li, 'menu-item-open');\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * scroll to item function\r\n         * @returns {KTMenu}\r\n         */\r\n        scrollToItem: function(item) {\r\n            // handle auto scroll for accordion submenus\r\n            if ( KTUtil.isBreakpointUp('lg')  && the.options.accordion.autoScroll && element.getAttribute('data-menu-scroll') !== '1' ) {\r\n                KTUtil.scrollTo(item, the.options.accordion.autoScrollSpeed);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Hide submenu dropdown\r\n         * @returns {KTMenu}\r\n         */\r\n        hideSubmenuDropdown: function(item, classAlso) {\r\n            // remove submenu activation class\r\n            if ( classAlso ) {\r\n                KTUtil.removeClass(item, 'menu-item-hover');\r\n                KTUtil.removeClass(item, 'menu-item-active-tab');\r\n            }\r\n\r\n            // clear timeout\r\n            item.removeAttribute('data-hover');\r\n\r\n            if ( item.getAttribute('data-menu-toggle-class') ) {\r\n                KTUtil.removeClass(body, item.getAttribute('data-menu-toggle-class'));\r\n            }\r\n\r\n            var timeout = item.getAttribute('data-timeout');\r\n            item.removeAttribute('data-timeout');\r\n            clearTimeout(timeout);\r\n        },\r\n\r\n        /**\r\n         * Hide submenu dropdowns\r\n         * @returns {KTMenu}\r\n         */\r\n        hideSubmenuDropdowns: function() {\r\n            var items;\r\n            if ( items = element.querySelectorAll('.menu-item-submenu.menu-item-hover:not(.menu-item-tabs):not([data-menu-toggle=\"tab\"])') ) {\r\n                for (var j = 0, cnt = items.length; j < cnt; j++) {\r\n                    Plugin.hideSubmenuDropdown(items[j], true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * helper functions\r\n         * @returns {KTMenu}\r\n         */\r\n        showSubmenuDropdown: function(item) {\r\n            // close active submenus\r\n            var list = element.querySelectorAll('.menu-item-submenu.menu-item-hover, .menu-item-submenu.menu-item-active-tab');\r\n\r\n            if ( list ) {\r\n                for (var i = 0, len = list.length; i < len; i++) {\r\n                    var el = list[i];\r\n                    if ( item !== el && el.contains(item) === false && item.contains(el) === false ) {\r\n                        Plugin.hideSubmenuDropdown(el, true);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // add submenu activation class\r\n            KTUtil.addClass(item, 'menu-item-hover');\r\n\r\n            // Change the alignment of submenu is offscreen.\r\n            var submenu = KTUtil.find(item, '.menu-submenu');\r\n\r\n            if (submenu && submenu.hasAttribute('data-hor-direction') === false) {\r\n                if (KTUtil.hasClass(submenu, 'menu-submenu-left')) {\r\n                    submenu.setAttribute('data-hor-direction', 'menu-submenu-left');\r\n                } else if (KTUtil.hasClass(submenu, 'menu-submenu-right')) {\r\n                    submenu.setAttribute('data-hor-direction', 'menu-submenu-right');\r\n                }\r\n            }\r\n\r\n            if ( submenu && KTUtil.isOffscreen(submenu, 'left', 15) === true ) {\r\n                KTUtil.removeClass(submenu, 'menu-submenu-left');\r\n                KTUtil.addClass(submenu, 'menu-submenu-right');\r\n            } else if ( submenu && KTUtil.isOffscreen(submenu, 'right', 15) === true ) {\r\n                KTUtil.removeClass(submenu, 'menu-submenu-right');\r\n                KTUtil.addClass(submenu, 'menu-submenu-left');\r\n            }\r\n\r\n            if ( item.getAttribute('data-menu-toggle-class') ) {\r\n                KTUtil.addClass(body, item.getAttribute('data-menu-toggle-class'));\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Handles submenu slide toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        createSubmenuDropdownClickDropoff: function(el) {\r\n            var query;\r\n            var zIndex = (query = KTUtil.child(el, '.menu-submenu') ? KTUtil.css(query, 'z-index') : 0) - 1;\r\n\r\n            var dropoff = document.createElement('<div class=\"menu-dropoff\" style=\"background: transparent; position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: ' + zIndex + '\"></div>');\r\n\r\n            body.appendChild(dropoff);\r\n\r\n            KTUtil.addEvent(dropoff, 'click', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                KTUtil.remove(this);\r\n                Plugin.hideSubmenuDropdown(el, true);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        pauseDropdownHover: function(time) {\r\n            var date = new Date();\r\n\r\n            the.pauseDropdownHoverTime = date.getTime() + time;\r\n        },\r\n\r\n        /**\r\n         * Handles submenu hover toggle\r\n         * @returns {KTMenu}\r\n         */\r\n        resumeDropdownHover: function() {\r\n            var date = new Date();\r\n\r\n            return (date.getTime() > the.pauseDropdownHoverTime ? true : false);\r\n        },\r\n\r\n        /**\r\n         * Reset menu's current active item\r\n         * @returns {KTMenu}\r\n         */\r\n        resetActiveItem: function(item) {\r\n            var list;\r\n            var parents;\r\n\r\n            list = element.querySelectorAll('.menu-item-active');\r\n\r\n            for (var i = 0, len = list.length; i < len; i++) {\r\n                var el = list[0];\r\n                KTUtil.removeClass(el, 'menu-item-active');\r\n                KTUtil.hide( KTUtil.child(el, '.menu-submenu') );\r\n                parents = KTUtil.parents(el, '.menu-item-submenu') || [];\r\n\r\n                for (var i_ = 0, len_ = parents.length; i_ < len_; i_++) {\r\n                    var el_ = parents[i];\r\n                    KTUtil.removeClass(el_, 'menu-item-open');\r\n                    KTUtil.hide( KTUtil.child(el_, '.menu-submenu') );\r\n                }\r\n            }\r\n\r\n            // close open submenus\r\n            if ( the.options.accordion.expandAll === false ) {\r\n                if ( list = element.querySelectorAll('.menu-item-open') ) {\r\n                    for (var i = 0, len = list.length; i < len; i++) {\r\n                        KTUtil.removeClass(parents[0], 'menu-item-open');\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Sets menu's active item\r\n         * @returns {KTMenu}\r\n         */\r\n        setActiveItem: function(item) {\r\n            // reset current active item\r\n            Plugin.resetActiveItem();\r\n\r\n            var parents = KTUtil.parents(item, '.menu-item-submenu') || [];\r\n            for (var i = 0, len = parents.length; i < len; i++) {\r\n                KTUtil.addClass(parents[i], 'menu-item-open');\r\n            }\r\n\r\n            KTUtil.addClass(item, 'menu-item-active');\r\n        },\r\n\r\n        /**\r\n         * Returns page breadcrumbs for the menu's active item\r\n         * @returns {KTMenu}\r\n         */\r\n        getBreadcrumbs: function(item) {\r\n            var query;\r\n            var breadcrumbs = [];\r\n            var link = KTUtil.child(item, '.menu-link');\r\n\r\n            breadcrumbs.push({\r\n                text: (query = KTUtil.child(link, '.menu-text') ? query.innerHTML : ''),\r\n                title: link.getAttribute('title'),\r\n                href: link.getAttribute('href')\r\n            });\r\n\r\n            var parents = KTUtil.parents(item, '.menu-item-submenu');\r\n            for (var i = 0, len = parents.length; i < len; i++) {\r\n                var submenuLink = KTUtil.child(parents[i], '.menu-link');\r\n\r\n                breadcrumbs.push({\r\n                    text: (query = KTUtil.child(submenuLink, '.menu-text') ? query.innerHTML : ''),\r\n                    title: submenuLink.getAttribute('title'),\r\n                    href: submenuLink.getAttribute('href')\r\n                });\r\n            }\r\n\r\n            return  breadcrumbs.reverse();\r\n        },\r\n\r\n        /**\r\n         * Returns page title for the menu's active item\r\n         * @returns {KTMenu}\r\n         */\r\n        getPageTitle: function(item) {\r\n            var query;\r\n\r\n            return (query = KTUtil.child(item, '.menu-text') ? query.innerHTML : '');\r\n        },\r\n\r\n        /**\r\n         * Trigger events\r\n         */\r\n        eventTrigger: function(name, target, e) {\r\n            for (var i = 0; i < the.events.length; i++ ) {\r\n                var event = the.events[i];\r\n                if ( event.name == name ) {\r\n                    if ( event.one == true ) {\r\n                        if ( event.fired == false ) {\r\n                            the.events[i].fired = true;\r\n                            return event.handler.call(this, target, e);\r\n                        }\r\n                    } else {\r\n                        return event.handler.call(this, target, e);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        addEvent: function(name, handler, one) {\r\n            the.events.push({\r\n                name: name,\r\n                handler: handler,\r\n                one: one,\r\n                fired: false\r\n            });\r\n        },\r\n\r\n        removeEvent: function(name) {\r\n            if (the.events[name]) {\r\n                delete the.events[name];\r\n            }\r\n        }\r\n    };\r\n\r\n    //////////////////////////\r\n    // ** Public Methods ** //\r\n    //////////////////////////\r\n\r\n    /**\r\n     * Set default options\r\n     */\r\n\r\n    the.setDefaults = function(options) {\r\n        defaultOptions = options;\r\n    };\r\n\r\n    /**\r\n     * Update scroll\r\n     */\r\n    the.scrollUpdate = function() {\r\n        return Plugin.scrollUpdate();\r\n    };\r\n\r\n    /**\r\n     * Re-init scroll\r\n     */\r\n    the.scrollReInit = function() {\r\n        return Plugin.scrollInit();\r\n    };\r\n\r\n    /**\r\n     * Scroll top\r\n     */\r\n    the.scrollTop = function() {\r\n        return Plugin.scrollTop();\r\n    };\r\n\r\n    /**\r\n     * Set active menu item\r\n     */\r\n    the.setActiveItem = function(item) {\r\n        return Plugin.setActiveItem(item);\r\n    };\r\n\r\n    the.reload = function() {\r\n        return Plugin.reload();\r\n    };\r\n\r\n    the.update = function(options) {\r\n        return Plugin.update(options);\r\n    };\r\n\r\n    /**\r\n     * Set breadcrumb for menu item\r\n     */\r\n    the.getBreadcrumbs = function(item) {\r\n        return Plugin.getBreadcrumbs(item);\r\n    };\r\n\r\n    /**\r\n     * Set page title for menu item\r\n     */\r\n    the.getPageTitle = function(item) {\r\n        return Plugin.getPageTitle(item);\r\n    };\r\n\r\n    /**\r\n     * Get submenu mode\r\n     */\r\n    the.getSubmenuMode = function(el) {\r\n        return Plugin.getSubmenuMode(el);\r\n    };\r\n\r\n    /**\r\n     * Hide dropdown\r\n     * @returns {Object}\r\n     */\r\n    the.hideDropdown = function(item) {\r\n        Plugin.hideSubmenuDropdown(item, true);\r\n    };\r\n\r\n    /**\r\n     * Hide dropdowns\r\n     * @returns {Object}\r\n     */\r\n    the.hideDropdowns = function() {\r\n        Plugin.hideSubmenuDropdowns();\r\n    };\r\n\r\n    /**\r\n     * Disable menu for given time\r\n     * @returns {Object}\r\n     */\r\n    the.pauseDropdownHover = function(time) {\r\n        Plugin.pauseDropdownHover(time);\r\n    };\r\n\r\n    /**\r\n     * Disable menu for given time\r\n     * @returns {Object}\r\n     */\r\n    the.resumeDropdownHover = function() {\r\n        return Plugin.resumeDropdownHover();\r\n    };\r\n\r\n    /**\r\n     * Register event\r\n     */\r\n    the.on = function(name, handler) {\r\n        return Plugin.addEvent(name, handler);\r\n    };\r\n\r\n    the.off = function(name) {\r\n        return Plugin.removeEvent(name);\r\n    };\r\n\r\n    the.one = function(name, handler) {\r\n        return Plugin.addEvent(name, handler, true);\r\n    };\r\n\r\n    ///////////////////////////////\r\n    // ** Plugin Construction ** //\r\n    ///////////////////////////////\r\n\r\n    // Run plugin\r\n    Plugin.construct.apply(the, [options]);\r\n\r\n    // Handle plugin on window resize\r\n    KTUtil.addResizeHandler(function() {\r\n        if (init) {\r\n            the.reload();\r\n        }\r\n    });\r\n\r\n    // Init done\r\n    init = true;\r\n\r\n    // Return plugin instance\r\n    return the;\r\n};\r\n\r\n// webpack support\r\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\r\n    module.exports = KTMenu;\r\n}\r\n\r\n// Plugin global lazy initialization\r\ndocument.addEventListener(\"click\", function (e) {\r\n    var body = KTUtil.getByTagName('body')[0];\r\n    var query;\r\n    if ( query = body.querySelectorAll('.menu-nav .menu-item.menu-item-submenu.menu-item-hover:not(.menu-item-tabs)[data-menu-toggle=\"click\"]') ) {\r\n        for (var i = 0, len = query.length; i < len; i++) {\r\n            var element = query[i].closest('.menu-nav').parentNode;\r\n\r\n            if ( element ) {\r\n                var the = KTUtil.data(element).get('menu');\r\n\r\n                if ( !the ) {\r\n                    break;\r\n                }\r\n\r\n                if ( !the || the.getSubmenuMode() !== 'dropdown' ) {\r\n                    break;\r\n                }\r\n\r\n                if ( e.target !== element && element.contains(e.target) === false ) {\r\n                    the.hideDropdowns();\r\n                }\r\n            }\r\n        }\r\n    }\r\n});\r\n\nexport default KTMenu;"]}]}