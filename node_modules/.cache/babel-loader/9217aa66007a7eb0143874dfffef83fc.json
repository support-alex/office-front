{"remainingRequest":"/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/node_modules/babel-loader/lib/index.js!/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/node_modules/eslint-loader/index.js??ref--13-0!/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/src/assets/js/components/util.js","dependencies":[{"path":"/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/src/assets/js/components/util.js","mtime":1626379736000},{"path":"/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwovKioNCiAqIEBjbGFzcyBLVFV0aWwgIGJhc2UgdXRpbGl6ZSBjbGFzcyB0aGF0IHByaXZpZGVzIGhlbHBlciBmdW5jdGlvbnMNCiAqLwovLyBQb2x5ZmlsbHMKCi8qKg0KICogRWxlbWVudC5tYXRjaGVzKCkgcG9seWZpbGwgKHNpbXBsZSB2ZXJzaW9uKQ0KICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvbWF0Y2hlcyNQb2x5ZmlsbA0KICovCgppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKCmlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykgewogIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7Cn0KLyoqDQogKiBFbGVtZW50LmNsb3Nlc3QoKSBwb2x5ZmlsbA0KICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvY2xvc2VzdCNQb2x5ZmlsbA0KICovCgoKaWYgKCFFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0KSB7CiAgaWYgKCFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7CiAgICBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID0gRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yOwogIH0KCiAgRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCA9IGZ1bmN0aW9uIChzKSB7CiAgICB2YXIgZWwgPSB0aGlzOwogICAgdmFyIGFuY2VzdG9yID0gdGhpczsKICAgIGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGVsKSkgcmV0dXJuIG51bGw7CgogICAgZG8gewogICAgICBpZiAoYW5jZXN0b3IubWF0Y2hlcyhzKSkgcmV0dXJuIGFuY2VzdG9yOwogICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudEVsZW1lbnQ7CiAgICB9IHdoaWxlIChhbmNlc3RvciAhPT0gbnVsbCk7CgogICAgcmV0dXJuIG51bGw7CiAgfTsKfQovKioNCiAqIENoaWxkTm9kZS5yZW1vdmUoKSBwb2x5ZmlsbA0KICogaHR0cHM6Ly9nb21ha2V0aGluZ3MuY29tL3JlbW92aW5nLWFuLWVsZW1lbnQtZnJvbS10aGUtZG9tLXRoZS1lczYtd2F5Lw0KICogQGF1dGhvciBDaHJpcyBGZXJkaW5hbmRpDQogKiBAbGljZW5zZSBNSVQNCiAqLwoKCihmdW5jdGlvbiAoZWxlbSkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbS5sZW5ndGg7IGkrKykgewogICAgaWYgKCF3aW5kb3dbZWxlbVtpXV0gfHwgJ3JlbW92ZScgaW4gd2luZG93W2VsZW1baV1dLnByb3RvdHlwZSkgY29udGludWU7CgogICAgd2luZG93W2VsZW1baV1dLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTsKICAgIH07CiAgfQp9KShbJ0VsZW1lbnQnLCAnQ2hhcmFjdGVyRGF0YScsICdEb2N1bWVudFR5cGUnXSk7IC8vCi8vIHJlcXVlc3RBbmltYXRpb25GcmFtZSBwb2x5ZmlsbCBieSBFcmlrIE3DtmxsZXIuCi8vICBXaXRoIGZpeGVzIGZyb20gUGF1bCBJcmlzaCBhbmQgVGlubyBaaWpkZWwKLy8KLy8gIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvCi8vICBodHRwOi8vbXkub3BlcmEuY29tL2Vtb2xsZXIvYmxvZy8yMDExLzEyLzIwL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtZXItYW5pbWF0aW5nCi8vCi8vICBNSVQgbGljZW5zZQovLwoKCihmdW5jdGlvbiAoKSB7CiAgdmFyIGxhc3RUaW1lID0gMDsKICB2YXIgdmVuZG9ycyA9IFsnd2Via2l0JywgJ21veiddOwoKICBmb3IgKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHsKICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArICdSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTsKICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IHdpbmRvd1t2ZW5kb3JzW3hdICsgJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ10gfHwgd2luZG93W3ZlbmRvcnNbeF0gKyAnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107CiAgfQoKICBpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgIHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7CiAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGNhbGxiYWNrKGN1cnJUaW1lICsgdGltZVRvQ2FsbCk7CiAgICB9LCB0aW1lVG9DYWxsKTsKICAgIGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsOwogICAgcmV0dXJuIGlkOwogIH07CiAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChpZCkgewogICAgY2xlYXJUaW1lb3V0KGlkKTsKICB9Owp9KSgpOyAvLyBTb3VyY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9qc2Vyei9qc19waWVjZS9ibG9iL21hc3Rlci9ET00vUGFyZW50Tm9kZS9wcmVwZW5kKCkvcHJlcGVuZCgpLm1kCgoKKGZ1bmN0aW9uIChhcnIpIHsKICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3ByZXBlbmQnKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGl0ZW0sICdwcmVwZW5kJywgewogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICB2YWx1ZTogZnVuY3Rpb24gcHJlcGVuZCgpIHsKICAgICAgICB2YXIgYXJnQXJyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSwKICAgICAgICAgICAgZG9jRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKICAgICAgICBhcmdBcnIuZm9yRWFjaChmdW5jdGlvbiAoYXJnSXRlbSkgewogICAgICAgICAgdmFyIGlzTm9kZSA9IGFyZ0l0ZW0gaW5zdGFuY2VvZiBOb2RlOwogICAgICAgICAgZG9jRnJhZy5hcHBlbmRDaGlsZChpc05vZGUgPyBhcmdJdGVtIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU3RyaW5nKGFyZ0l0ZW0pKSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5pbnNlcnRCZWZvcmUoZG9jRnJhZywgdGhpcy5maXJzdENoaWxkKTsKICAgICAgfQogICAgfSk7CiAgfSk7Cn0pKFtFbGVtZW50LnByb3RvdHlwZSwgRG9jdW1lbnQucHJvdG90eXBlLCBEb2N1bWVudEZyYWdtZW50LnByb3RvdHlwZV0pOyAvLyBnZXRBdHRyaWJ1dGVOYW1lcwoKCmlmIChFbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOYW1lcyA9PSB1bmRlZmluZWQpIHsKICBFbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOYW1lcyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzOwogICAgdmFyIGxlbmd0aCA9IGF0dHJpYnV0ZXMubGVuZ3RoOwogICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheShsZW5ndGgpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0W2ldID0gYXR0cmlidXRlc1tpXS5uYW1lOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKfSAvLyBHbG9iYWwgdmFyaWFibGVzCgoKd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmUgPSB7fTsKd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmVJRCA9IDA7CndpbmRvdy5LVFV0aWxEZWxlZ2F0ZWRFdmVudEhhbmRsZXJzID0ge307Cgp2YXIgS1RVdGlsID0gZnVuY3Rpb24gKCkgewogIHZhciByZXNpemVIYW5kbGVycyA9IFtdOwogIC8qKiBAdHlwZSB7b2JqZWN0fSBicmVha3BvaW50cyBUaGUgZGV2aWNlIHdpZHRoIGJyZWFrcG9pbnRzICoqLwoKICB2YXIgYnJlYWtwb2ludHMgPSB7CiAgICBzbTogNTQ0LAogICAgLy8gU21hbGwgc2NyZWVuIC8gcGhvbmUKICAgIG1kOiA3NjgsCiAgICAvLyBNZWRpdW0gc2NyZWVuIC8gdGFibGV0CiAgICBsZzogOTkyLAogICAgLy8gTGFyZ2Ugc2NyZWVuIC8gZGVza3RvcAogICAgeGw6IDEyMDAgLy8gRXh0cmEgbGFyZ2Ugc2NyZWVuIC8gd2lkZSBkZXNrdG9wCgogIH07CiAgLyoqDQogICAqIEhhbmRsZSB3aW5kb3cgcmVzaXplIGV2ZW50IHdpdGggc29tZQ0KICAgKiBkZWxheSB0byBhdHRhY2ggZXZlbnQgaGFuZGxlcnMgdXBvbiByZXNpemUgY29tcGxldGUNCiAgICovCgogIHZhciBfd2luZG93UmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uIF93aW5kb3dSZXNpemVIYW5kbGVyKCkgewogICAgdmFyIF9ydW5SZXNpemVIYW5kbGVycyA9IGZ1bmN0aW9uIF9ydW5SZXNpemVIYW5kbGVycygpIHsKICAgICAgLy8gcmVpbml0aWFsaXplIG90aGVyIHN1YnNjcmliZWQgZWxlbWVudHMKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNpemVIYW5kbGVycy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBlYWNoID0gcmVzaXplSGFuZGxlcnNbaV07CiAgICAgICAgZWFjaC5jYWxsKCk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHRpbWVyOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsKICAgICAgS1RVdGlsLnRocm90dGxlKHRpbWVyLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgX3J1blJlc2l6ZUhhbmRsZXJzKCk7CiAgICAgIH0sIDIwMCk7CiAgICB9KTsKICB9OwoKICByZXR1cm4gewogICAgLyoqDQogICAgICogQ2xhc3MgbWFpbiBpbml0aWFsaXplci4NCiAgICAgKiBAcGFyYW0ge29iamVjdH0gc2V0dGluZ3MuDQogICAgICogQHJldHVybnMgbnVsbA0KICAgICAqLwogICAgLy9tYWluIGZ1bmN0aW9uIHRvIGluaXRpYXRlIHRoZSB0aGVtZQogICAgaW5pdDogZnVuY3Rpb24gaW5pdChzZXR0aW5ncykgewogICAgICBpZiAoc2V0dGluZ3MgJiYgc2V0dGluZ3MuYnJlYWtwb2ludHMpIHsKICAgICAgICBicmVha3BvaW50cyA9IHNldHRpbmdzLmJyZWFrcG9pbnRzOwogICAgICB9CgogICAgICBfd2luZG93UmVzaXplSGFuZGxlcigpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBBZGRzIHdpbmRvdyByZXNpemUgZXZlbnQgaGFuZGxlci4NCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbi4NCiAgICAgKi8KICAgIGFkZFJlc2l6ZUhhbmRsZXI6IGZ1bmN0aW9uIGFkZFJlc2l6ZUhhbmRsZXIoY2FsbGJhY2spIHsKICAgICAgcmVzaXplSGFuZGxlcnMucHVzaChjYWxsYmFjayk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFJlbW92ZXMgd2luZG93IHJlc2l6ZSBldmVudCBoYW5kbGVyLg0KICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uLg0KICAgICAqLwogICAgcmVtb3ZlUmVzaXplSGFuZGxlcjogZnVuY3Rpb24gcmVtb3ZlUmVzaXplSGFuZGxlcihjYWxsYmFjaykgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc2l6ZUhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGNhbGxiYWNrID09PSByZXNpemVIYW5kbGVyc1tpXSkgewogICAgICAgICAgZGVsZXRlIHJlc2l6ZUhhbmRsZXJzW2ldOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBUcmlnZ2VyIHdpbmRvdyByZXNpemUgaGFuZGxlcnMuDQogICAgICovCiAgICBydW5SZXNpemVIYW5kbGVyczogZnVuY3Rpb24gcnVuUmVzaXplSGFuZGxlcnMoKSB7CiAgICAgIF9ydW5SZXNpemVIYW5kbGVycygpOwogICAgfSwKICAgIHJlc2l6ZTogZnVuY3Rpb24gcmVzaXplKCkgewogICAgICBpZiAodHlwZW9mIEV2ZW50ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgLy8gbW9kZXJuIGJyb3dzZXJzCiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gZm9yIElFIGFuZCBvdGhlciBvbGQgYnJvd3NlcnMKICAgICAgICAvLyBjYXVzZXMgZGVwcmVjYXRpb24gd2FybmluZyBvbiBtb2Rlcm4gYnJvd3NlcnMKICAgICAgICB2YXIgZXZ0ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUV2ZW50KCdVSUV2ZW50cycpOwogICAgICAgIGV2dC5pbml0VUlFdmVudCgncmVzaXplJywgdHJ1ZSwgZmFsc2UsIHdpbmRvdywgMCk7CiAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZ0KTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBHZXQgR0VUIHBhcmFtZXRlciB2YWx1ZSBmcm9tIFVSTC4NCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1OYW1lIFBhcmFtZXRlciBuYW1lLg0KICAgICAqIEByZXR1cm5zIHtzdHJpbmd9DQogICAgICovCiAgICBnZXRVUkxQYXJhbTogZnVuY3Rpb24gZ2V0VVJMUGFyYW0ocGFyYW1OYW1lKSB7CiAgICAgIHZhciBzZWFyY2hTdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSwKICAgICAgICAgIGksCiAgICAgICAgICB2YWwsCiAgICAgICAgICBwYXJhbXMgPSBzZWFyY2hTdHJpbmcuc3BsaXQoIiYiKTsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YWwgPSBwYXJhbXNbaV0uc3BsaXQoIj0iKTsKCiAgICAgICAgaWYgKHZhbFswXSA9PSBwYXJhbU5hbWUpIHsKICAgICAgICAgIHJldHVybiB1bmVzY2FwZSh2YWxbMV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIENoZWNrcyB3aGV0aGVyIGN1cnJlbnQgZGV2aWNlIGlzIG1vYmlsZSB0b3VjaC4NCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGlzTW9iaWxlRGV2aWNlOiBmdW5jdGlvbiBpc01vYmlsZURldmljZSgpIHsKICAgICAgdmFyIHRlc3QgPSB0aGlzLmdldFZpZXdQb3J0KCkud2lkdGggPCB0aGlzLmdldEJyZWFrcG9pbnQoJ2xnJykgPyB0cnVlIDogZmFsc2U7CgogICAgICBpZiAodGVzdCA9PT0gZmFsc2UpIHsKICAgICAgICAvLyBGb3IgdXNlIHdpdGhpbiBub3JtYWwgd2ViIGNsaWVudHMKICAgICAgICB0ZXN0ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvaVBhZC9pKSAhPSBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gdGVzdDsKICAgIH0sCgogICAgLyoqDQogICAgICogQ2hlY2tzIHdoZXRoZXIgY3VycmVudCBkZXZpY2UgaXMgZGVza3RvcC4NCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGlzRGVza3RvcERldmljZTogZnVuY3Rpb24gaXNEZXNrdG9wRGV2aWNlKCkgewogICAgICByZXR1cm4gS1RVdGlsLmlzTW9iaWxlRGV2aWNlKCkgPyBmYWxzZSA6IHRydWU7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEdldHMgYnJvd3NlciB3aW5kb3cgdmlld3BvcnQgc2l6ZS4gUmVmOg0KICAgICAqIGh0dHA6Ly9hbmR5bGFuZ3Rvbi5jby51ay9hcnRpY2xlcy9qYXZhc2NyaXB0L2dldC12aWV3cG9ydC1zaXplLWphdmFzY3JpcHQvDQogICAgICogQHJldHVybnMge29iamVjdH0NCiAgICAgKi8KICAgIGdldFZpZXdQb3J0OiBmdW5jdGlvbiBnZXRWaWV3UG9ydCgpIHsKICAgICAgdmFyIGUgPSB3aW5kb3csCiAgICAgICAgICBhID0gJ2lubmVyJzsKCiAgICAgIGlmICghKCdpbm5lcldpZHRoJyBpbiB3aW5kb3cpKSB7CiAgICAgICAgYSA9ICdjbGllbnQnOwogICAgICAgIGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuYm9keTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogZVthICsgJ1dpZHRoJ10sCiAgICAgICAgaGVpZ2h0OiBlW2EgKyAnSGVpZ2h0J10KICAgICAgfTsKICAgIH0sCgogICAgLyoqDQogICAgICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gZGV2aWNlIG1vZGUgaXMgY3VycmVudGx5IGFjdGl2YXRlZC4NCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSBSZXNwb25zaXZlIG1vZGUgbmFtZShlLmc6IGRlc2t0b3AsDQogICAgICogICAgIGRlc2t0b3AtYW5kLXRhYmxldCwgdGFibGV0LCB0YWJsZXQtYW5kLW1vYmlsZSwgbW9iaWxlKQ0KICAgICAqIEByZXR1cm5zIHtib29sZWFufQ0KICAgICAqLwogICAgaXNJblJlc3BvbnNpdmVSYW5nZTogZnVuY3Rpb24gaXNJblJlc3BvbnNpdmVSYW5nZShtb2RlKSB7CiAgICAgIHZhciBicmVha3BvaW50ID0gdGhpcy5nZXRWaWV3UG9ydCgpLndpZHRoOwoKICAgICAgaWYgKG1vZGUgPT0gJ2dlbmVyYWwnKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PSAnZGVza3RvcCcgJiYgYnJlYWtwb2ludCA+PSB0aGlzLmdldEJyZWFrcG9pbnQoJ2xnJykgKyAxKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAobW9kZSA9PSAndGFibGV0JyAmJiBicmVha3BvaW50ID49IHRoaXMuZ2V0QnJlYWtwb2ludCgnbWQnKSArIDEgJiYgYnJlYWtwb2ludCA8IHRoaXMuZ2V0QnJlYWtwb2ludCgnbGcnKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gJ21vYmlsZScgJiYgYnJlYWtwb2ludCA8PSB0aGlzLmdldEJyZWFrcG9pbnQoJ21kJykpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChtb2RlID09ICdkZXNrdG9wLWFuZC10YWJsZXQnICYmIGJyZWFrcG9pbnQgPj0gdGhpcy5nZXRCcmVha3BvaW50KCdtZCcpICsgMSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gJ3RhYmxldC1hbmQtbW9iaWxlJyAmJiBicmVha3BvaW50IDw9IHRoaXMuZ2V0QnJlYWtwb2ludCgnbGcnKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgaWYgKG1vZGUgPT0gJ21pbmltYWwtZGVza3RvcC1hbmQtYmVsb3cnICYmIGJyZWFrcG9pbnQgPD0gdGhpcy5nZXRCcmVha3BvaW50KCd4bCcpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCgogICAgLyoqDQogICAgICAgICAgICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gZGV2aWNlIG1vZGUgaXMgY3VycmVudGx5IGFjdGl2YXRlZC4NCiAgICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSBSZXNwb25zaXZlIG1vZGUgbmFtZShlLmc6IGRlc2t0b3AsDQogICAgICAgICAgICogICAgIGRlc2t0b3AtYW5kLXRhYmxldCwgdGFibGV0LCB0YWJsZXQtYW5kLW1vYmlsZSwgbW9iaWxlKQ0KICAgICAgICAgICAqIEByZXR1cm5zIHtib29sZWFufQ0KICAgICAgICAgICAqLwogICAgaXNCcmVha3BvaW50VXA6IGZ1bmN0aW9uIGlzQnJlYWtwb2ludFVwKG1vZGUpIHsKICAgICAgdmFyIHdpZHRoID0gdGhpcy5nZXRWaWV3UG9ydCgpLndpZHRoOwogICAgICB2YXIgYnJlYWtwb2ludCA9IHRoaXMuZ2V0QnJlYWtwb2ludChtb2RlKTsKICAgICAgcmV0dXJuIHdpZHRoID49IGJyZWFrcG9pbnQ7CiAgICB9LAogICAgaXNCcmVha3BvaW50RG93bjogZnVuY3Rpb24gaXNCcmVha3BvaW50RG93bihtb2RlKSB7CiAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0Vmlld1BvcnQoKS53aWR0aDsKICAgICAgdmFyIGJyZWFrcG9pbnQgPSB0aGlzLmdldEJyZWFrcG9pbnQobW9kZSk7CiAgICAgIHJldHVybiB3aWR0aCA8IGJyZWFrcG9pbnQ7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEdlbmVyYXRlcyB1bmlxdWUgSUQgZm9yIGdpdmUgcHJlZml4Lg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcmVmaXggUHJlZml4IGZvciBnZW5lcmF0ZWQgSUQNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGdldFVuaXF1ZUlEOiBmdW5jdGlvbiBnZXRVbmlxdWVJRChwcmVmaXgpIHsKICAgICAgcmV0dXJuIHByZWZpeCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG5ldyBEYXRlKCkuZ2V0VGltZSgpKTsKICAgIH0sCgogICAgLyoqDQogICAgICogR2V0cyB3aW5kb3cgd2lkdGggZm9yIGdpdmUgYnJlYWtwb2ludCBtb2RlLg0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIFJlc3BvbnNpdmUgbW9kZSBuYW1lKGUuZzogeGwsIGxnLCBtZCwgc20pDQogICAgICogQHJldHVybnMge251bWJlcn0NCiAgICAgKi8KICAgIGdldEJyZWFrcG9pbnQ6IGZ1bmN0aW9uIGdldEJyZWFrcG9pbnQobW9kZSkgewogICAgICByZXR1cm4gYnJlYWtwb2ludHNbbW9kZV07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIENoZWNrcyB3aGV0aGVyIG9iamVjdCBoYXMgcHJvcGVydHkgbWF0Y2hzIGdpdmVuIGtleSBwYXRoLg0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvYmogT2JqZWN0IGNvbnRhaW5zIHZhbHVlcyBwYWlyZWQgd2l0aCBnaXZlbiBrZXkgcGF0aA0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlzIEtleXMgcGF0aCBzZXBlcmF0ZWQgd2l0aCBkb3RzDQogICAgICogQHJldHVybnMge29iamVjdH0NCiAgICAgKi8KICAgIGlzc2V0OiBmdW5jdGlvbiBpc3NldChvYmosIGtleXMpIHsKICAgICAgdmFyIHN0b25lOwogICAgICBrZXlzID0ga2V5cyB8fCAnJzsKCiAgICAgIGlmIChrZXlzLmluZGV4T2YoJ1snKSAhPT0gLTEpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIG9iamVjdCBwYXRoIG5vdGF0aW9uLicpOwogICAgICB9CgogICAgICBrZXlzID0ga2V5cy5zcGxpdCgnLicpOwoKICAgICAgZG8gewogICAgICAgIGlmIChvYmogPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgc3RvbmUgPSBrZXlzLnNoaWZ0KCk7CgogICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KHN0b25lKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgb2JqID0gb2JqW3N0b25lXTsKICAgICAgfSB3aGlsZSAoa2V5cy5sZW5ndGgpOwoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEdldHMgaGlnaGVzdCB6LWluZGV4IG9mIHRoZSBnaXZlbiBlbGVtZW50IHBhcmVudHMNCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZWwgalF1ZXJ5IGVsZW1lbnQgb2JqZWN0DQogICAgICogQHJldHVybnMge251bWJlcn0NCiAgICAgKi8KICAgIGdldEhpZ2hlc3RaaW5kZXg6IGZ1bmN0aW9uIGdldEhpZ2hlc3RaaW5kZXgoZWwpIHsKICAgICAgdmFyIHBvc2l0aW9uLCB2YWx1ZTsKCiAgICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gZG9jdW1lbnQpIHsKICAgICAgICAvLyBJZ25vcmUgei1pbmRleCBpZiBwb3NpdGlvbiBpcyBzZXQgdG8gYSB2YWx1ZSB3aGVyZSB6LWluZGV4IGlzIGlnbm9yZWQgYnkgdGhlIGJyb3dzZXIKICAgICAgICAvLyBUaGlzIG1ha2VzIGJlaGF2aW9yIG9mIHRoaXMgZnVuY3Rpb24gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnMKICAgICAgICAvLyBXZWJLaXQgYWx3YXlzIHJldHVybnMgYXV0byBpZiB0aGUgZWxlbWVudCBpcyBwb3NpdGlvbmVkCiAgICAgICAgcG9zaXRpb24gPSBLVFV0aWwuY3NzKGVsLCAncG9zaXRpb24nKTsKCiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAiYWJzb2x1dGUiIHx8IHBvc2l0aW9uID09PSAicmVsYXRpdmUiIHx8IHBvc2l0aW9uID09PSAiZml4ZWQiKSB7CiAgICAgICAgICAvLyBJRSByZXR1cm5zIDAgd2hlbiB6SW5kZXggaXMgbm90IHNwZWNpZmllZAogICAgICAgICAgLy8gb3RoZXIgYnJvd3NlcnMgcmV0dXJuIGEgc3RyaW5nCiAgICAgICAgICAvLyB3ZSBpZ25vcmUgdGhlIGNhc2Ugb2YgbmVzdGVkIGVsZW1lbnRzIHdpdGggYW4gZXhwbGljaXQgdmFsdWUgb2YgMAogICAgICAgICAgLy8gPGRpdiBzdHlsZT0iei1pbmRleDogLTEwOyI+PGRpdiBzdHlsZT0iei1pbmRleDogMDsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgdmFsdWUgPSBwYXJzZUludChLVFV0aWwuY3NzKGVsLCAnei1pbmRleCcpKTsKCiAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSAhPT0gMCkgewogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDaGVja3Mgd2hldGhlciB0aGUgZWxlbWVudCBoYXMgYW55IHBhcmVudCB3aXRoIGZpeGVkIHBvc2l0aW9uZnJlZw0KICAgICAqIEBwYXJhbSB7b2JqZWN0fSBlbCBqUXVlcnkgZWxlbWVudCBvYmplY3QNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGhhc0ZpeGVkUG9zaXRpb25lZFBhcmVudDogZnVuY3Rpb24gaGFzRml4ZWRQb3NpdGlvbmVkUGFyZW50KGVsKSB7CiAgICAgIHZhciBwb3NpdGlvbjsKCiAgICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gZG9jdW1lbnQpIHsKICAgICAgICBwb3NpdGlvbiA9IEtUVXRpbC5jc3MoZWwsICdwb3NpdGlvbicpOwoKICAgICAgICBpZiAocG9zaXRpb24gPT09ICJmaXhlZCIpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFNpbXVsYXRlcyBkZWxheQ0KICAgICAqLwogICAgc2xlZXA6IGZ1bmN0aW9uIHNsZWVwKG1pbGxpc2Vjb25kcykgewogICAgICB2YXIgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMWU3OyBpKyspIHsKICAgICAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydCA+IG1pbGxpc2Vjb25kcykgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEdldHMgcmFuZG9tbHkgZ2VuZXJhdGVkIGludGVnZXIgdmFsdWUgd2l0aGluIGdpdmVuIG1pbiBhbmQgbWF4IHJhbmdlDQogICAgICogQHBhcmFtIHtudW1iZXJ9IG1pbiBSYW5nZSBzdGFydCB2YWx1ZQ0KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXggUmFuZ2UgZW5kIHZhbHVlDQogICAgICogQHJldHVybnMge251bWJlcn0NCiAgICAgKi8KICAgIGdldFJhbmRvbUludDogZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDaGVja3Mgd2hldGhlciBBbmd1bGFyIGxpYnJhcnkgaXMgaW5jbHVkZWQNCiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0NCiAgICAgKi8KICAgIGlzQW5ndWxhclZlcnNpb246IGZ1bmN0aW9uIGlzQW5ndWxhclZlcnNpb24oKSB7CiAgICAgIHJldHVybiB3aW5kb3cuWm9uZSAhPT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGZhbHNlOwogICAgfSwKICAgIC8vIERlZXAgZXh0ZW5kOiAgJC5leHRlbmQodHJ1ZSwge30sIG9iakEsIG9iakIpOwogICAgZGVlcEV4dGVuZDogZnVuY3Rpb24gZGVlcEV4dGVuZChvdXQpIHsKICAgICAgb3V0ID0gb3V0IHx8IHt9OwoKICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgb2JqID0gYXJndW1lbnRzW2ldOwogICAgICAgIGlmICghb2JqKSBjb250aW51ZTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gLy8gYmFzZWQgb24gaHR0cHM6Ly9qYXZhc2NyaXB0d2VibG9nLndvcmRwcmVzcy5jb20vMjAxMS8wOC8wOC9maXhpbmctdGhlLWphdmFzY3JpcHQtdHlwZW9mLW9wZXJhdG9yLwoKCiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9ialtrZXldKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHsKICAgICAgICAgICAgb3V0W2tleV0gPSBLVFV0aWwuZGVlcEV4dGVuZChvdXRba2V5XSwgb2JqW2tleV0pOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBvdXRba2V5XSA9IG9ialtrZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICAvLyBleHRlbmQ6ICAkLmV4dGVuZCh7fSwgb2JqQSwgb2JqQik7CiAgICBleHRlbmQ6IGZ1bmN0aW9uIGV4dGVuZChvdXQpIHsKICAgICAgb3V0ID0gb3V0IHx8IHt9OwoKICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoIWFyZ3VtZW50c1tpXSkgY29udGludWU7CgogICAgICAgIGZvciAodmFyIGtleSBpbiBhcmd1bWVudHNbaV0pIHsKICAgICAgICAgIGlmIChhcmd1bWVudHNbaV0uaGFzT3duUHJvcGVydHkoa2V5KSkgb3V0W2tleV0gPSBhcmd1bWVudHNbaV1ba2V5XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgZ2V0QnlJZDogZnVuY3Rpb24gZ2V0QnlJZChlbCkgewogICAgICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGVsOwogICAgICB9CiAgICB9LAogICAgZ2V0QnlUYWc6IGZ1bmN0aW9uIGdldEJ5VGFnKHF1ZXJ5KSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShxdWVyeSk7CiAgICB9LAogICAgZ2V0QnlUYWdOYW1lOiBmdW5jdGlvbiBnZXRCeVRhZ05hbWUocXVlcnkpIHsKICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHF1ZXJ5KTsKICAgIH0sCiAgICBnZXRCeUNsYXNzOiBmdW5jdGlvbiBnZXRCeUNsYXNzKHF1ZXJ5KSB7CiAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHF1ZXJ5KTsKICAgIH0sCiAgICBnZXRCb2R5OiBmdW5jdGlvbiBnZXRCb2R5KCkgewogICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTsKICAgIH0sCgogICAgLyoqDQogICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGVsZW1lbnQgaGFzIGdpdmVuIGNsYXNzZXMNCiAgICAgKiBAcGFyYW0ge29iamVjdH0gZWwgalF1ZXJ5IGVsZW1lbnQgb2JqZWN0DQogICAgICogQHBhcmFtIHtzdHJpbmd9IENsYXNzZXMgc3RyaW5nDQogICAgICogQHJldHVybnMge2Jvb2xlYW59DQogICAgICovCiAgICBoYXNDbGFzc2VzOiBmdW5jdGlvbiBoYXNDbGFzc2VzKGVsLCBjbGFzc2VzKSB7CiAgICAgIGlmICghZWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBjbGFzc2VzQXJyID0gY2xhc3Nlcy5zcGxpdCgiICIpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc2VzQXJyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKEtUVXRpbC5oYXNDbGFzcyhlbCwgS1RVdGlsLnRyaW0oY2xhc3Nlc0FycltpXSkpID09IGZhbHNlKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBoYXNDbGFzczogZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgICBpZiAoIWVsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXR1cm4gZWwuY2xhc3NMaXN0ID8gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkgOiBuZXcgUmVnRXhwKCdcXGInICsgY2xhc3NOYW1lICsgJ1xcYicpLnRlc3QoZWwuY2xhc3NOYW1lKTsKICAgIH0sCiAgICBhZGRDbGFzczogZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgICBpZiAoIWVsIHx8IHR5cGVvZiBjbGFzc05hbWUgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgY2xhc3NOYW1lcyA9IGNsYXNzTmFtZS5zcGxpdCgnICcpOwoKICAgICAgaWYgKGVsLmNsYXNzTGlzdCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xhc3NOYW1lcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGNsYXNzTmFtZXNbaV0gJiYgY2xhc3NOYW1lc1tpXS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoS1RVdGlsLnRyaW0oY2xhc3NOYW1lc1tpXSkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICghS1RVdGlsLmhhc0NsYXNzKGVsLCBjbGFzc05hbWUpKSB7CiAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBjbGFzc05hbWVzLmxlbmd0aDsgeCsrKSB7CiAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgS1RVdGlsLnRyaW0oY2xhc3NOYW1lc1t4XSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbGFzc05hbWUpIHsKICAgICAgaWYgKCFlbCB8fCB0eXBlb2YgY2xhc3NOYW1lID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGNsYXNzTmFtZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTsKCiAgICAgIGlmIChlbC5jbGFzc0xpc3QpIHsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsYXNzTmFtZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoS1RVdGlsLnRyaW0oY2xhc3NOYW1lc1tpXSkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChLVFV0aWwuaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkpIHsKICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IGNsYXNzTmFtZXMubGVuZ3RoOyB4KyspIHsKICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcYicgKyBLVFV0aWwudHJpbShjbGFzc05hbWVzW3hdKSArICdcXGInLCAnZycpLCAnJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgdHJpZ2dlckN1c3RvbUV2ZW50OiBmdW5jdGlvbiB0cmlnZ2VyQ3VzdG9tRXZlbnQoZWwsIGV2ZW50TmFtZSwgZGF0YSkgewogICAgICB2YXIgZXZlbnQ7CgogICAgICBpZiAod2luZG93LkN1c3RvbUV2ZW50KSB7CiAgICAgICAgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7CiAgICAgICAgICBkZXRhaWw6IGRhdGEKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpOwogICAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudChldmVudE5hbWUsIHRydWUsIHRydWUsIGRhdGEpOwogICAgICB9CgogICAgICBlbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgIH0sCiAgICB0cmlnZ2VyRXZlbnQ6IGZ1bmN0aW9uIHRyaWdnZXJFdmVudChub2RlLCBldmVudE5hbWUpIHsKICAgICAgLy8gTWFrZSBzdXJlIHdlIHVzZSB0aGUgb3duZXJEb2N1bWVudCBmcm9tIHRoZSBwcm92aWRlZCBub2RlIHRvIGF2b2lkIGNyb3NzLXdpbmRvdyBwcm9ibGVtcwogICAgICB2YXIgZG9jOwoKICAgICAgaWYgKG5vZGUub3duZXJEb2N1bWVudCkgewogICAgICAgIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudDsKICAgICAgfSBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDkpIHsKICAgICAgICAvLyB0aGUgbm9kZSBtYXkgYmUgdGhlIGRvY3VtZW50IGl0c2VsZiwgbm9kZVR5cGUgOSA9IERPQ1VNRU5UX05PREUKICAgICAgICBkb2MgPSBub2RlOwogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBub2RlIHBhc3NlZCB0byBmaXJlRXZlbnQ6ICIgKyBub2RlLmlkKTsKICAgICAgfQoKICAgICAgaWYgKG5vZGUuZGlzcGF0Y2hFdmVudCkgewogICAgICAgIC8vIEdlY2tvLXN0eWxlIGFwcHJvYWNoIChub3cgdGhlIHN0YW5kYXJkKSB0YWtlcyBtb3JlIHdvcmsKICAgICAgICB2YXIgZXZlbnRDbGFzcyA9ICIiOyAvLyBEaWZmZXJlbnQgZXZlbnRzIGhhdmUgZGlmZmVyZW50IGV2ZW50IGNsYXNzZXMuCiAgICAgICAgLy8gSWYgdGhpcyBzd2l0Y2ggc3RhdGVtZW50IGNhbid0IG1hcCBhbiBldmVudE5hbWUgdG8gYW4gZXZlbnRDbGFzcywKICAgICAgICAvLyB0aGUgZXZlbnQgZmlyaW5nIGlzIGdvaW5nIHRvIGZhaWwuCgogICAgICAgIHN3aXRjaCAoZXZlbnROYW1lKSB7CiAgICAgICAgICBjYXNlICJjbGljayI6IC8vIERpc3BhdGNoaW5nIG9mICdjbGljaycgYXBwZWFycyB0byBub3Qgd29yayBjb3JyZWN0bHkgaW4gU2FmYXJpLiBVc2UgJ21vdXNlZG93bicgb3IgJ21vdXNldXAnIGluc3RlYWQuCgogICAgICAgICAgY2FzZSAibW91c2VlbnRlciI6CiAgICAgICAgICBjYXNlICJtb3VzZWxlYXZlIjoKICAgICAgICAgIGNhc2UgIm1vdXNlZG93biI6CiAgICAgICAgICBjYXNlICJtb3VzZXVwIjoKICAgICAgICAgICAgZXZlbnRDbGFzcyA9ICJNb3VzZUV2ZW50cyI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgImZvY3VzIjoKICAgICAgICAgIGNhc2UgImNoYW5nZSI6CiAgICAgICAgICBjYXNlICJibHVyIjoKICAgICAgICAgIGNhc2UgInNlbGVjdCI6CiAgICAgICAgICAgIGV2ZW50Q2xhc3MgPSAiSFRNTEV2ZW50cyI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHRocm93ICJmaXJlRXZlbnQ6IENvdWxkbid0IGZpbmQgYW4gZXZlbnQgY2xhc3MgZm9yIGV2ZW50ICciICsgZXZlbnROYW1lICsgIicuIjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICB2YXIgZXZlbnQgPSBkb2MuY3JlYXRlRXZlbnQoZXZlbnRDbGFzcyk7CiAgICAgICAgdmFyIGJ1YmJsZXMgPSBldmVudE5hbWUgPT0gImNoYW5nZSIgPyBmYWxzZSA6IHRydWU7CiAgICAgICAgZXZlbnQuaW5pdEV2ZW50KGV2ZW50TmFtZSwgYnViYmxlcywgdHJ1ZSk7IC8vIEFsbCBldmVudHMgY3JlYXRlZCBhcyBidWJibGluZyBhbmQgY2FuY2VsYWJsZS4KCiAgICAgICAgZXZlbnQuc3ludGhldGljID0gdHJ1ZTsgLy8gYWxsb3cgZGV0ZWN0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMKICAgICAgICAvLyBUaGUgc2Vjb25kIHBhcmFtZXRlciBzYXlzIGdvIGFoZWFkIHdpdGggdGhlIGRlZmF1bHQgYWN0aW9uCgogICAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCwgdHJ1ZSk7CiAgICAgIH0gZWxzZSBpZiAobm9kZS5maXJlRXZlbnQpIHsKICAgICAgICAvLyBJRS1vbGQgc2Nob29sIHN0eWxlCiAgICAgICAgdmFyIGV2ZW50ID0gZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KCk7CiAgICAgICAgZXZlbnQuc3ludGhldGljID0gdHJ1ZTsgLy8gYWxsb3cgZGV0ZWN0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMKCiAgICAgICAgbm9kZS5maXJlRXZlbnQoIm9uIiArIGV2ZW50TmFtZSwgZXZlbnQpOwogICAgICB9CiAgICB9LAogICAgaW5kZXg6IGZ1bmN0aW9uIGluZGV4KGVsKSB7CiAgICAgIHZhciBjID0gZWwucGFyZW50Tm9kZS5jaGlsZHJlbiwKICAgICAgICAgIGkgPSAwOwoKICAgICAgZm9yICg7IGkgPCBjLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKGNbaV0gPT0gZWwpIHJldHVybiBpOwogICAgICB9CiAgICB9LAogICAgdHJpbTogZnVuY3Rpb24gdHJpbShzdHJpbmcpIHsKICAgICAgcmV0dXJuIHN0cmluZy50cmltKCk7CiAgICB9LAogICAgZXZlbnRUcmlnZ2VyZWQ6IGZ1bmN0aW9uIGV2ZW50VHJpZ2dlcmVkKGUpIHsKICAgICAgaWYgKGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnRyaWdnZXJlZCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnRyaWdnZXJlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoZWwpIHsKICAgICAgaWYgKGVsICYmIGVsLnBhcmVudE5vZGUpIHsKICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTsKICAgICAgfQogICAgfSwKICAgIGZpbmQ6IGZ1bmN0aW9uIGZpbmQocGFyZW50LCBxdWVyeSkgewogICAgICBwYXJlbnQgPSBLVFV0aWwuZ2V0QnlJZChwYXJlbnQpOwoKICAgICAgaWYgKHBhcmVudCkgewogICAgICAgIHJldHVybiBwYXJlbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7CiAgICAgIH0KICAgIH0sCiAgICBmaW5kQWxsOiBmdW5jdGlvbiBmaW5kQWxsKHBhcmVudCwgcXVlcnkpIHsKICAgICAgcGFyZW50ID0gS1RVdGlsLmdldEJ5SWQocGFyZW50KTsKCiAgICAgIGlmIChwYXJlbnQpIHsKICAgICAgICByZXR1cm4gcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpOwogICAgICB9CiAgICB9LAogICAgaW5zZXJ0QWZ0ZXI6IGZ1bmN0aW9uIGluc2VydEFmdGVyKGVsLCByZWZlcmVuY2VOb2RlKSB7CiAgICAgIHJldHVybiByZWZlcmVuY2VOb2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCByZWZlcmVuY2VOb2RlLm5leHRTaWJsaW5nKTsKICAgIH0sCiAgICBwYXJlbnRzOiBmdW5jdGlvbiBwYXJlbnRzKGVsZW0sIHNlbGVjdG9yKSB7CiAgICAgIC8vIEVsZW1lbnQubWF0Y2hlcygpIHBvbHlmaWxsCiAgICAgIGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykgewogICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLm9NYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICB2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSwKICAgICAgICAgICAgICBpID0gbWF0Y2hlcy5sZW5ndGg7CgogICAgICAgICAgd2hpbGUgKC0taSA+PSAwICYmIG1hdGNoZXMuaXRlbShpKSAhPT0gdGhpcykge30KCiAgICAgICAgICByZXR1cm4gaSA+IC0xOwogICAgICAgIH07CiAgICAgIH0gLy8gU2V0IHVwIGEgcGFyZW50IGFycmF5CgoKICAgICAgdmFyIHBhcmVudHMgPSBbXTsgLy8gUHVzaCBlYWNoIHBhcmVudCBlbGVtZW50IHRvIHRoZSBhcnJheQoKICAgICAgZm9yICg7IGVsZW0gJiYgZWxlbSAhPT0gZG9jdW1lbnQ7IGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpIHsKICAgICAgICBpZiAoc2VsZWN0b3IpIHsKICAgICAgICAgIGlmIChlbGVtLm1hdGNoZXMoc2VsZWN0b3IpKSB7CiAgICAgICAgICAgIHBhcmVudHMucHVzaChlbGVtKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIHBhcmVudHMucHVzaChlbGVtKTsKICAgICAgfSAvLyBSZXR1cm4gb3VyIHBhcmVudCBhcnJheQoKCiAgICAgIHJldHVybiBwYXJlbnRzOwogICAgfSwKICAgIGNoaWxkcmVuOiBmdW5jdGlvbiBjaGlsZHJlbihlbCwgc2VsZWN0b3IsIGxvZykgewogICAgICBpZiAoIWVsIHx8ICFlbC5jaGlsZE5vZGVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgcmVzdWx0ID0gW10sCiAgICAgICAgICBpID0gMCwKICAgICAgICAgIGwgPSBlbC5jaGlsZE5vZGVzLmxlbmd0aDsKCiAgICAgIGZvciAodmFyIGk7IGkgPCBsOyArK2kpIHsKICAgICAgICBpZiAoZWwuY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSA9PSAxICYmIEtUVXRpbC5tYXRjaGVzKGVsLmNoaWxkTm9kZXNbaV0sIHNlbGVjdG9yLCBsb2cpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChlbC5jaGlsZE5vZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgY2hpbGQ6IGZ1bmN0aW9uIGNoaWxkKGVsLCBzZWxlY3RvciwgbG9nKSB7CiAgICAgIHZhciBjaGlsZHJlbiA9IEtUVXRpbC5jaGlsZHJlbihlbCwgc2VsZWN0b3IsIGxvZyk7CiAgICAgIHJldHVybiBjaGlsZHJlbiA/IGNoaWxkcmVuWzBdIDogbnVsbDsKICAgIH0sCiAgICBtYXRjaGVzOiBmdW5jdGlvbiBtYXRjaGVzKGVsLCBzZWxlY3RvciwgbG9nKSB7CiAgICAgIHZhciBwID0gRWxlbWVudC5wcm90b3R5cGU7CgogICAgICB2YXIgZiA9IHAubWF0Y2hlcyB8fCBwLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBwLm1vek1hdGNoZXNTZWxlY3RvciB8fCBwLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IGZ1bmN0aW9uIChzKSB7CiAgICAgICAgcmV0dXJuIFtdLmluZGV4T2YuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHMpLCB0aGlzKSAhPT0gLTE7CiAgICAgIH07CgogICAgICBpZiAoZWwgJiYgZWwudGFnTmFtZSkgewogICAgICAgIHJldHVybiBmLmNhbGwoZWwsIHNlbGVjdG9yKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKGVsKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQobmFtZSwgZGF0YSkgewogICAgICAgICAgaWYgKCFlbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGVsLmN1c3RvbURhdGFUYWcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICB3aW5kb3cuS1RVdGlsRWxlbWVudERhdGFTdG9yZUlEKys7CiAgICAgICAgICAgIGVsLmN1c3RvbURhdGFUYWcgPSB3aW5kb3cuS1RVdGlsRWxlbWVudERhdGFTdG9yZUlEOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh3aW5kb3cuS1RVdGlsRWxlbWVudERhdGFTdG9yZVtlbC5jdXN0b21EYXRhVGFnXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHdpbmRvdy5LVFV0aWxFbGVtZW50RGF0YVN0b3JlW2VsLmN1c3RvbURhdGFUYWddID0ge307CiAgICAgICAgICB9CgogICAgICAgICAgd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmVbZWwuY3VzdG9tRGF0YVRhZ11bbmFtZV0gPSBkYXRhOwogICAgICAgIH0sCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQobmFtZSkgewogICAgICAgICAgaWYgKCFlbCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGVsLmN1c3RvbURhdGFUYWcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB3aW5kb3cuS1RVdGlsRWxlbWVudERhdGFTdG9yZVtlbC5jdXN0b21EYXRhVGFnXVtuYW1lXSA6IG51bGw7CiAgICAgICAgfSwKICAgICAgICBoYXM6IGZ1bmN0aW9uIGhhcyhuYW1lKSB7CiAgICAgICAgICBpZiAoIWVsKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZWwuY3VzdG9tRGF0YVRhZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmVbZWwuY3VzdG9tRGF0YVRhZ10gJiYgd2luZG93LktUVXRpbEVsZW1lbnREYXRhU3RvcmVbZWwuY3VzdG9tRGF0YVRhZ11bbmFtZV0gPyB0cnVlIDogZmFsc2U7CiAgICAgICAgfSwKICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7CiAgICAgICAgICBpZiAoZWwgJiYgdGhpcy5oYXMobmFtZSkpIHsKICAgICAgICAgICAgZGVsZXRlIHdpbmRvdy5LVFV0aWxFbGVtZW50RGF0YVN0b3JlW2VsLmN1c3RvbURhdGFUYWddW25hbWVdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBvdXRlcldpZHRoOiBmdW5jdGlvbiBvdXRlcldpZHRoKGVsLCBtYXJnaW4pIHsKICAgICAgdmFyIHdpZHRoOwoKICAgICAgaWYgKG1hcmdpbiA9PT0gdHJ1ZSkgewogICAgICAgIHdpZHRoID0gcGFyc2VGbG9hdChlbC5vZmZzZXRXaWR0aCk7CiAgICAgICAgd2lkdGggKz0gcGFyc2VGbG9hdChLVFV0aWwuY3NzKGVsLCAnbWFyZ2luLWxlZnQnKSkgKyBwYXJzZUZsb2F0KEtUVXRpbC5jc3MoZWwsICdtYXJnaW4tcmlnaHQnKSk7CiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQod2lkdGgpOwogICAgICB9IGVsc2UgewogICAgICAgIHdpZHRoID0gcGFyc2VGbG9hdChlbC5vZmZzZXRXaWR0aCk7CiAgICAgICAgcmV0dXJuIHdpZHRoOwogICAgICB9CiAgICB9LAogICAgb2Zmc2V0OiBmdW5jdGlvbiBvZmZzZXQoZWwpIHsKICAgICAgdmFyIHJlY3QsIHdpbjsKCiAgICAgIGlmICghZWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gUmV0dXJuIHplcm9zIGZvciBkaXNjb25uZWN0ZWQgYW5kIGhpZGRlbiAoZGlzcGxheTogbm9uZSkgZWxlbWVudHMgKGdoLTIzMTApCiAgICAgIC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seQogICAgICAvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhCiAgICAgIC8vIGRpc2Nvbm5lY3RlZCBub2RlIGluIElFIHRocm93cyBhbiBlcnJvcgoKCiAgICAgIGlmICghZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdG9wOiAwLAogICAgICAgICAgbGVmdDogMAogICAgICAgIH07CiAgICAgIH0gLy8gR2V0IGRvY3VtZW50LXJlbGF0aXZlIHBvc2l0aW9uIGJ5IGFkZGluZyB2aWV3cG9ydCBzY3JvbGwgdG8gdmlld3BvcnQtcmVsYXRpdmUgZ0JDUgoKCiAgICAgIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgd2luID0gZWwub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3A6IHJlY3QudG9wICsgd2luLnBhZ2VZT2Zmc2V0LAogICAgICAgIGxlZnQ6IHJlY3QubGVmdCArIHdpbi5wYWdlWE9mZnNldAogICAgICB9OwogICAgfSwKICAgIGhlaWdodDogZnVuY3Rpb24gaGVpZ2h0KGVsKSB7CiAgICAgIHJldHVybiBLVFV0aWwuY3NzKGVsLCAnaGVpZ2h0Jyk7CiAgICB9LAogICAgb3V0ZXJIZWlnaHQ6IGZ1bmN0aW9uIG91dGVySGVpZ2h0KGVsLCB3aXRoTWFyZ2luKSB7CiAgICAgIHZhciBoZWlnaHQgPSBlbC5vZmZzZXRIZWlnaHQ7CiAgICAgIHZhciBzdHlsZTsKCiAgICAgIGlmICh0eXBlb2Ygd2l0aE1hcmdpbiAhPT0gJ3VuZGVmaW5lZCcgJiYgd2l0aE1hcmdpbiA9PT0gdHJ1ZSkgewogICAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCk7CiAgICAgICAgaGVpZ2h0ICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpblRvcCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5Cb3R0b20pOwogICAgICAgIHJldHVybiBoZWlnaHQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGhlaWdodDsKICAgICAgfQogICAgfSwKICAgIHZpc2libGU6IGZ1bmN0aW9uIHZpc2libGUoZWwpIHsKICAgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggPT09IDAgJiYgZWwub2Zmc2V0SGVpZ2h0ID09PSAwKTsKICAgIH0sCiAgICBhdHRyOiBmdW5jdGlvbiBhdHRyKGVsLCBuYW1lLCB2YWx1ZSkgewogICAgICBpZiAoZWwgPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGVsLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZShuYW1lKTsKICAgICAgfQogICAgfSwKICAgIGhhc0F0dHI6IGZ1bmN0aW9uIGhhc0F0dHIoZWwsIG5hbWUpIHsKICAgICAgaWYgKGVsID09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmV0dXJuIGVsLmdldEF0dHJpYnV0ZShuYW1lKSA/IHRydWUgOiBmYWxzZTsKICAgIH0sCiAgICByZW1vdmVBdHRyOiBmdW5jdGlvbiByZW1vdmVBdHRyKGVsLCBuYW1lKSB7CiAgICAgIGlmIChlbCA9PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgIH0sCiAgICBhbmltYXRlOiBmdW5jdGlvbiBhbmltYXRlKGZyb20sIHRvLCBkdXJhdGlvbiwgdXBkYXRlLCBlYXNpbmcsIGRvbmUpIHsKICAgICAgLyoqDQogICAgICAgKiBUaW55QW5pbWF0ZS5lYXNpbmdzDQogICAgICAgKiAgQWRhcHRlZCBmcm9tIGpRdWVyeSBFYXNpbmcNCiAgICAgICAqLwogICAgICB2YXIgZWFzaW5ncyA9IHt9OwogICAgICB2YXIgZWFzaW5nOwoKICAgICAgZWFzaW5ncy5saW5lYXIgPSBmdW5jdGlvbiAodCwgYiwgYywgZCkgewogICAgICAgIHJldHVybiBjICogdCAvIGQgKyBiOwogICAgICB9OwoKICAgICAgZWFzaW5nID0gZWFzaW5ncy5saW5lYXI7IC8vIEVhcmx5IGJhaWwgb3V0IGlmIGNhbGxlZCBpbmNvcnJlY3RseQoKICAgICAgaWYgKHR5cGVvZiBmcm9tICE9PSAnbnVtYmVyJyB8fCB0eXBlb2YgdG8gIT09ICdudW1iZXInIHx8IHR5cGVvZiBkdXJhdGlvbiAhPT0gJ251bWJlcicgfHwgdHlwZW9mIHVwZGF0ZSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDcmVhdGUgbW9jayBkb25lKCkgZnVuY3Rpb24gaWYgbmVjZXNzYXJ5CgoKICAgICAgaWYgKHR5cGVvZiBkb25lICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgZG9uZSA9IGZ1bmN0aW9uIGRvbmUoKSB7fTsKICAgICAgfSAvLyBQaWNrIGltcGxlbWVudGF0aW9uIChyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfCBzZXRUaW1lb3V0KQoKCiAgICAgIHZhciByQUYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uIChjYWxsYmFjaykgewogICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGNhbGxiYWNrLCAxMDAwIC8gNTApOwogICAgICB9OyAvLyBBbmltYXRpb24gbG9vcAoKCiAgICAgIHZhciBjYW5jZWxlZCA9IGZhbHNlOwogICAgICB2YXIgY2hhbmdlID0gdG8gLSBmcm9tOwoKICAgICAgZnVuY3Rpb24gbG9vcCh0aW1lc3RhbXApIHsKICAgICAgICB2YXIgdGltZSA9ICh0aW1lc3RhbXAgfHwgK25ldyBEYXRlKCkpIC0gc3RhcnQ7CgogICAgICAgIGlmICh0aW1lID49IDApIHsKICAgICAgICAgIHVwZGF0ZShlYXNpbmcodGltZSwgZnJvbSwgY2hhbmdlLCBkdXJhdGlvbikpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRpbWUgPj0gMCAmJiB0aW1lID49IGR1cmF0aW9uKSB7CiAgICAgICAgICB1cGRhdGUodG8pOwogICAgICAgICAgZG9uZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByQUYobG9vcCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB1cGRhdGUoZnJvbSk7IC8vIFN0YXJ0IGFuaW1hdGlvbiBsb29wCgogICAgICB2YXIgc3RhcnQgPSB3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5vdyA/IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSA6ICtuZXcgRGF0ZSgpOwogICAgICByQUYobG9vcCk7CiAgICB9LAogICAgYWN0dWFsQ3NzOiBmdW5jdGlvbiBhY3R1YWxDc3MoZWwsIHByb3AsIGNhY2hlKSB7CiAgICAgIHZhciBjc3MgPSAnJzsKCiAgICAgIGlmIChlbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFlbC5nZXRBdHRyaWJ1dGUoJ2t0LWhpZGRlbi0nICsgcHJvcCkgfHwgY2FjaGUgPT09IGZhbHNlKSB7CiAgICAgICAgdmFyIHZhbHVlOyAvLyB0aGUgZWxlbWVudCBpcyBoaWRkZW4gc286CiAgICAgICAgLy8gbWFraW5nIHRoZSBlbCBibG9jayBzbyB3ZSBjYW4gbWVhc3N1cmUgaXRzIGhlaWdodCBidXQgc3RpbGwgYmUgaGlkZGVuCgogICAgICAgIGNzcyA9IGVsLnN0eWxlLmNzc1RleHQ7CiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9ICdwb3NpdGlvbjogYWJzb2x1dGU7IHZpc2liaWxpdHk6IGhpZGRlbjsgZGlzcGxheTogYmxvY2s7JzsKCiAgICAgICAgaWYgKHByb3AgPT0gJ3dpZHRoJykgewogICAgICAgICAgdmFsdWUgPSBlbC5vZmZzZXRXaWR0aDsKICAgICAgICB9IGVsc2UgaWYgKHByb3AgPT0gJ2hlaWdodCcpIHsKICAgICAgICAgIHZhbHVlID0gZWwub2Zmc2V0SGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IGNzczsgLy8gc3RvcmUgaXQgaW4gY2FjaGUKCiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdrdC1oaWRkZW4tJyArIHByb3AsIHZhbHVlKTsKICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gc3RvcmUgaXQgaW4gY2FjaGUKICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChlbC5nZXRBdHRyaWJ1dGUoJ2t0LWhpZGRlbi0nICsgcHJvcCkpOwogICAgICB9CiAgICB9LAogICAgYWN0dWFsSGVpZ2h0OiBmdW5jdGlvbiBhY3R1YWxIZWlnaHQoZWwsIGNhY2hlKSB7CiAgICAgIHJldHVybiBLVFV0aWwuYWN0dWFsQ3NzKGVsLCAnaGVpZ2h0JywgY2FjaGUpOwogICAgfSwKICAgIGFjdHVhbFdpZHRoOiBmdW5jdGlvbiBhY3R1YWxXaWR0aChlbCwgY2FjaGUpIHsKICAgICAgcmV0dXJuIEtUVXRpbC5hY3R1YWxDc3MoZWwsICd3aWR0aCcsIGNhY2hlKTsKICAgIH0sCiAgICBnZXRTY3JvbGw6IGZ1bmN0aW9uIGdldFNjcm9sbChlbGVtZW50LCBtZXRob2QpIHsKICAgICAgLy8gVGhlIHBhc3NlZCBpbiBgbWV0aG9kYCB2YWx1ZSBzaG91bGQgYmUgJ1RvcCcgb3IgJ0xlZnQnCiAgICAgIG1ldGhvZCA9ICdzY3JvbGwnICsgbWV0aG9kOwogICAgICByZXR1cm4gZWxlbWVudCA9PSB3aW5kb3cgfHwgZWxlbWVudCA9PSBkb2N1bWVudCA/IHNlbGZbbWV0aG9kID09ICdzY3JvbGxUb3AnID8gJ3BhZ2VZT2Zmc2V0JyA6ICdwYWdlWE9mZnNldCddIHx8IGJyb3dzZXJTdXBwb3J0c0JveE1vZGVsICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFttZXRob2RdIHx8IGRvY3VtZW50LmJvZHlbbWV0aG9kXSA6IGVsZW1lbnRbbWV0aG9kXTsKICAgIH0sCiAgICBjc3M6IGZ1bmN0aW9uIGNzcyhlbCwgc3R5bGVQcm9wLCB2YWx1ZSkgewogICAgICBpZiAoIWVsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGVsLnN0eWxlW3N0eWxlUHJvcF0gPSB2YWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgZGVmYXVsdFZpZXcgPSAoZWwub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCkuZGVmYXVsdFZpZXc7IC8vIFczQyBzdGFuZGFyZCB3YXk6CgogICAgICAgIGlmIChkZWZhdWx0VmlldyAmJiBkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKSB7CiAgICAgICAgICAvLyBzYW5pdGl6ZSBwcm9wZXJ0eSBuYW1lIHRvIGNzcyBub3RhdGlvbgogICAgICAgICAgLy8gKGh5cGhlbiBzZXBhcmF0ZWQgd29yZHMgZWcuIGZvbnQtU2l6ZSkKICAgICAgICAgIHN0eWxlUHJvcCA9IHN0eWxlUHJvcC5yZXBsYWNlKC8oW0EtWl0pL2csICItJDEiKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgcmV0dXJuIGRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoc3R5bGVQcm9wKTsKICAgICAgICB9IGVsc2UgaWYgKGVsLmN1cnJlbnRTdHlsZSkgewogICAgICAgICAgLy8gSUUKICAgICAgICAgIC8vIHNhbml0aXplIHByb3BlcnR5IG5hbWUgdG8gY2FtZWxDYXNlCiAgICAgICAgICBzdHlsZVByb3AgPSBzdHlsZVByb3AucmVwbGFjZSgvXC0oXHcpL2csIGZ1bmN0aW9uIChzdHIsIGxldHRlcikgewogICAgICAgICAgICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhbHVlID0gZWwuY3VycmVudFN0eWxlW3N0eWxlUHJvcF07IC8vIGNvbnZlcnQgb3RoZXIgdW5pdHMgdG8gcGl4ZWxzIG9uIElFCgogICAgICAgICAgaWYgKC9eXGQrKGVtfHB0fCV8ZXgpPyQvaS50ZXN0KHZhbHVlKSkgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgICAgdmFyIG9sZExlZnQgPSBlbC5zdHlsZS5sZWZ0LAogICAgICAgICAgICAgICAgICBvbGRSc0xlZnQgPSBlbC5ydW50aW1lU3R5bGUubGVmdDsKICAgICAgICAgICAgICBlbC5ydW50aW1lU3R5bGUubGVmdCA9IGVsLmN1cnJlbnRTdHlsZS5sZWZ0OwogICAgICAgICAgICAgIGVsLnN0eWxlLmxlZnQgPSB2YWx1ZSB8fCAwOwogICAgICAgICAgICAgIHZhbHVlID0gZWwuc3R5bGUucGl4ZWxMZWZ0ICsgInB4IjsKICAgICAgICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gb2xkTGVmdDsKICAgICAgICAgICAgICBlbC5ydW50aW1lU3R5bGUubGVmdCA9IG9sZFJzTGVmdDsKICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgIH0odmFsdWUpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzbGlkZTogZnVuY3Rpb24gc2xpZGUoZWwsIGRpciwgc3BlZWQsIGNhbGxiYWNrLCByZWNhbGNNYXhIZWlnaHQpIHsKICAgICAgaWYgKCFlbCB8fCBkaXIgPT0gJ3VwJyAmJiBLVFV0aWwudmlzaWJsZShlbCkgPT09IGZhbHNlIHx8IGRpciA9PSAnZG93bicgJiYgS1RVdGlsLnZpc2libGUoZWwpID09PSB0cnVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzcGVlZCA9IHNwZWVkID8gc3BlZWQgOiA2MDA7CiAgICAgIHZhciBjYWxjSGVpZ2h0ID0gS1RVdGlsLmFjdHVhbEhlaWdodChlbCk7CiAgICAgIHZhciBjYWxjUGFkZGluZ1RvcCA9IGZhbHNlOwogICAgICB2YXIgY2FsY1BhZGRpbmdCb3R0b20gPSBmYWxzZTsKCiAgICAgIGlmIChLVFV0aWwuY3NzKGVsLCAncGFkZGluZy10b3AnKSAmJiBLVFV0aWwuZGF0YShlbCkuaGFzKCdzbGlkZS1wYWRkaW5nLXRvcCcpICE9PSB0cnVlKSB7CiAgICAgICAgS1RVdGlsLmRhdGEoZWwpLnNldCgnc2xpZGUtcGFkZGluZy10b3AnLCBLVFV0aWwuY3NzKGVsLCAncGFkZGluZy10b3AnKSk7CiAgICAgIH0KCiAgICAgIGlmIChLVFV0aWwuY3NzKGVsLCAncGFkZGluZy1ib3R0b20nKSAmJiBLVFV0aWwuZGF0YShlbCkuaGFzKCdzbGlkZS1wYWRkaW5nLWJvdHRvbScpICE9PSB0cnVlKSB7CiAgICAgICAgS1RVdGlsLmRhdGEoZWwpLnNldCgnc2xpZGUtcGFkZGluZy1ib3R0b20nLCBLVFV0aWwuY3NzKGVsLCAncGFkZGluZy1ib3R0b20nKSk7CiAgICAgIH0KCiAgICAgIGlmIChLVFV0aWwuZGF0YShlbCkuaGFzKCdzbGlkZS1wYWRkaW5nLXRvcCcpKSB7CiAgICAgICAgY2FsY1BhZGRpbmdUb3AgPSBwYXJzZUludChLVFV0aWwuZGF0YShlbCkuZ2V0KCdzbGlkZS1wYWRkaW5nLXRvcCcpKTsKICAgICAgfQoKICAgICAgaWYgKEtUVXRpbC5kYXRhKGVsKS5oYXMoJ3NsaWRlLXBhZGRpbmctYm90dG9tJykpIHsKICAgICAgICBjYWxjUGFkZGluZ0JvdHRvbSA9IHBhcnNlSW50KEtUVXRpbC5kYXRhKGVsKS5nZXQoJ3NsaWRlLXBhZGRpbmctYm90dG9tJykpOwogICAgICB9CgogICAgICBpZiAoZGlyID09ICd1cCcpIHsKICAgICAgICAvLyB1cAogICAgICAgIGVsLnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47JzsKCiAgICAgICAgaWYgKGNhbGNQYWRkaW5nVG9wKSB7CiAgICAgICAgICBLVFV0aWwuYW5pbWF0ZSgwLCBjYWxjUGFkZGluZ1RvcCwgc3BlZWQsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nVG9wID0gY2FsY1BhZGRpbmdUb3AgLSB2YWx1ZSArICdweCc7CiAgICAgICAgICB9LCAnbGluZWFyJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY2FsY1BhZGRpbmdCb3R0b20pIHsKICAgICAgICAgIEtUVXRpbC5hbmltYXRlKDAsIGNhbGNQYWRkaW5nQm90dG9tLCBzcGVlZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBjYWxjUGFkZGluZ0JvdHRvbSAtIHZhbHVlICsgJ3B4JzsKICAgICAgICAgIH0sICdsaW5lYXInKTsKICAgICAgICB9CgogICAgICAgIEtUVXRpbC5hbmltYXRlKDAsIGNhbGNIZWlnaHQsIHNwZWVkLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IGNhbGNIZWlnaHQgLSB2YWx1ZSArICdweCc7CiAgICAgICAgfSwgJ2xpbmVhcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICcnOwogICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCiAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoZGlyID09ICdkb3duJykgewogICAgICAgIC8vIGRvd24KICAgICAgICBlbC5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogaGlkZGVuOyc7CgogICAgICAgIGlmIChjYWxjUGFkZGluZ1RvcCkgewogICAgICAgICAgS1RVdGlsLmFuaW1hdGUoMCwgY2FsY1BhZGRpbmdUb3AsIHNwZWVkLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ1RvcCA9IHZhbHVlICsgJ3B4JzsKICAgICAgICAgIH0sICdsaW5lYXInLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnBhZGRpbmdUb3AgPSAnJzsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNhbGNQYWRkaW5nQm90dG9tKSB7CiAgICAgICAgICBLVFV0aWwuYW5pbWF0ZSgwLCBjYWxjUGFkZGluZ0JvdHRvbSwgc3BlZWQsIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICBlbC5zdHlsZS5wYWRkaW5nQm90dG9tID0gdmFsdWUgKyAncHgnOwogICAgICAgICAgfSwgJ2xpbmVhcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZWwuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcnOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBLVFV0aWwuYW5pbWF0ZSgwLCBjYWxjSGVpZ2h0LCBzcGVlZCwgZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSB2YWx1ZSArICdweCc7CiAgICAgICAgfSwgJ2xpbmVhcicsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9ICcnOwogICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgICAgZWwuc3R5bGUub3ZlcmZsb3cgPSAnJzsKCiAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzbGlkZVVwOiBmdW5jdGlvbiBzbGlkZVVwKGVsLCBzcGVlZCwgY2FsbGJhY2spIHsKICAgICAgS1RVdGlsLnNsaWRlKGVsLCAndXAnLCBzcGVlZCwgY2FsbGJhY2spOwogICAgfSwKICAgIHNsaWRlRG93bjogZnVuY3Rpb24gc2xpZGVEb3duKGVsLCBzcGVlZCwgY2FsbGJhY2spIHsKICAgICAgS1RVdGlsLnNsaWRlKGVsLCAnZG93bicsIHNwZWVkLCBjYWxsYmFjayk7CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24gc2hvdyhlbCwgZGlzcGxheSkgewogICAgICBpZiAodHlwZW9mIGVsICE9PSAndW5kZWZpbmVkJykgewogICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5ID8gZGlzcGxheSA6ICdibG9jayc7CiAgICAgIH0KICAgIH0sCiAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKGVsKSB7CiAgICAgIGlmICh0eXBlb2YgZWwgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgfQogICAgfSwKICAgIGFkZEV2ZW50OiBmdW5jdGlvbiBhZGRFdmVudChlbCwgdHlwZSwgaGFuZGxlciwgb25lKSB7CiAgICAgIGlmICh0eXBlb2YgZWwgIT09ICd1bmRlZmluZWQnICYmIGVsICE9PSBudWxsKSB7CiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZUV2ZW50OiBmdW5jdGlvbiByZW1vdmVFdmVudChlbCwgdHlwZSwgaGFuZGxlcikgewogICAgICBpZiAoZWwgIT09IG51bGwpIHsKICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpOwogICAgICB9CiAgICB9LAogICAgb246IGZ1bmN0aW9uIG9uKGVsZW1lbnQsIHNlbGVjdG9yLCBldmVudCwgaGFuZGxlcikgewogICAgICBpZiAoIXNlbGVjdG9yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZXZlbnRJZCA9IEtUVXRpbC5nZXRVbmlxdWVJRCgnZXZlbnQnKTsKCiAgICAgIHdpbmRvdy5LVFV0aWxEZWxlZ2F0ZWRFdmVudEhhbmRsZXJzW2V2ZW50SWRdID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdGFyZ2V0cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0OwoKICAgICAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldCAhPT0gZWxlbWVudCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSB0YXJnZXRzLmxlbmd0aDsgaSA8IGo7IGkrKykgewogICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB0YXJnZXRzW2ldKSB7CiAgICAgICAgICAgICAgaGFuZGxlci5jYWxsKHRhcmdldCwgZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBLVFV0aWwuYWRkRXZlbnQoZWxlbWVudCwgZXZlbnQsIHdpbmRvdy5LVFV0aWxEZWxlZ2F0ZWRFdmVudEhhbmRsZXJzW2V2ZW50SWRdKTsKICAgICAgcmV0dXJuIGV2ZW50SWQ7CiAgICB9LAogICAgb2ZmOiBmdW5jdGlvbiBvZmYoZWxlbWVudCwgZXZlbnQsIGV2ZW50SWQpIHsKICAgICAgaWYgKCFlbGVtZW50IHx8ICF3aW5kb3cuS1RVdGlsRGVsZWdhdGVkRXZlbnRIYW5kbGVyc1tldmVudElkXSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgS1RVdGlsLnJlbW92ZUV2ZW50KGVsZW1lbnQsIGV2ZW50LCB3aW5kb3cuS1RVdGlsRGVsZWdhdGVkRXZlbnRIYW5kbGVyc1tldmVudElkXSk7CiAgICAgIGRlbGV0ZSB3aW5kb3cuS1RVdGlsRGVsZWdhdGVkRXZlbnRIYW5kbGVyc1tldmVudElkXTsKICAgIH0sCiAgICBvbmU6IGZ1bmN0aW9uIG9uZXRpbWUoZWwsIHR5cGUsIGNhbGxiYWNrKSB7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuY3Rpb24gY2FsbGVlKGUpIHsKICAgICAgICAvLyByZW1vdmUgZXZlbnQKICAgICAgICBpZiAoZS50YXJnZXQgJiYgZS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcikgewogICAgICAgICAgZS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLnR5cGUsIGNhbGxlZSk7CiAgICAgICAgfSAvLyBuZWVkIHRvIHZlcmlmeSBmcm9tIGh0dHBzOi8vdGhlbWVmb3Jlc3QubmV0L2F1dGhvcl9kYXNoYm9hcmQjY29tbWVudF8yMzYxNTU4OAoKCiAgICAgICAgaWYgKGVsICYmIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHsKICAgICAgICAgIGUuY3VycmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSwgY2FsbGVlKTsKICAgICAgICB9IC8vIGNhbGwgaGFuZGxlcgoKCiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGUpOwogICAgICB9KTsKICAgIH0sCiAgICBoYXNoOiBmdW5jdGlvbiBoYXNoKHN0cikgewogICAgICB2YXIgaGFzaCA9IDAsCiAgICAgICAgICBpLAogICAgICAgICAgY2hyOwogICAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGhhc2g7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY2hyID0gc3RyLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgaGFzaCA9IChoYXNoIDw8IDUpIC0gaGFzaCArIGNocjsKICAgICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlcgogICAgICB9CgogICAgICByZXR1cm4gaGFzaDsKICAgIH0sCiAgICBhbmltYXRlQ2xhc3M6IGZ1bmN0aW9uIGFuaW1hdGVDbGFzcyhlbCwgYW5pbWF0aW9uTmFtZSwgY2FsbGJhY2spIHsKICAgICAgdmFyIGFuaW1hdGlvbjsKICAgICAgdmFyIGFuaW1hdGlvbnMgPSB7CiAgICAgICAgYW5pbWF0aW9uOiAnYW5pbWF0aW9uZW5kJywKICAgICAgICBPQW5pbWF0aW9uOiAnb0FuaW1hdGlvbkVuZCcsCiAgICAgICAgTW96QW5pbWF0aW9uOiAnbW96QW5pbWF0aW9uRW5kJywKICAgICAgICBXZWJraXRBbmltYXRpb246ICd3ZWJraXRBbmltYXRpb25FbmQnLAogICAgICAgIG1zQW5pbWF0aW9uOiAnbXNBbmltYXRpb25FbmQnCiAgICAgIH07CgogICAgICBmb3IgKHZhciB0IGluIGFuaW1hdGlvbnMpIHsKICAgICAgICBpZiAoZWwuc3R5bGVbdF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgYW5pbWF0aW9uID0gYW5pbWF0aW9uc1t0XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIEtUVXRpbC5hZGRDbGFzcyhlbCwgJ2FuaW1hdGVkICcgKyBhbmltYXRpb25OYW1lKTsKICAgICAgS1RVdGlsLm9uZShlbCwgYW5pbWF0aW9uLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgS1RVdGlsLnJlbW92ZUNsYXNzKGVsLCAnYW5pbWF0ZWQgJyArIGFuaW1hdGlvbk5hbWUpOwogICAgICB9KTsKCiAgICAgIGlmIChjYWxsYmFjaykgewogICAgICAgIEtUVXRpbC5vbmUoZWwsIGFuaW1hdGlvbiwgY2FsbGJhY2spOwogICAgICB9CiAgICB9LAogICAgdHJhbnNpdGlvbkVuZDogZnVuY3Rpb24gdHJhbnNpdGlvbkVuZChlbCwgY2FsbGJhY2spIHsKICAgICAgdmFyIHRyYW5zaXRpb247CiAgICAgIHZhciB0cmFuc2l0aW9ucyA9IHsKICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcsCiAgICAgICAgT1RyYW5zaXRpb246ICdvVHJhbnNpdGlvbkVuZCcsCiAgICAgICAgTW96VHJhbnNpdGlvbjogJ21velRyYW5zaXRpb25FbmQnLAogICAgICAgIFdlYmtpdFRyYW5zaXRpb246ICd3ZWJraXRUcmFuc2l0aW9uRW5kJywKICAgICAgICBtc1RyYW5zaXRpb246ICdtc1RyYW5zaXRpb25FbmQnCiAgICAgIH07CgogICAgICBmb3IgKHZhciB0IGluIHRyYW5zaXRpb25zKSB7CiAgICAgICAgaWYgKGVsLnN0eWxlW3RdICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRyYW5zaXRpb24gPSB0cmFuc2l0aW9uc1t0XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIEtUVXRpbC5vbmUoZWwsIHRyYW5zaXRpb24sIGNhbGxiYWNrKTsKICAgIH0sCiAgICBhbmltYXRpb25FbmQ6IGZ1bmN0aW9uIGFuaW1hdGlvbkVuZChlbCwgY2FsbGJhY2spIHsKICAgICAgdmFyIGFuaW1hdGlvbjsKICAgICAgdmFyIGFuaW1hdGlvbnMgPSB7CiAgICAgICAgYW5pbWF0aW9uOiAnYW5pbWF0aW9uZW5kJywKICAgICAgICBPQW5pbWF0aW9uOiAnb0FuaW1hdGlvbkVuZCcsCiAgICAgICAgTW96QW5pbWF0aW9uOiAnbW96QW5pbWF0aW9uRW5kJywKICAgICAgICBXZWJraXRBbmltYXRpb246ICd3ZWJraXRBbmltYXRpb25FbmQnLAogICAgICAgIG1zQW5pbWF0aW9uOiAnbXNBbmltYXRpb25FbmQnCiAgICAgIH07CgogICAgICBmb3IgKHZhciB0IGluIGFuaW1hdGlvbnMpIHsKICAgICAgICBpZiAoZWwuc3R5bGVbdF0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgYW5pbWF0aW9uID0gYW5pbWF0aW9uc1t0XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIEtUVXRpbC5vbmUoZWwsIGFuaW1hdGlvbiwgY2FsbGJhY2spOwogICAgfSwKICAgIGFuaW1hdGVEZWxheTogZnVuY3Rpb24gYW5pbWF0ZURlbGF5KGVsLCB2YWx1ZSkgewogICAgICB2YXIgdmVuZG9ycyA9IFsnd2Via2l0LScsICdtb3otJywgJ21zLScsICdvLScsICcnXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVuZG9ycy5sZW5ndGg7IGkrKykgewogICAgICAgIEtUVXRpbC5jc3MoZWwsIHZlbmRvcnNbaV0gKyAnYW5pbWF0aW9uLWRlbGF5JywgdmFsdWUpOwogICAgICB9CiAgICB9LAogICAgYW5pbWF0ZUR1cmF0aW9uOiBmdW5jdGlvbiBhbmltYXRlRHVyYXRpb24oZWwsIHZhbHVlKSB7CiAgICAgIHZhciB2ZW5kb3JzID0gWyd3ZWJraXQtJywgJ21vei0nLCAnbXMtJywgJ28tJywgJyddOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZW5kb3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgS1RVdGlsLmNzcyhlbCwgdmVuZG9yc1tpXSArICdhbmltYXRpb24tZHVyYXRpb24nLCB2YWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxUbzogZnVuY3Rpb24gc2Nyb2xsVG8odGFyZ2V0LCBvZmZzZXQsIGR1cmF0aW9uKSB7CiAgICAgIHZhciBkdXJhdGlvbiA9IGR1cmF0aW9uID8gZHVyYXRpb24gOiA1MDA7CiAgICAgIHZhciB0YXJnZXRQb3MgPSB0YXJnZXQgPyBLVFV0aWwub2Zmc2V0KHRhcmdldCkudG9wIDogMDsKICAgICAgdmFyIHNjcm9sbFBvcyA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7CiAgICAgIHZhciBmcm9tLCB0bzsKCiAgICAgIGlmIChvZmZzZXQpIHsKICAgICAgICBzY3JvbGxQb3MgKz0gb2Zmc2V0OwogICAgICB9CgogICAgICBmcm9tID0gc2Nyb2xsUG9zOwogICAgICB0byA9IHRhcmdldFBvczsKICAgICAgS1RVdGlsLmFuaW1hdGUoZnJvbSwgdG8sIGR1cmF0aW9uLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gdmFsdWU7CiAgICAgICAgZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbFRvcCA9IHZhbHVlOwogICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gdmFsdWU7CiAgICAgIH0pOyAvLywgZWFzaW5nLCBkb25lCiAgICB9LAogICAgc2Nyb2xsVG9wOiBmdW5jdGlvbiBzY3JvbGxUb3Aob2Zmc2V0LCBkdXJhdGlvbikgewogICAgICBLVFV0aWwuc2Nyb2xsVG8obnVsbCwgb2Zmc2V0LCBkdXJhdGlvbik7CiAgICB9LAogICAgaXNBcnJheTogZnVuY3Rpb24gaXNBcnJheShvYmopIHsKICAgICAgcmV0dXJuIG9iaiAmJiBBcnJheS5pc0FycmF5KG9iaik7CiAgICB9LAogICAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KGNhbGxiYWNrKSB7CiAgICAgIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCA/IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICJjb21wbGV0ZSIgOiBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAibG9hZGluZyIpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjYWxsYmFjayk7CiAgICAgIH0KICAgIH0sCiAgICBpc0VtcHR5OiBmdW5jdGlvbiBpc0VtcHR5KG9iaikgewogICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikgewogICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocHJvcCkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIG51bWJlclN0cmluZzogZnVuY3Rpb24gbnVtYmVyU3RyaW5nKG5TdHIpIHsKICAgICAgblN0ciArPSAnJzsKICAgICAgdmFyIHggPSBuU3RyLnNwbGl0KCcuJyk7CiAgICAgIHZhciB4MSA9IHhbMF07CiAgICAgIHZhciB4MiA9IHgubGVuZ3RoID4gMSA/ICcuJyArIHhbMV0gOiAnJzsKICAgICAgdmFyIHJneCA9IC8oXGQrKShcZHszfSkvOwoKICAgICAgd2hpbGUgKHJneC50ZXN0KHgxKSkgewogICAgICAgIHgxID0geDEucmVwbGFjZShyZ3gsICckMScgKyAnLCcgKyAnJDInKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHgxICsgeDI7CiAgICB9LAogICAgZGV0ZWN0SUU6IGZ1bmN0aW9uIGRldGVjdElFKCkgewogICAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDsgLy8gVGVzdCB2YWx1ZXM7IFVuY29tbWVudCB0byBjaGVjayByZXN1bHQg4oCmCiAgICAgIC8vIElFIDEwCiAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknOwogICAgICAvLyBJRSAxMQogICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJzsKICAgICAgLy8gRWRnZSAxMiAoU3BhcnRhbikKICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnOwogICAgICAvLyBFZGdlIDEzCiAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS80Ni4wLjI0ODYuMCBTYWZhcmkvNTM3LjM2IEVkZ2UvMTMuMTA1ODYnOwoKICAgICAgdmFyIG1zaWUgPSB1YS5pbmRleE9mKCdNU0lFICcpOwoKICAgICAgaWYgKG1zaWUgPiAwKSB7CiAgICAgICAgLy8gSUUgMTAgb3Igb2xkZXIgPT4gcmV0dXJuIHZlcnNpb24gbnVtYmVyCiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHVhLnN1YnN0cmluZyhtc2llICsgNSwgdWEuaW5kZXhPZignLicsIG1zaWUpKSwgMTApOwogICAgICB9CgogICAgICB2YXIgdHJpZGVudCA9IHVhLmluZGV4T2YoJ1RyaWRlbnQvJyk7CgogICAgICBpZiAodHJpZGVudCA+IDApIHsKICAgICAgICAvLyBJRSAxMSA9PiByZXR1cm4gdmVyc2lvbiBudW1iZXIKICAgICAgICB2YXIgcnYgPSB1YS5pbmRleE9mKCdydjonKTsKICAgICAgICByZXR1cm4gcGFyc2VJbnQodWEuc3Vic3RyaW5nKHJ2ICsgMywgdWEuaW5kZXhPZignLicsIHJ2KSksIDEwKTsKICAgICAgfQoKICAgICAgdmFyIGVkZ2UgPSB1YS5pbmRleE9mKCdFZGdlLycpOwoKICAgICAgaWYgKGVkZ2UgPiAwKSB7CiAgICAgICAgLy8gRWRnZSAoSUUgMTIrKSA9PiByZXR1cm4gdmVyc2lvbiBudW1iZXIKICAgICAgICByZXR1cm4gcGFyc2VJbnQodWEuc3Vic3RyaW5nKGVkZ2UgKyA1LCB1YS5pbmRleE9mKCcuJywgZWRnZSkpLCAxMCk7CiAgICAgIH0gLy8gb3RoZXIgYnJvd3NlcgoKCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBpc1JUTDogZnVuY3Rpb24gaXNSVEwoKSB7CiAgICAgIHZhciBodG1sID0gS1RVdGlsLmdldEJ5VGFnTmFtZSgnaHRtbCcpWzBdOwoKICAgICAgaWYgKGh0bWwpIHsKICAgICAgICByZXR1cm4gS1RVdGlsLmF0dHIoaHRtbCwgJ2RpcmVjdGlvbicpID09ICdydGwnOwogICAgICB9CiAgICB9LAogICAgLy8gU2Nyb2xsZXIKICAgIHNjcm9sbEluaXQ6IGZ1bmN0aW9uIHNjcm9sbEluaXQoZWxlbWVudCwgb3B0aW9ucykgewogICAgICBpZiAoIWVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gTGVhcm4gbW9yZTogaHR0cHM6Ly9naXRodWIuY29tL21kYm9vdHN0cmFwL3BlcmZlY3Qtc2Nyb2xsYmFyI29wdGlvbnMKCgogICAgICB2YXIgcGx1Z2luRGVmT3B0aW9ucyA9IHsKICAgICAgICB3aGVlbFNwZWVkOiAwLjUsCiAgICAgICAgc3dpcGVFYXNpbmc6IHRydWUsCiAgICAgICAgd2hlZWxQcm9wYWdhdGlvbjogZmFsc2UsCiAgICAgICAgbWluU2Nyb2xsYmFyTGVuZ3RoOiA0MCwKICAgICAgICBtYXhTY3JvbGxiYXJMZW5ndGg6IDMwMCwKICAgICAgICBzdXBwcmVzc1Njcm9sbFg6IHRydWUKICAgICAgfTsKICAgICAgb3B0aW9ucyA9IEtUVXRpbC5kZWVwRXh0ZW5kKHt9LCBwbHVnaW5EZWZPcHRpb25zLCBvcHRpb25zKTsgLy8gRGVmaW5lIGluaXQgZnVuY3Rpb24KCiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgICAgdmFyIHBzOwogICAgICAgIHZhciBoZWlnaHQ7IC8vIEdldCBleHRyYSBvcHRpb25zIHZpYSBkYXRhIGF0dHJpYnV0ZXMKCiAgICAgICAgdmFyIGF0dHJzID0gZWxlbWVudC5nZXRBdHRyaWJ1dGVOYW1lcygpOwoKICAgICAgICBpZiAoYXR0cnMubGVuZ3RoID4gMCkgewogICAgICAgICAgYXR0cnMuZm9yRWFjaChmdW5jdGlvbiAoYXR0ck5hbWUpIHsKICAgICAgICAgICAgLy8gbW9yZSBvcHRpb25zOyBodHRwczovL2dpdGh1Yi5jb20vZ2FubGFueXVhbi90aW55LXNsaWRlciNvcHRpb25zCiAgICAgICAgICAgIGlmICgvXmRhdGEtLiovZy50ZXN0KGF0dHJOYW1lKSkgewogICAgICAgICAgICAgIGlmIChbJ3Njcm9sbCcsICdoZWlnaHQnLCAnbW9iaWxlLWhlaWdodCddLmluY2x1ZGVzKG9wdGlvbk5hbWUpID09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uTmFtZSA9IGF0dHJOYW1lLnJlcGxhY2UoJ2RhdGEtJywgJycpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvKD86W1xzLV0pXHcvZywgZnVuY3Rpb24gKG1hdGNoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKCctJywgJycpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG9wdGlvbnNbb3B0aW9uTmFtZV0gPSBLVFV0aWwuZmlsdGVyQm9vbGVhbihlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyTmFtZSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5oZWlnaHQgaW5zdGFuY2VvZiBGdW5jdGlvbikgewogICAgICAgICAgaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQuY2FsbCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoS1RVdGlsLmlzTW9iaWxlRGV2aWNlKCkgPT09IHRydWUgJiYgb3B0aW9ucy5tb2JpbGVIZWlnaHQpIHsKICAgICAgICAgICAgaGVpZ2h0ID0gcGFyc2VJbnQob3B0aW9ucy5tb2JpbGVIZWlnaHQpOwogICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmhlaWdodCkgewogICAgICAgICAgICBoZWlnaHQgPSBwYXJzZUludChvcHRpb25zLmhlaWdodCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoZWlnaHQgPSBwYXJzZUludChLVFV0aWwuY3NzKGVsZW1lbnQsICdoZWlnaHQnKSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoaGVpZ2h0ID09PSBmYWxzZSkgewogICAgICAgICAgS1RVdGlsLnNjcm9sbERlc3Ryb3koZWxlbWVudCwgdHJ1ZSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBoZWlnaHQgPSBwYXJzZUludChoZWlnaHQpOyAvLyBEZXN0cm95IHNjcm9sbCBvbiB0YWJsZSBhbmQgbW9iaWxlIG1vZGVzCgogICAgICAgIGlmICgob3B0aW9ucy5tb2JpbGVOYXRpdmVTY3JvbGwgfHwgb3B0aW9ucy5kaXNhYmxlRm9yTW9iaWxlKSAmJiBLVFV0aWwuaXNNb2JpbGVEZXZpY2UoKSA9PT0gdHJ1ZSkgewogICAgICAgICAgcHMgPSBLVFV0aWwuZGF0YShlbGVtZW50KS5nZXQoJ3BzJyk7CgogICAgICAgICAgaWYgKHBzKSB7CiAgICAgICAgICAgIGlmIChvcHRpb25zLnJlc2V0SGVpZ2h0T25EZXN0cm95KSB7CiAgICAgICAgICAgICAgS1RVdGlsLmNzcyhlbGVtZW50LCAnaGVpZ2h0JywgJ2F1dG8nKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdvdmVyZmxvdycsICdhdXRvJyk7CgogICAgICAgICAgICAgIGlmIChoZWlnaHQgPiAwKSB7CiAgICAgICAgICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdoZWlnaHQnLCBoZWlnaHQgKyAncHgnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHBzLmRlc3Ryb3koKTsKICAgICAgICAgICAgcHMgPSBLVFV0aWwuZGF0YShlbGVtZW50KS5yZW1vdmUoJ3BzJyk7CiAgICAgICAgICB9IGVsc2UgaWYgKGhlaWdodCA+IDApIHsKICAgICAgICAgICAgS1RVdGlsLmNzcyhlbGVtZW50LCAnb3ZlcmZsb3cnLCAnYXV0bycpOwogICAgICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdoZWlnaHQnLCBoZWlnaHQgKyAncHgnKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoaGVpZ2h0ID4gMCkgewogICAgICAgICAgS1RVdGlsLmNzcyhlbGVtZW50LCAnaGVpZ2h0JywgaGVpZ2h0ICsgJ3B4Jyk7CiAgICAgICAgfQoKICAgICAgICBpZiAob3B0aW9ucy5kZXNrdG9wTmF0aXZlU2Nyb2xsKSB7CiAgICAgICAgICBLVFV0aWwuY3NzKGVsZW1lbnQsICdvdmVyZmxvdycsICdhdXRvJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBQYXNzIG9wdGlvbnMgdmlhIEhUTUwgQXR0cmlidXRlcwoKCiAgICAgICAgaWYgKEtUVXRpbC5hdHRyKGVsZW1lbnQsICdkYXRhLXdpbmRvdy1zY3JvbGwnKSA9PSAndHJ1ZScpIHsKICAgICAgICAgIG9wdGlvbnMud2luZG93U2Nyb2xsID0gdHJ1ZTsKICAgICAgICB9IC8vIEluaXQgc2Nyb2xsCgoKICAgICAgICBwcyA9IEtUVXRpbC5kYXRhKGVsZW1lbnQpLmdldCgncHMnKTsKCiAgICAgICAgaWYgKHBzKSB7CiAgICAgICAgICBwcy51cGRhdGUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgS1RVdGlsLmNzcyhlbGVtZW50LCAnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7CiAgICAgICAgICBLVFV0aWwuYWRkQ2xhc3MoZWxlbWVudCwgJ3Njcm9sbCcpOwogICAgICAgICAgcHMgPSBuZXcgUGVyZmVjdFNjcm9sbGJhcihlbGVtZW50LCBvcHRpb25zKTsKICAgICAgICAgIEtUVXRpbC5kYXRhKGVsZW1lbnQpLnNldCgncHMnLCBwcyk7CiAgICAgICAgfSAvLyBSZW1lbWJlciBzY3JvbGwgcG9zaXRpb24gaW4gY29va2llCgoKICAgICAgICB2YXIgdWlkID0gS1RVdGlsLmF0dHIoZWxlbWVudCwgJ2lkJyk7IC8vIFRvZG86Q29uc2lkZXIgdXNpbmcgTG9jYWxzdG9yYWdlCgogICAgICAgIGlmIChvcHRpb25zLnJlbWVtYmVyUG9zaXRpb24gPT09IHRydWUgJiYgS1RDb29raWUgJiYgdWlkKSB7CiAgICAgICAgICBpZiAoS1RDb29raWUuZ2V0Q29va2llKHVpZCkpIHsKICAgICAgICAgICAgdmFyIHBvcyA9IHBhcnNlSW50KEtUQ29va2llLmdldENvb2tpZSh1aWQpKTsKCiAgICAgICAgICAgIGlmIChwb3MgPiAwKSB7CiAgICAgICAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBwb3M7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BzLXNjcm9sbC15JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBLVENvb2tpZS5zZXRDb29raWUodWlkLCBlbGVtZW50LnNjcm9sbFRvcCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gLy8gSW5pdAoKCiAgICAgIGluaXQoKTsgLy8gSGFuZGxlIHdpbmRvdyByZXNpemUKCiAgICAgIGlmIChvcHRpb25zLmhhbmRsZVdpbmRvd1Jlc2l6ZSkgewogICAgICAgIEtUVXRpbC5hZGRSZXNpemVIYW5kbGVyKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGluaXQoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbFVwZGF0ZTogZnVuY3Rpb24gc2Nyb2xsVXBkYXRlKGVsZW1lbnQpIHsKICAgICAgdmFyIHBzID0gS1RVdGlsLmRhdGEoZWxlbWVudCkuZ2V0KCdwcycpOwoKICAgICAgaWYgKHBzKSB7CiAgICAgICAgcHMudXBkYXRlKCk7CiAgICAgIH0KICAgIH0sCiAgICBzY3JvbGxVcGRhdGVBbGw6IGZ1bmN0aW9uIHNjcm9sbFVwZGF0ZUFsbChwYXJlbnQpIHsKICAgICAgdmFyIHNjcm9sbGVycyA9IEtUVXRpbC5maW5kQWxsKHBhcmVudCwgJy5wcycpOwoKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNjcm9sbGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgIEtUVXRpbC5zY3JvbGxVcGRhdGUoc2Nyb2xsZXJzW2ldKTsKICAgICAgfQogICAgfSwKICAgIHNjcm9sbERlc3Ryb3k6IGZ1bmN0aW9uIHNjcm9sbERlc3Ryb3koZWxlbWVudCwgcmVzZXRBbGwpIHsKICAgICAgdmFyIHBzID0gS1RVdGlsLmRhdGEoZWxlbWVudCkuZ2V0KCdwcycpOwoKICAgICAgaWYgKHBzKSB7CiAgICAgICAgcHMuZGVzdHJveSgpOwogICAgICAgIHBzID0gS1RVdGlsLmRhdGEoZWxlbWVudCkucmVtb3ZlKCdwcycpOwogICAgICB9CgogICAgICBpZiAoZWxlbWVudCAmJiByZXNldEFsbCkgewogICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJ292ZXJmbG93JywgJycpOwogICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoJ2hlaWdodCcsICcnKTsKICAgICAgfQogICAgfSwKICAgIGZpbHRlckJvb2xlYW46IGZ1bmN0aW9uIGZpbHRlckJvb2xlYW4odmFsKSB7CiAgICAgIC8vIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4KICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSB8fCB2YWwgPT09ICd0cnVlJykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBpZiAodmFsID09PSBmYWxzZSB8fCB2YWwgPT09ICdmYWxzZScpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWw7CiAgICB9LAogICAgc2V0SFRNTDogZnVuY3Rpb24gc2V0SFRNTChlbCwgaHRtbCkgewogICAgICBlbC5pbm5lckhUTUwgPSBodG1sOwogICAgfSwKICAgIGdldEhUTUw6IGZ1bmN0aW9uIGdldEhUTUwoZWwpIHsKICAgICAgaWYgKGVsKSB7CiAgICAgICAgcmV0dXJuIGVsLmlubmVySFRNTDsKICAgICAgfQogICAgfSwKICAgIGdldERvY3VtZW50SGVpZ2h0OiBmdW5jdGlvbiBnZXREb2N1bWVudEhlaWdodCgpIHsKICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5OwogICAgICB2YXIgaHRtbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgcmV0dXJuIE1hdGgubWF4KGJvZHkuc2Nyb2xsSGVpZ2h0LCBib2R5Lm9mZnNldEhlaWdodCwgaHRtbC5jbGllbnRIZWlnaHQsIGh0bWwuc2Nyb2xsSGVpZ2h0LCBodG1sLm9mZnNldEhlaWdodCk7CiAgICB9LAogICAgZ2V0U2Nyb2xsVG9wOiBmdW5jdGlvbiBnZXRTY3JvbGxUb3AoKSB7CiAgICAgIHJldHVybiAoZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnNjcm9sbFRvcDsKICAgIH0sCiAgICBjaGFuZ2VDb2xvcjogZnVuY3Rpb24gY2hhbmdlQ29sb3IoY29sLCBhbXQpIHsKICAgICAgdmFyIHVzZVBvdW5kID0gZmFsc2U7CgogICAgICBpZiAoY29sWzBdID09ICIjIikgewogICAgICAgIGNvbCA9IGNvbC5zbGljZSgxKTsKICAgICAgICB1c2VQb3VuZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIHZhciBudW0gPSBwYXJzZUludChjb2wsIDE2KTsKICAgICAgdmFyIHIgPSAobnVtID4+IDE2KSArIGFtdDsKICAgICAgaWYgKHIgPiAyNTUpIHIgPSAyNTU7ZWxzZSBpZiAociA8IDApIHIgPSAwOwogICAgICB2YXIgYiA9IChudW0gPj4gOCAmIDB4MDBGRikgKyBhbXQ7CiAgICAgIGlmIChiID4gMjU1KSBiID0gMjU1O2Vsc2UgaWYgKGIgPCAwKSBiID0gMDsKICAgICAgdmFyIGcgPSAobnVtICYgMHgwMDAwRkYpICsgYW10OwogICAgICBpZiAoZyA+IDI1NSkgZyA9IDI1NTtlbHNlIGlmIChnIDwgMCkgZyA9IDA7CiAgICAgIHJldHVybiAodXNlUG91bmQgPyAiIyIgOiAiIikgKyAoZyB8IGIgPDwgOCB8IHIgPDwgMTYpLnRvU3RyaW5nKDE2KTsKICAgIH0sCiAgICAvLyBUaHJvdHRsZSBmdW5jdGlvbjogSW5wdXQgYXMgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gYmUgdGhyb3R0bGVkIGFuZCBkZWxheSBpcyB0aGUgdGltZSBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHMKICAgIHRocm90dGxlOiBmdW5jdGlvbiB0aHJvdHRsZSh0aW1lciwgZnVuYywgZGVsYXkpIHsKICAgICAgLy8gSWYgc2V0VGltZW91dCBpcyBhbHJlYWR5IHNjaGVkdWxlZCwgbm8gbmVlZCB0byBkbyBhbnl0aGluZwogICAgICBpZiAodGltZXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gU2NoZWR1bGUgYSBzZXRUaW1lb3V0IGFmdGVyIGRlbGF5IHNlY29uZHMKCgogICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmMoKTsgLy8gT25jZSBzZXRUaW1lb3V0IGZ1bmN0aW9uIGV4ZWN1dGlvbiBpcyBmaW5pc2hlZCwgdGltZXJJZCA9IHVuZGVmaW5lZCBzbyB0aGF0IGluIDxicj4KICAgICAgICAvLyB0aGUgbmV4dCBzY3JvbGwgZXZlbnQgZnVuY3Rpb24gZXhlY3V0aW9uIGNhbiBiZSBzY2hlZHVsZWQgYnkgdGhlIHNldFRpbWVvdXQKCiAgICAgICAgdGltZXIgPSB1bmRlZmluZWQ7CiAgICAgIH0sIGRlbGF5KTsKICAgIH0sCiAgICAvLyBEZWJvdW5jZSBmdW5jdGlvbjogSW5wdXQgYXMgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gYmUgZGVib3VuY2VkIGFuZCBkZWxheSBpcyB0aGUgZGVib3VuY2VkIHRpbWUgaW4gbWlsbGlzZWNvbmRzCiAgICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UodGltZXIsIGZ1bmMsIGRlbGF5KSB7CiAgICAgIC8vIENhbmNlbHMgdGhlIHNldFRpbWVvdXQgbWV0aG9kIGV4ZWN1dGlvbgogICAgICBjbGVhclRpbWVvdXQodGltZXIpOyAvLyBFeGVjdXRlcyB0aGUgZnVuYyBhZnRlciBkZWxheSB0aW1lLgoKICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmMsIGRlbGF5KTsKICAgIH0sCiAgICBidG5XYWl0OiBmdW5jdGlvbiBidG5XYWl0KGVsLCBjbHMsIG1lc3NhZ2UsIGRpc2FibGUpIHsKICAgICAgaWYgKCFlbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBkaXNhYmxlICE9PSAndW5kZWZpbmVkJyAmJiBkaXNhYmxlID09PSB0cnVlKSB7CiAgICAgICAgS1RVdGlsLmF0dHIoZWwsICJkaXNhYmxlZCIsIHRydWUpOwogICAgICB9CgogICAgICBpZiAoY2xzKSB7CiAgICAgICAgS1RVdGlsLmFkZENsYXNzKGVsLCBjbHMpOwogICAgICAgIEtUVXRpbC5hdHRyKGVsLCAid2FpdC1jbGFzcyIsIGNscyk7CiAgICAgIH0KCiAgICAgIGlmIChtZXNzYWdlKSB7CiAgICAgICAgdmFyIGNhcHRpb24gPSBLVFV0aWwuZmluZChlbCwgJy5idG4tY2FwdGlvbicpOwoKICAgICAgICBpZiAoY2FwdGlvbikgewogICAgICAgICAgS1RVdGlsLmRhdGEoY2FwdGlvbikuc2V0KCdjYXB0aW9uJywgS1RVdGlsLmdldEhUTUwoY2FwdGlvbikpOwogICAgICAgICAgS1RVdGlsLnNldEhUTUwoY2FwdGlvbiwgbWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEtUVXRpbC5kYXRhKGVsKS5zZXQoJ2NhcHRpb24nLCBLVFV0aWwuZ2V0SFRNTChlbCkpOwogICAgICAgICAgS1RVdGlsLnNldEhUTUwoZWwsIG1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGJ0blJlbGVhc2U6IGZ1bmN0aW9uIGJ0blJlbGVhc2UoZWwpIHsKICAgICAgaWYgKCFlbCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLy8gU2hvdyBsb2FkaW5nIHN0YXRlIG9uIGJ1dHRvbgoKCiAgICAgIEtUVXRpbC5yZW1vdmVBdHRyKGVsLCAiZGlzYWJsZWQiKTsKCiAgICAgIGlmIChLVFV0aWwuaGFzQXR0cihlbCwgIndhaXQtY2xhc3MiKSkgewogICAgICAgIEtUVXRpbC5yZW1vdmVDbGFzcyhlbCwgS1RVdGlsLmF0dHIoZWwsICJ3YWl0LWNsYXNzIikpOwogICAgICB9CgogICAgICB2YXIgY2FwdGlvbiA9IEtUVXRpbC5maW5kKGVsLCAnLmJ0bi1jYXB0aW9uJyk7CgogICAgICBpZiAoY2FwdGlvbiAmJiBLVFV0aWwuZGF0YShjYXB0aW9uKS5oYXMoJ2NhcHRpb24nKSkgewogICAgICAgIEtUVXRpbC5zZXRIVE1MKGNhcHRpb24sIEtUVXRpbC5kYXRhKGNhcHRpb24pLmdldCgnY2FwdGlvbicpKTsKICAgICAgfSBlbHNlIGlmIChLVFV0aWwuZGF0YShlbCkuaGFzKCdjYXB0aW9uJykpIHsKICAgICAgICBLVFV0aWwuc2V0SFRNTChlbCwgS1RVdGlsLmRhdGEoZWwpLmdldCgnY2FwdGlvbicpKTsKICAgICAgfQogICAgfSwKICAgIGlzT2Zmc2NyZWVuOiBmdW5jdGlvbiBpc09mZnNjcmVlbihlbCwgZGlyZWN0aW9uLCBvZmZzZXQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7CiAgICAgIHZhciB3aW5kb3dXaWR0aCA9IEtUVXRpbC5nZXRWaWV3UG9ydCgpLndpZHRoOwogICAgICB2YXIgd2luZG93SGVpZ2h0ID0gS1RVdGlsLmdldFZpZXdQb3J0KCkuaGVpZ2h0OwogICAgICB2YXIgdG9wID0gS1RVdGlsLm9mZnNldChlbCkudG9wOwogICAgICB2YXIgaGVpZ2h0ID0gS1RVdGlsLm91dGVySGVpZ2h0KGVsKSArIG9mZnNldDsKICAgICAgdmFyIGxlZnQgPSBLVFV0aWwub2Zmc2V0KGVsKS5sZWZ0OwogICAgICB2YXIgd2lkdGggPSBLVFV0aWwub3V0ZXJXaWR0aChlbCkgKyBvZmZzZXQ7CgogICAgICBpZiAoZGlyZWN0aW9uID09ICdib3R0b20nKSB7CiAgICAgICAgaWYgKHdpbmRvd0hlaWdodCA8IHRvcCArIGhlaWdodCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3dIZWlnaHQgPiB0b3AgKyBoZWlnaHQgKiAxLjUpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGRpcmVjdGlvbiA9PSAndG9wJykgewogICAgICAgIGlmICh0b3AgPCAwKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKHRvcCA+IGhlaWdodCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoZGlyZWN0aW9uID09ICdsZWZ0JykgewogICAgICAgIGlmIChsZWZ0IDwgMCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSBlbHNlIGlmIChsZWZ0ICogMiA+IHdpZHRoKSB7Ly9jb25zb2xlLmxvZygnbGVmdCAyJyk7CiAgICAgICAgICAvL3JldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7CiAgICAgICAgaWYgKHdpbmRvd1dpZHRoIDwgbGVmdCArIHdpZHRoKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IGVsc2Ugey8vY29uc29sZS5sb2coJ3JpZ2h0IDInKTsKICAgICAgICAgIC8vcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfTsKfSgpOyAvLyB3ZWJwYWNrIHN1cHBvcnQKCgppZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzICE9PSAndW5kZWZpbmVkJykgewogIG1vZHVsZS5leHBvcnRzID0gS1RVdGlsOwp9IC8vIEluaXRpYWxpemUgS1RVdGlsIGNsYXNzIG9uIGRvY3VtZW50IHJlYWR5CgoKS1RVdGlsLnJlYWR5KGZ1bmN0aW9uICgpIHsKICBpZiAodHlwZW9mIEtUQXBwU2V0dGluZ3MgIT09ICd1bmRlZmluZWQnKSB7CiAgICBLVFV0aWwuaW5pdChLVEFwcFNldHRpbmdzKTsKICB9IGVsc2UgewogICAgS1RVdGlsLmluaXQoKTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBLVFV0aWw7"},{"version":3,"sources":["/Users/belliecee/Downloads/metronic-responsive-admin-dashboard-template/metronic_v7.2.9/theme/vue/demo5/src/assets/js/components/util.js"],"names":["Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","ancestor","document","documentElement","contains","parentElement","elem","i","length","window","remove","parentNode","removeChild","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","arr","forEach","item","hasOwnProperty","Object","defineProperty","configurable","enumerable","writable","value","prepend","argArr","Array","slice","call","arguments","docFrag","createDocumentFragment","argItem","isNode","Node","appendChild","createTextNode","String","insertBefore","firstChild","Document","DocumentFragment","getAttributeNames","undefined","attributes","result","name","KTUtilElementDataStore","KTUtilElementDataStoreID","KTUtilDelegatedEventHandlers","KTUtil","resizeHandlers","breakpoints","sm","md","lg","xl","_windowResizeHandler","_runResizeHandlers","each","timer","addEventListener","throttle","init","settings","addResizeHandler","push","removeResizeHandler","runResizeHandlers","resize","Event","dispatchEvent","evt","createEvent","initUIEvent","getURLParam","paramName","searchString","location","search","substring","val","params","split","unescape","isMobileDevice","test","getViewPort","width","getBreakpoint","navigator","userAgent","match","isDesktopDevice","e","a","body","height","isInResponsiveRange","mode","breakpoint","isBreakpointUp","isBreakpointDown","getUniqueID","prefix","floor","random","isset","obj","keys","stone","indexOf","Error","shift","getHighestZindex","position","css","parseInt","isNaN","hasFixedPositionedParent","sleep","milliseconds","start","getRandomInt","min","isAngularVersion","Zone","deepExtend","out","key","toString","extend","getById","getElementById","getByTag","query","getElementsByTagName","getByTagName","getByClass","getElementsByClassName","getBody","hasClasses","classes","classesArr","hasClass","trim","className","classList","RegExp","addClass","classNames","add","removeClass","replace","triggerCustomEvent","eventName","data","event","CustomEvent","detail","initCustomEvent","triggerEvent","node","doc","ownerDocument","nodeType","eventClass","bubbles","initEvent","synthetic","fireEvent","createEventObject","index","c","children","string","eventTriggered","currentTarget","dataset","triggered","find","parent","querySelector","findAll","querySelectorAll","insertAfter","referenceNode","nextSibling","parents","selector","matchesSelector","mozMatchesSelector","oMatchesSelector","log","childNodes","l","child","p","f","tagName","set","customDataTag","get","has","outerWidth","margin","parseFloat","offsetWidth","offset","rect","win","getClientRects","top","left","getBoundingClientRect","defaultView","pageYOffset","pageXOffset","outerHeight","withMargin","offsetHeight","style","getComputedStyle","marginTop","marginBottom","visible","attr","setAttribute","getAttribute","hasAttr","removeAttr","removeAttribute","animate","from","to","duration","update","easing","done","easings","linear","t","b","d","rAF","canceled","change","loop","timestamp","time","performance","now","actualCss","prop","cache","HTMLElement","cssText","actualHeight","actualWidth","getScroll","element","method","self","browserSupportsBoxModel","styleProp","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","slide","dir","speed","recalcMaxHeight","calcHeight","calcPaddingTop","calcPaddingBottom","paddingTop","paddingBottom","display","overflow","slideUp","slideDown","show","hide","addEvent","type","handler","one","removeEvent","removeEventListener","on","eventId","targets","target","j","off","onetime","callee","hash","chr","charCodeAt","animateClass","animationName","animation","animations","OAnimation","MozAnimation","WebkitAnimation","msAnimation","transitionEnd","transition","transitions","OTransition","MozTransition","WebkitTransition","msTransition","animationEnd","animateDelay","animateDuration","scrollTo","targetPos","scrollPos","scrollTop","isArray","ready","attachEvent","readyState","isEmpty","numberString","nStr","x1","x2","rgx","detectIE","ua","msie","trident","rv","edge","isRTL","html","scrollInit","options","pluginDefOptions","wheelSpeed","swipeEasing","wheelPropagation","minScrollbarLength","maxScrollbarLength","suppressScrollX","ps","attrs","attrName","includes","optionName","filterBoolean","Function","mobileHeight","scrollDestroy","mobileNativeScroll","disableForMobile","resetHeightOnDestroy","destroy","desktopNativeScroll","windowScroll","PerfectScrollbar","uid","rememberPosition","KTCookie","getCookie","pos","setCookie","handleWindowResize","scrollUpdate","scrollUpdateAll","scrollers","len","resetAll","setProperty","setHTML","innerHTML","getHTML","getDocumentHeight","scrollHeight","clientHeight","getScrollTop","scrollingElement","changeColor","col","amt","usePound","num","r","g","func","delay","debounce","btnWait","cls","message","disable","caption","btnRelease","isOffscreen","direction","windowWidth","windowHeight","module","exports","KTAppSettings"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\n/**\r\n * @class KTUtil  base utilize class that privides helper functions\r\n */\r\n\r\n// Polyfills\r\n/**\r\n * Element.matches() polyfill (simple version)\r\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill\r\n */\r\nif (!Element.prototype.matches) {\r\n\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\r\n}\r\n\r\n/**\r\n * Element.closest() polyfill\r\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill\r\n */\r\nif (!Element.prototype.closest) {\r\n\tif (!Element.prototype.matches) {\r\n\t\tElement.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\r\n\t}\r\n\tElement.prototype.closest = function (s) {\r\n\t\tvar el = this;\r\n\t\tvar ancestor = this;\r\n\t\tif (!document.documentElement.contains(el)) return null;\r\n\t\tdo {\r\n\t\t\tif (ancestor.matches(s)) return ancestor;\r\n\t\t\tancestor = ancestor.parentElement;\r\n\t\t} while (ancestor !== null);\r\n\t\treturn null;\r\n\t};\r\n}\r\n\r\n/**\r\n * ChildNode.remove() polyfill\r\n * https://gomakethings.com/removing-an-element-from-the-dom-the-es6-way/\r\n * @author Chris Ferdinandi\r\n * @license MIT\r\n */\r\n(function (elem) {\r\n\tfor (var i = 0; i < elem.length; i++) {\r\n\t\tif (!window[elem[i]] || 'remove' in window[elem[i]].prototype) continue;\r\n\t\twindow[elem[i]].prototype.remove = function () {\r\n\t\t\tthis.parentNode.removeChild(this);\r\n\t\t};\r\n\t}\r\n})(['Element', 'CharacterData', 'DocumentType']);\r\n\r\n\r\n//\r\n// requestAnimationFrame polyfill by Erik Möller.\r\n//  With fixes from Paul Irish and Tino Zijdel\r\n//\r\n//  http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n//  http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\r\n//\r\n//  MIT license\r\n//\r\n(function() {\r\n    var lastTime = 0;\r\n    var vendors = ['webkit', 'moz'];\r\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame =\r\n            window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n\r\n    if (!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function(callback) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = window.setTimeout(function() {\r\n                callback(currTime + timeToCall);\r\n            }, timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n\r\n    if (!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function(id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\r\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/prepend()/prepend().md\r\n(function(arr) {\r\n    arr.forEach(function(item) {\r\n        if (item.hasOwnProperty('prepend')) {\r\n            return;\r\n        }\r\n        Object.defineProperty(item, 'prepend', {\r\n            configurable: true,\r\n            enumerable: true,\r\n            writable: true,\r\n            value: function prepend() {\r\n                var argArr = Array.prototype.slice.call(arguments),\r\n                    docFrag = document.createDocumentFragment();\r\n\r\n                argArr.forEach(function(argItem) {\r\n                    var isNode = argItem instanceof Node;\r\n                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\r\n                });\r\n\r\n                this.insertBefore(docFrag, this.firstChild);\r\n            }\r\n        });\r\n    });\r\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\r\n\r\n// getAttributeNames\r\nif (Element.prototype.getAttributeNames == undefined) {\r\n  Element.prototype.getAttributeNames = function () {\r\n    var attributes = this.attributes;\r\n    var length = attributes.length;\r\n    var result = new Array(length);\r\n    for (var i = 0; i < length; i++) {\r\n      result[i] = attributes[i].name;\r\n    }\r\n    return result;\r\n  };\r\n}\r\n\r\n// Global variables\r\nwindow.KTUtilElementDataStore = {};\r\nwindow.KTUtilElementDataStoreID = 0;\r\nwindow.KTUtilDelegatedEventHandlers = {};\r\n\r\nvar KTUtil = function() {\r\n    var resizeHandlers = [];\r\n\r\n    /** @type {object} breakpoints The device width breakpoints **/\r\n    var breakpoints = {\r\n        sm: 544, // Small screen / phone\r\n        md: 768, // Medium screen / tablet\r\n        lg: 992, // Large screen / desktop\r\n        xl: 1200 // Extra large screen / wide desktop\r\n    };\r\n\r\n    /**\r\n     * Handle window resize event with some\r\n     * delay to attach event handlers upon resize complete\r\n     */\r\n    var _windowResizeHandler = function() {\r\n        var _runResizeHandlers = function() {\r\n            // reinitialize other subscribed elements\r\n            for (var i = 0; i < resizeHandlers.length; i++) {\r\n                var each = resizeHandlers[i];\r\n                each.call();\r\n            }\r\n        };\r\n\r\n        var timer;\r\n\r\n        window.addEventListener('resize', function() {\r\n            KTUtil.throttle(timer, function() {\r\n                _runResizeHandlers();\r\n            }, 200);\r\n        });\r\n    };\r\n\r\n    return {\r\n        /**\r\n         * Class main initializer.\r\n         * @param {object} settings.\r\n         * @returns null\r\n         */\r\n        //main function to initiate the theme\r\n        init: function(settings) {\r\n            if (settings && settings.breakpoints) {\r\n                breakpoints = settings.breakpoints;\r\n            }\r\n\r\n            _windowResizeHandler();\r\n        },\r\n\r\n        /**\r\n         * Adds window resize event handler.\r\n         * @param {function} callback function.\r\n         */\r\n        addResizeHandler: function(callback) {\r\n            resizeHandlers.push(callback);\r\n        },\r\n\r\n        /**\r\n         * Removes window resize event handler.\r\n         * @param {function} callback function.\r\n         */\r\n        removeResizeHandler: function(callback) {\r\n            for (var i = 0; i < resizeHandlers.length; i++) {\r\n                if (callback === resizeHandlers[i]) {\r\n                    delete resizeHandlers[i];\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Trigger window resize handlers.\r\n         */\r\n        runResizeHandlers: function() {\r\n            _runResizeHandlers();\r\n        },\r\n\r\n        resize: function() {\r\n            if (typeof(Event) === 'function') {\r\n                // modern browsers\r\n                window.dispatchEvent(new Event('resize'));\r\n            } else {\r\n                // for IE and other old browsers\r\n                // causes deprecation warning on modern browsers\r\n                var evt = window.document.createEvent('UIEvents');\r\n                evt.initUIEvent('resize', true, false, window, 0);\r\n                window.dispatchEvent(evt);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get GET parameter value from URL.\r\n         * @param {string} paramName Parameter name.\r\n         * @returns {string}\r\n         */\r\n        getURLParam: function(paramName) {\r\n            var searchString = window.location.search.substring(1),\r\n                i, val, params = searchString.split(\"&\");\r\n\r\n            for (i = 0; i < params.length; i++) {\r\n                val = params[i].split(\"=\");\r\n                if (val[0] == paramName) {\r\n                    return unescape(val[1]);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Checks whether current device is mobile touch.\r\n         * @returns {boolean}\r\n         */\r\n        isMobileDevice: function() {\r\n            var test = (this.getViewPort().width < this.getBreakpoint('lg') ? true : false);\r\n\r\n            if (test === false) {\r\n                // For use within normal web clients\r\n                test = navigator.userAgent.match(/iPad/i) != null;\r\n            }\r\n\r\n            return test;\r\n        },\r\n\r\n        /**\r\n         * Checks whether current device is desktop.\r\n         * @returns {boolean}\r\n         */\r\n        isDesktopDevice: function() {\r\n            return KTUtil.isMobileDevice() ? false : true;\r\n        },\r\n\r\n        /**\r\n         * Gets browser window viewport size. Ref:\r\n         * http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\r\n         * @returns {object}\r\n         */\r\n        getViewPort: function() {\r\n            var e = window,\r\n                a = 'inner';\r\n            if (!('innerWidth' in window)) {\r\n                a = 'client';\r\n                e = document.documentElement || document.body;\r\n            }\r\n\r\n            return {\r\n                width: e[a + 'Width'],\r\n                height: e[a + 'Height']\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Checks whether given device mode is currently activated.\r\n         * @param {string} mode Responsive mode name(e.g: desktop,\r\n         *     desktop-and-tablet, tablet, tablet-and-mobile, mobile)\r\n         * @returns {boolean}\r\n         */\r\n        isInResponsiveRange: function(mode) {\r\n            var breakpoint = this.getViewPort().width;\r\n\r\n            if (mode == 'general') {\r\n                return true;\r\n            } else if (mode == 'desktop' && breakpoint >= (this.getBreakpoint('lg') + 1)) {\r\n                return true;\r\n            } else if (mode == 'tablet' && (breakpoint >= (this.getBreakpoint('md') + 1) && breakpoint < this.getBreakpoint('lg'))) {\r\n                return true;\r\n            } else if (mode == 'mobile' && breakpoint <= this.getBreakpoint('md')) {\r\n                return true;\r\n            } else if (mode == 'desktop-and-tablet' && breakpoint >= (this.getBreakpoint('md') + 1)) {\r\n                return true;\r\n            } else if (mode == 'tablet-and-mobile' && breakpoint <= this.getBreakpoint('lg')) {\r\n                return true;\r\n            } else if (mode == 'minimal-desktop-and-below' && breakpoint <= this.getBreakpoint('xl')) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n\t\t/**\r\n         * Checks whether given device mode is currently activated.\r\n         * @param {string} mode Responsive mode name(e.g: desktop,\r\n         *     desktop-and-tablet, tablet, tablet-and-mobile, mobile)\r\n         * @returns {boolean}\r\n         */\r\n        isBreakpointUp: function(mode) {\r\n            var width = this.getViewPort().width;\r\n\t\t\tvar breakpoint = this.getBreakpoint(mode);\r\n\r\n\t\t\treturn (width >= breakpoint);\r\n        },\r\n\r\n\t\tisBreakpointDown: function(mode) {\r\n            var width = this.getViewPort().width;\r\n\t\t\tvar breakpoint = this.getBreakpoint(mode);\r\n\r\n\t\t\treturn (width < breakpoint);\r\n        },\r\n\r\n        /**\r\n         * Generates unique ID for give prefix.\r\n         * @param {string} prefix Prefix for generated ID\r\n         * @returns {boolean}\r\n         */\r\n        getUniqueID: function(prefix) {\r\n            return prefix + Math.floor(Math.random() * (new Date()).getTime());\r\n        },\r\n\r\n        /**\r\n         * Gets window width for give breakpoint mode.\r\n         * @param {string} mode Responsive mode name(e.g: xl, lg, md, sm)\r\n         * @returns {number}\r\n         */\r\n        getBreakpoint: function(mode) {\r\n            return breakpoints[mode];\r\n        },\r\n\r\n        /**\r\n         * Checks whether object has property matchs given key path.\r\n         * @param {object} obj Object contains values paired with given key path\r\n         * @param {string} keys Keys path seperated with dots\r\n         * @returns {object}\r\n         */\r\n        isset: function(obj, keys) {\r\n            var stone;\r\n\r\n            keys = keys || '';\r\n\r\n            if (keys.indexOf('[') !== -1) {\r\n                throw new Error('Unsupported object path notation.');\r\n            }\r\n\r\n            keys = keys.split('.');\r\n\r\n            do {\r\n                if (obj === undefined) {\r\n                    return false;\r\n                }\r\n\r\n                stone = keys.shift();\r\n\r\n                if (!obj.hasOwnProperty(stone)) {\r\n                    return false;\r\n                }\r\n\r\n                obj = obj[stone];\r\n\r\n            } while (keys.length);\r\n\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * Gets highest z-index of the given element parents\r\n         * @param {object} el jQuery element object\r\n         * @returns {number}\r\n         */\r\n        getHighestZindex: function(el) {\r\n            var position, value;\r\n\r\n            while (el && el !== document) {\r\n                // Ignore z-index if position is set to a value where z-index is ignored by the browser\r\n                // This makes behavior of this function consistent across browsers\r\n                // WebKit always returns auto if the element is positioned\r\n                position = KTUtil.css(el, 'position');\r\n\r\n                if (position === \"absolute\" || position === \"relative\" || position === \"fixed\") {\r\n                    // IE returns 0 when zIndex is not specified\r\n                    // other browsers return a string\r\n                    // we ignore the case of nested elements with an explicit value of 0\r\n                    // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\r\n                    value = parseInt(KTUtil.css(el, 'z-index'));\r\n\r\n                    if (!isNaN(value) && value !== 0) {\r\n                        return value;\r\n                    }\r\n                }\r\n\r\n                el = el.parentNode;\r\n            }\r\n\r\n            return null;\r\n        },\r\n\r\n        /**\r\n         * Checks whether the element has any parent with fixed positionfreg\r\n         * @param {object} el jQuery element object\r\n         * @returns {boolean}\r\n         */\r\n        hasFixedPositionedParent: function(el) {\r\n            var position;\r\n\r\n            while (el && el !== document) {\r\n                position = KTUtil.css(el, 'position');\r\n\r\n                if (position === \"fixed\") {\r\n                    return true;\r\n                }\r\n\r\n                el = el.parentNode;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        /**\r\n         * Simulates delay\r\n         */\r\n        sleep: function(milliseconds) {\r\n            var start = new Date().getTime();\r\n            for (var i = 0; i < 1e7; i++) {\r\n                if ((new Date().getTime() - start) > milliseconds) {\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Gets randomly generated integer value within given min and max range\r\n         * @param {number} min Range start value\r\n         * @param {number} max Range end value\r\n         * @returns {number}\r\n         */\r\n        getRandomInt: function(min, max) {\r\n            return Math.floor(Math.random() * (max - min + 1)) + min;\r\n        },\r\n\r\n        /**\r\n         * Checks whether Angular library is included\r\n         * @returns {boolean}\r\n         */\r\n        isAngularVersion: function() {\r\n            return window.Zone !== undefined ? true : false;\r\n        },\r\n\r\n        // Deep extend:  $.extend(true, {}, objA, objB);\r\n        deepExtend: function(out) {\r\n            out = out || {};\r\n\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                var obj = arguments[i];\r\n                if (!obj) continue;\r\n\r\n                for (var key in obj) {\r\n                    if (!obj.hasOwnProperty(key)) {\r\n                        continue;\r\n                    }\r\n\r\n                    // based on https://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/\r\n                    if ( Object.prototype.toString.call(obj[key]) === '[object Object]' ) {\r\n                        out[key] = KTUtil.deepExtend(out[key], obj[key]);\r\n                        continue;\r\n                    }\r\n\r\n                    out[key] = obj[key];\r\n                }\r\n            }\r\n\r\n            return out;\r\n        },\r\n\r\n        // extend:  $.extend({}, objA, objB);\r\n        extend: function(out) {\r\n            out = out || {};\r\n\r\n            for (var i = 1; i < arguments.length; i++) {\r\n                if (!arguments[i])\r\n                    continue;\r\n\r\n                for (var key in arguments[i]) {\r\n                    if (arguments[i].hasOwnProperty(key))\r\n                        out[key] = arguments[i][key];\r\n                }\r\n            }\r\n\r\n            return out;\r\n        },\r\n\r\n        getById: function(el) {\r\n            if (typeof el === 'string') {\r\n                return document.getElementById(el);\r\n            } else {\r\n                return el;\r\n            }\r\n        },\r\n\r\n        getByTag: function(query) {\r\n            return document.getElementsByTagName(query);\r\n        },\r\n\r\n        getByTagName: function(query) {\r\n            return document.getElementsByTagName(query);\r\n        },\r\n\r\n        getByClass: function(query) {\r\n            return document.getElementsByClassName(query);\r\n        },\r\n\r\n        getBody: function() {\r\n            return document.getElementsByTagName('body')[0];\r\n        },\r\n\r\n        /**\r\n         * Checks whether the element has given classes\r\n         * @param {object} el jQuery element object\r\n         * @param {string} Classes string\r\n         * @returns {boolean}\r\n         */\r\n        hasClasses: function(el, classes) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            var classesArr = classes.split(\" \");\r\n\r\n            for (var i = 0; i < classesArr.length; i++) {\r\n                if (KTUtil.hasClass(el, KTUtil.trim(classesArr[i])) == false) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        hasClass: function(el, className) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            return el.classList ? el.classList.contains(className) : new RegExp('\\\\b' + className + '\\\\b').test(el.className);\r\n        },\r\n\r\n        addClass: function(el, className) {\r\n            if (!el || typeof className === 'undefined') {\r\n                return;\r\n            }\r\n\r\n            var classNames = className.split(' ');\r\n\r\n            if (el.classList) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    if (classNames[i] && classNames[i].length > 0) {\r\n                        el.classList.add(KTUtil.trim(classNames[i]));\r\n                    }\r\n                }\r\n            } else if (!KTUtil.hasClass(el, className)) {\r\n                for (var x = 0; x < classNames.length; x++) {\r\n                    el.className += ' ' + KTUtil.trim(classNames[x]);\r\n                }\r\n            }\r\n        },\r\n\r\n        removeClass: function(el, className) {\r\n          if (!el || typeof className === 'undefined') {\r\n                return;\r\n            }\r\n\r\n            var classNames = className.split(' ');\r\n\r\n            if (el.classList) {\r\n                for (var i = 0; i < classNames.length; i++) {\r\n                    el.classList.remove(KTUtil.trim(classNames[i]));\r\n                }\r\n            } else if (KTUtil.hasClass(el, className)) {\r\n                for (var x = 0; x < classNames.length; x++) {\r\n                    el.className = el.className.replace(new RegExp('\\\\b' + KTUtil.trim(classNames[x]) + '\\\\b', 'g'), '');\r\n                }\r\n            }\r\n        },\r\n\r\n        triggerCustomEvent: function(el, eventName, data) {\r\n            var event;\r\n            if (window.CustomEvent) {\r\n                event = new CustomEvent(eventName, {\r\n                    detail: data\r\n                });\r\n            } else {\r\n                event = document.createEvent('CustomEvent');\r\n                event.initCustomEvent(eventName, true, true, data);\r\n            }\r\n\r\n            el.dispatchEvent(event);\r\n        },\r\n\r\n        triggerEvent: function(node, eventName) {\r\n            // Make sure we use the ownerDocument from the provided node to avoid cross-window problems\r\n            var doc;\r\n            if (node.ownerDocument) {\r\n                doc = node.ownerDocument;\r\n            } else if (node.nodeType == 9) {\r\n                // the node may be the document itself, nodeType 9 = DOCUMENT_NODE\r\n                doc = node;\r\n            } else {\r\n                throw new Error(\"Invalid node passed to fireEvent: \" + node.id);\r\n            }\r\n\r\n            if (node.dispatchEvent) {\r\n                // Gecko-style approach (now the standard) takes more work\r\n                var eventClass = \"\";\r\n\r\n                // Different events have different event classes.\r\n                // If this switch statement can't map an eventName to an eventClass,\r\n                // the event firing is going to fail.\r\n                switch (eventName) {\r\n                case \"click\": // Dispatching of 'click' appears to not work correctly in Safari. Use 'mousedown' or 'mouseup' instead.\r\n                case \"mouseenter\":\r\n                case \"mouseleave\":\r\n                case \"mousedown\":\r\n                case \"mouseup\":\r\n                    eventClass = \"MouseEvents\";\r\n                    break;\r\n\r\n                case \"focus\":\r\n                case \"change\":\r\n                case \"blur\":\r\n                case \"select\":\r\n                    eventClass = \"HTMLEvents\";\r\n                    break;\r\n\r\n                default:\r\n                    throw \"fireEvent: Couldn't find an event class for event '\" + eventName + \"'.\";\r\n                    break;\r\n                }\r\n                var event = doc.createEvent(eventClass);\r\n\r\n                var bubbles = eventName == \"change\" ? false : true;\r\n                event.initEvent(eventName, bubbles, true); // All events created as bubbling and cancelable.\r\n\r\n                event.synthetic = true; // allow detection of synthetic events\r\n                // The second parameter says go ahead with the default action\r\n                node.dispatchEvent(event, true);\r\n            } else if (node.fireEvent) {\r\n                // IE-old school style\r\n                var event = doc.createEventObject();\r\n                event.synthetic = true; // allow detection of synthetic events\r\n                node.fireEvent(\"on\" + eventName, event);\r\n            }\r\n        },\r\n\r\n        index: function( el ){\r\n            var c = el.parentNode.children, i = 0;\r\n            for(; i < c.length; i++ )\r\n                if( c[i] == el ) return i;\r\n        },\r\n\r\n        trim: function(string) {\r\n            return string.trim();\r\n        },\r\n\r\n        eventTriggered: function(e) {\r\n            if (e.currentTarget.dataset.triggered) {\r\n                return true;\r\n            } else {\r\n                e.currentTarget.dataset.triggered = true;\r\n\r\n                return false;\r\n            }\r\n        },\r\n\r\n        remove: function(el) {\r\n            if (el && el.parentNode) {\r\n                el.parentNode.removeChild(el);\r\n            }\r\n        },\r\n\r\n        find: function(parent, query) {\r\n            parent = KTUtil.getById(parent);\r\n            if (parent) {\r\n                return parent.querySelector(query);\r\n            }\r\n        },\r\n\r\n        findAll: function(parent, query) {\r\n            parent = KTUtil.getById(parent);\r\n            if (parent) {\r\n                return parent.querySelectorAll(query);\r\n            }\r\n        },\r\n\r\n        insertAfter: function(el, referenceNode) {\r\n            return referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\r\n        },\r\n\r\n        parents: function(elem, selector) {\r\n            // Element.matches() polyfill\r\n            if (!Element.prototype.matches) {\r\n                Element.prototype.matches =\r\n                    Element.prototype.matchesSelector ||\r\n                    Element.prototype.mozMatchesSelector ||\r\n                    Element.prototype.msMatchesSelector ||\r\n                    Element.prototype.oMatchesSelector ||\r\n                    Element.prototype.webkitMatchesSelector ||\r\n                    function(s) {\r\n                        var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n                            i = matches.length;\r\n                        while (--i >= 0 && matches.item(i) !== this) {}\r\n                        return i > -1;\r\n                    };\r\n            }\r\n\r\n            // Set up a parent array\r\n            var parents = [];\r\n\r\n            // Push each parent element to the array\r\n            for ( ; elem && elem !== document; elem = elem.parentNode ) {\r\n                if (selector) {\r\n                    if (elem.matches(selector)) {\r\n                        parents.push(elem);\r\n                    }\r\n                    continue;\r\n                }\r\n                parents.push(elem);\r\n            }\r\n\r\n            // Return our parent array\r\n            return parents;\r\n        },\r\n\r\n        children: function(el, selector, log) {\r\n            if (!el || !el.childNodes) {\r\n                return;\r\n            }\r\n\r\n            var result = [],\r\n                i = 0,\r\n                l = el.childNodes.length;\r\n\r\n            for (var i; i < l; ++i) {\r\n                if (el.childNodes[i].nodeType == 1 && KTUtil.matches(el.childNodes[i], selector, log)) {\r\n                    result.push(el.childNodes[i]);\r\n                }\r\n            }\r\n\r\n            return result;\r\n        },\r\n\r\n        child: function(el, selector, log) {\r\n            var children = KTUtil.children(el, selector, log);\r\n\r\n            return children ? children[0] : null;\r\n        },\r\n\r\n        matches: function(el, selector, log) {\r\n            var p = Element.prototype;\r\n            var f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || function(s) {\r\n                return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\r\n            };\r\n\r\n            if (el && el.tagName) {\r\n                return f.call(el, selector);\r\n            } else {\r\n                return false;\r\n            }\r\n        },\r\n\r\n        data: function(el) {\r\n            return {\r\n                set: function(name, data) {\r\n                    if (!el) {\r\n                        return;\r\n                    }\r\n\r\n                    if (el.customDataTag === undefined) {\r\n                        window.KTUtilElementDataStoreID++;\r\n                        el.customDataTag = window.KTUtilElementDataStoreID;\r\n                    }\r\n\r\n                    if (window.KTUtilElementDataStore[el.customDataTag] === undefined) {\r\n                        window.KTUtilElementDataStore[el.customDataTag] = {};\r\n                    }\r\n\r\n                    window.KTUtilElementDataStore[el.customDataTag][name] = data;\r\n                },\r\n\r\n                get: function(name) {\r\n                    if (!el) {\r\n                        return;\r\n                    }\r\n\r\n                    if (el.customDataTag === undefined) {\r\n                        return null;\r\n                    }\r\n\r\n                    return this.has(name) ? window.KTUtilElementDataStore[el.customDataTag][name] : null;\r\n                },\r\n\r\n                has: function(name) {\r\n                    if (!el) {\r\n                        return false;\r\n                    }\r\n\r\n                    if (el.customDataTag === undefined) {\r\n                        return false;\r\n                    }\r\n\r\n                    return (window.KTUtilElementDataStore[el.customDataTag] && window.KTUtilElementDataStore[el.customDataTag][name]) ? true : false;\r\n                },\r\n\r\n                remove: function(name) {\r\n                    if (el && this.has(name)) {\r\n                        delete window.KTUtilElementDataStore[el.customDataTag][name];\r\n                    }\r\n                }\r\n            };\r\n        },\r\n\r\n        outerWidth: function(el, margin) {\r\n            var width;\r\n\r\n            if (margin === true) {\r\n                width = parseFloat(el.offsetWidth);\r\n                width += parseFloat(KTUtil.css(el, 'margin-left')) + parseFloat(KTUtil.css(el, 'margin-right'));\r\n\r\n                return parseFloat(width);\r\n            } else {\r\n                width = parseFloat(el.offsetWidth);\r\n\r\n                return width;\r\n            }\r\n        },\r\n\r\n        offset: function(el) {\r\n            var rect, win;\r\n\r\n            if ( !el ) {\r\n                return;\r\n            }\r\n\r\n            // Return zeros for disconnected and hidden (display: none) elements (gh-2310)\r\n            // Support: IE <=11 only\r\n            // Running getBoundingClientRect on a\r\n            // disconnected node in IE throws an error\r\n\r\n            if ( !el.getClientRects().length ) {\r\n                return { top: 0, left: 0 };\r\n            }\r\n\r\n            // Get document-relative position by adding viewport scroll to viewport-relative gBCR\r\n            rect = el.getBoundingClientRect();\r\n            win = el.ownerDocument.defaultView;\r\n\r\n            return {\r\n                top: rect.top + win.pageYOffset,\r\n                left: rect.left + win.pageXOffset\r\n            };\r\n        },\r\n\r\n        height: function(el) {\r\n            return KTUtil.css(el, 'height');\r\n        },\r\n\r\n        outerHeight: function(el, withMargin) {\r\n            var height = el.offsetHeight;\r\n            var style;\r\n\r\n            if (typeof withMargin !== 'undefined' && withMargin === true) {\r\n                style = getComputedStyle(el);\r\n                height += parseInt(style.marginTop) + parseInt(style.marginBottom);\r\n\r\n                return height;\r\n            } else {\r\n                return height;\r\n            }\r\n        },\r\n\r\n        visible: function(el) {\r\n            return !(el.offsetWidth === 0 && el.offsetHeight === 0);\r\n        },\r\n\r\n        attr: function(el, name, value) {\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                el.setAttribute(name, value);\r\n            } else {\r\n                return el.getAttribute(name);\r\n            }\r\n        },\r\n\r\n        hasAttr: function(el, name) {\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            return el.getAttribute(name) ? true : false;\r\n        },\r\n\r\n        removeAttr: function(el, name) {\r\n            if (el == undefined) {\r\n                return;\r\n            }\r\n\r\n            el.removeAttribute(name);\r\n        },\r\n\r\n        animate: function(from, to, duration, update, easing, done) {\r\n            /**\r\n             * TinyAnimate.easings\r\n             *  Adapted from jQuery Easing\r\n             */\r\n            var easings = {};\r\n            var easing;\r\n\r\n            easings.linear = function(t, b, c, d) {\r\n                return c * t / d + b;\r\n            };\r\n\r\n            easing = easings.linear;\r\n\r\n            // Early bail out if called incorrectly\r\n            if (typeof from !== 'number' ||\r\n                typeof to !== 'number' ||\r\n                typeof duration !== 'number' ||\r\n                typeof update !== 'function') {\r\n                return;\r\n            }\r\n\r\n            // Create mock done() function if necessary\r\n            if (typeof done !== 'function') {\r\n                done = function() {};\r\n            }\r\n\r\n            // Pick implementation (requestAnimationFrame | setTimeout)\r\n            var rAF = window.requestAnimationFrame || function(callback) {\r\n                window.setTimeout(callback, 1000 / 50);\r\n            };\r\n\r\n            // Animation loop\r\n            var canceled = false;\r\n            var change = to - from;\r\n\r\n            function loop(timestamp) {\r\n                var time = (timestamp || +new Date()) - start;\r\n\r\n                if (time >= 0) {\r\n                    update(easing(time, from, change, duration));\r\n                }\r\n                if (time >= 0 && time >= duration) {\r\n                    update(to);\r\n                    done();\r\n                } else {\r\n                    rAF(loop);\r\n                }\r\n            }\r\n\r\n            update(from);\r\n\r\n            // Start animation loop\r\n            var start = window.performance && window.performance.now ? window.performance.now() : +new Date();\r\n\r\n            rAF(loop);\r\n        },\r\n\r\n        actualCss: function(el, prop, cache) {\r\n            var css = '';\r\n\r\n            if (el instanceof HTMLElement === false) {\r\n                return;\r\n            }\r\n\r\n            if (!el.getAttribute('kt-hidden-' + prop) || cache === false) {\r\n                var value;\r\n\r\n                // the element is hidden so:\r\n                // making the el block so we can meassure its height but still be hidden\r\n                css = el.style.cssText;\r\n                el.style.cssText = 'position: absolute; visibility: hidden; display: block;';\r\n\r\n                if (prop == 'width') {\r\n                    value = el.offsetWidth;\r\n                } else if (prop == 'height') {\r\n                    value = el.offsetHeight;\r\n                }\r\n\r\n                el.style.cssText = css;\r\n\r\n                // store it in cache\r\n                el.setAttribute('kt-hidden-' + prop, value);\r\n\r\n                return parseFloat(value);\r\n            } else {\r\n                // store it in cache\r\n                return parseFloat(el.getAttribute('kt-hidden-' + prop));\r\n            }\r\n        },\r\n\r\n        actualHeight: function(el, cache) {\r\n            return KTUtil.actualCss(el, 'height', cache);\r\n        },\r\n\r\n        actualWidth: function(el, cache) {\r\n            return KTUtil.actualCss(el, 'width', cache);\r\n        },\r\n\r\n        getScroll: function(element, method) {\r\n            // The passed in `method` value should be 'Top' or 'Left'\r\n            method = 'scroll' + method;\r\n            return (element == window || element == document) ? (\r\n                self[(method == 'scrollTop') ? 'pageYOffset' : 'pageXOffset'] ||\r\n                (browserSupportsBoxModel && document.documentElement[method]) ||\r\n                document.body[method]\r\n            ) : element[method];\r\n        },\r\n\r\n        css: function(el, styleProp, value) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                el.style[styleProp] = value;\r\n            } else {\r\n                var defaultView = (el.ownerDocument || document).defaultView;\r\n                // W3C standard way:\r\n                if (defaultView && defaultView.getComputedStyle) {\r\n                    // sanitize property name to css notation\r\n                    // (hyphen separated words eg. font-Size)\r\n                    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n                    return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\r\n                } else if (el.currentStyle) { // IE\r\n                    // sanitize property name to camelCase\r\n                    styleProp = styleProp.replace(/\\-(\\w)/g, function(str, letter) {\r\n                        return letter.toUpperCase();\r\n                    });\r\n                    value = el.currentStyle[styleProp];\r\n                    // convert other units to pixels on IE\r\n                    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) {\r\n                        return (function(value) {\r\n                            var oldLeft = el.style.left,\r\n                                oldRsLeft = el.runtimeStyle.left;\r\n                            el.runtimeStyle.left = el.currentStyle.left;\r\n                            el.style.left = value || 0;\r\n                            value = el.style.pixelLeft + \"px\";\r\n                            el.style.left = oldLeft;\r\n                            el.runtimeStyle.left = oldRsLeft;\r\n                            return value;\r\n                        })(value);\r\n                    }\r\n                    return value;\r\n                }\r\n            }\r\n        },\r\n\r\n        slide: function(el, dir, speed, callback, recalcMaxHeight) {\r\n            if (!el || (dir == 'up' && KTUtil.visible(el) === false) || (dir == 'down' && KTUtil.visible(el) === true)) {\r\n                return;\r\n            }\r\n\r\n            speed = (speed ? speed : 600);\r\n            var calcHeight = KTUtil.actualHeight(el);\r\n            var calcPaddingTop = false;\r\n            var calcPaddingBottom = false;\r\n\r\n            if (KTUtil.css(el, 'padding-top') && KTUtil.data(el).has('slide-padding-top') !== true) {\r\n                KTUtil.data(el).set('slide-padding-top', KTUtil.css(el, 'padding-top'));\r\n            }\r\n\r\n            if (KTUtil.css(el, 'padding-bottom') && KTUtil.data(el).has('slide-padding-bottom') !== true) {\r\n                KTUtil.data(el).set('slide-padding-bottom', KTUtil.css(el, 'padding-bottom'));\r\n            }\r\n\r\n            if (KTUtil.data(el).has('slide-padding-top')) {\r\n                calcPaddingTop = parseInt(KTUtil.data(el).get('slide-padding-top'));\r\n            }\r\n\r\n            if (KTUtil.data(el).has('slide-padding-bottom')) {\r\n                calcPaddingBottom = parseInt(KTUtil.data(el).get('slide-padding-bottom'));\r\n            }\r\n\r\n            if (dir == 'up') { // up\r\n                el.style.cssText = 'display: block; overflow: hidden;';\r\n\r\n                if (calcPaddingTop) {\r\n                    KTUtil.animate(0, calcPaddingTop, speed, function(value) {\r\n                        el.style.paddingTop = (calcPaddingTop - value) + 'px';\r\n                    }, 'linear');\r\n                }\r\n\r\n                if (calcPaddingBottom) {\r\n                    KTUtil.animate(0, calcPaddingBottom, speed, function(value) {\r\n                        el.style.paddingBottom = (calcPaddingBottom - value) + 'px';\r\n                    }, 'linear');\r\n                }\r\n\r\n                KTUtil.animate(0, calcHeight, speed, function(value) {\r\n                    el.style.height = (calcHeight - value) + 'px';\r\n                }, 'linear', function() {\r\n                    el.style.height = '';\r\n                    el.style.display = 'none';\r\n\r\n                    if (typeof callback === 'function') {\r\n                        callback();\r\n                    }\r\n                });\r\n\r\n\r\n            } else if (dir == 'down') { // down\r\n                el.style.cssText = 'display: block; overflow: hidden;';\r\n\r\n                if (calcPaddingTop) {\r\n                    KTUtil.animate(0, calcPaddingTop, speed, function(value) {//\r\n                        el.style.paddingTop = value + 'px';\r\n                    }, 'linear', function() {\r\n                        el.style.paddingTop = '';\r\n                    });\r\n                }\r\n\r\n                if (calcPaddingBottom) {\r\n                    KTUtil.animate(0, calcPaddingBottom, speed, function(value) {\r\n                        el.style.paddingBottom = value + 'px';\r\n                    }, 'linear', function() {\r\n                        el.style.paddingBottom = '';\r\n                    });\r\n                }\r\n\r\n                KTUtil.animate(0, calcHeight, speed, function(value) {\r\n                    el.style.height = value + 'px';\r\n                }, 'linear', function() {\r\n                    el.style.height = '';\r\n                    el.style.display = '';\r\n                    el.style.overflow = '';\r\n\r\n                    if (typeof callback === 'function') {\r\n                        callback();\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        slideUp: function(el, speed, callback) {\r\n            KTUtil.slide(el, 'up', speed, callback);\r\n        },\r\n\r\n        slideDown: function(el, speed, callback) {\r\n            KTUtil.slide(el, 'down', speed, callback);\r\n        },\r\n\r\n        show: function(el, display) {\r\n            if (typeof el !== 'undefined') {\r\n                el.style.display = (display ? display : 'block');\r\n            }\r\n        },\r\n\r\n        hide: function(el) {\r\n            if (typeof el !== 'undefined') {\r\n                el.style.display = 'none';\r\n            }\r\n        },\r\n\r\n        addEvent: function(el, type, handler, one) {\r\n            if (typeof el !== 'undefined' && el !== null) {\r\n                el.addEventListener(type, handler);\r\n            }\r\n        },\r\n\r\n        removeEvent: function(el, type, handler) {\r\n            if (el !== null) {\r\n                el.removeEventListener(type, handler);\r\n            }\r\n        },\r\n\r\n        on: function(element, selector, event, handler) {\r\n            if (!selector) {\r\n                return;\r\n            }\r\n\r\n            var eventId = KTUtil.getUniqueID('event');\r\n\r\n            window.KTUtilDelegatedEventHandlers[eventId] = function(e) {\r\n                var targets = element.querySelectorAll(selector);\r\n                var target = e.target;\r\n\r\n                while (target && target !== element) {\r\n                    for (var i = 0, j = targets.length; i < j; i++) {\r\n                        if (target === targets[i]) {\r\n                            handler.call(target, e);\r\n                        }\r\n                    }\r\n\r\n                    target = target.parentNode;\r\n                }\r\n            }\r\n\r\n            KTUtil.addEvent(element, event, window.KTUtilDelegatedEventHandlers[eventId]);\r\n\r\n            return eventId;\r\n        },\r\n\r\n        off: function(element, event, eventId) {\r\n            if (!element || !window.KTUtilDelegatedEventHandlers[eventId]) {\r\n                return;\r\n            }\r\n\r\n            KTUtil.removeEvent(element, event, window.KTUtilDelegatedEventHandlers[eventId]);\r\n\r\n            delete window.KTUtilDelegatedEventHandlers[eventId];\r\n        },\r\n\r\n        one: function onetime(el, type, callback) {\r\n            el.addEventListener(type, function callee(e) {\r\n                // remove event\r\n                if (e.target && e.target.removeEventListener) {\r\n                    e.target.removeEventListener(e.type, callee);\r\n                }\r\n\r\n                // need to verify from https://themeforest.net/author_dashboard#comment_23615588\r\n                if (el && el.removeEventListener) {\r\n\t\t\t\t    e.currentTarget.removeEventListener(e.type, callee);\r\n\t\t\t    }\r\n\r\n                // call handler\r\n                return callback(e);\r\n            });\r\n        },\r\n\r\n        hash: function(str) {\r\n            var hash = 0,\r\n                i, chr;\r\n\r\n            if (str.length === 0) return hash;\r\n            for (i = 0; i < str.length; i++) {\r\n                chr = str.charCodeAt(i);\r\n                hash = ((hash << 5) - hash) + chr;\r\n                hash |= 0; // Convert to 32bit integer\r\n            }\r\n\r\n            return hash;\r\n        },\r\n\r\n        animateClass: function(el, animationName, callback) {\r\n            var animation;\r\n            var animations = {\r\n                animation: 'animationend',\r\n                OAnimation: 'oAnimationEnd',\r\n                MozAnimation: 'mozAnimationEnd',\r\n                WebkitAnimation: 'webkitAnimationEnd',\r\n                msAnimation: 'msAnimationEnd',\r\n            };\r\n\r\n            for (var t in animations) {\r\n                if (el.style[t] !== undefined) {\r\n                    animation = animations[t];\r\n                }\r\n            }\r\n\r\n            KTUtil.addClass(el, 'animated ' + animationName);\r\n\r\n            KTUtil.one(el, animation, function() {\r\n                KTUtil.removeClass(el, 'animated ' + animationName);\r\n            });\r\n\r\n            if (callback) {\r\n                KTUtil.one(el, animation, callback);\r\n            }\r\n        },\r\n\r\n        transitionEnd: function(el, callback) {\r\n            var transition;\r\n            var transitions = {\r\n                transition: 'transitionend',\r\n                OTransition: 'oTransitionEnd',\r\n                MozTransition: 'mozTransitionEnd',\r\n                WebkitTransition: 'webkitTransitionEnd',\r\n                msTransition: 'msTransitionEnd'\r\n            };\r\n\r\n            for (var t in transitions) {\r\n                if (el.style[t] !== undefined) {\r\n                    transition = transitions[t];\r\n                }\r\n            }\r\n\r\n            KTUtil.one(el, transition, callback);\r\n        },\r\n\r\n        animationEnd: function(el, callback) {\r\n            var animation;\r\n            var animations = {\r\n                animation: 'animationend',\r\n                OAnimation: 'oAnimationEnd',\r\n                MozAnimation: 'mozAnimationEnd',\r\n                WebkitAnimation: 'webkitAnimationEnd',\r\n                msAnimation: 'msAnimationEnd'\r\n            };\r\n\r\n            for (var t in animations) {\r\n                if (el.style[t] !== undefined) {\r\n                    animation = animations[t];\r\n                }\r\n            }\r\n\r\n            KTUtil.one(el, animation, callback);\r\n        },\r\n\r\n        animateDelay: function(el, value) {\r\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\r\n            for (var i = 0; i < vendors.length; i++) {\r\n                KTUtil.css(el, vendors[i] + 'animation-delay', value);\r\n            }\r\n        },\r\n\r\n        animateDuration: function(el, value) {\r\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\r\n            for (var i = 0; i < vendors.length; i++) {\r\n                KTUtil.css(el, vendors[i] + 'animation-duration', value);\r\n            }\r\n        },\r\n\r\n        scrollTo: function(target, offset, duration) {\r\n            var duration = duration ? duration : 500;\r\n            var targetPos = target ? KTUtil.offset(target).top : 0;\r\n            var scrollPos = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\r\n            var from, to;\r\n\r\n            if (offset) {\r\n                scrollPos += offset;\r\n            }\r\n\r\n            from = scrollPos;\r\n            to = targetPos;\r\n\r\n            KTUtil.animate(from, to, duration, function(value) {\r\n                document.documentElement.scrollTop = value;\r\n                document.body.parentNode.scrollTop = value;\r\n                document.body.scrollTop = value;\r\n            }); //, easing, done\r\n        },\r\n\r\n        scrollTop: function(offset, duration) {\r\n            KTUtil.scrollTo(null, offset, duration);\r\n        },\r\n\r\n        isArray: function(obj) {\r\n            return obj && Array.isArray(obj);\r\n        },\r\n\r\n        ready: function(callback) {\r\n            if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\") {\r\n                callback();\r\n            } else {\r\n                document.addEventListener('DOMContentLoaded', callback);\r\n            }\r\n        },\r\n\r\n        isEmpty: function(obj) {\r\n            for (var prop in obj) {\r\n                if (obj.hasOwnProperty(prop)) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        numberString: function(nStr) {\r\n            nStr += '';\r\n            var x = nStr.split('.');\r\n            var x1 = x[0];\r\n            var x2 = x.length > 1 ? '.' + x[1] : '';\r\n            var rgx = /(\\d+)(\\d{3})/;\r\n            while (rgx.test(x1)) {\r\n                x1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n            }\r\n            return x1 + x2;\r\n        },\r\n\r\n        detectIE: function() {\r\n            var ua = window.navigator.userAgent;\r\n\r\n            // Test values; Uncomment to check result …\r\n\r\n            // IE 10\r\n            // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\r\n\r\n            // IE 11\r\n            // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\r\n\r\n            // Edge 12 (Spartan)\r\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\r\n\r\n            // Edge 13\r\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\r\n\r\n            var msie = ua.indexOf('MSIE ');\r\n            if (msie > 0) {\r\n                // IE 10 or older => return version number\r\n                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n            }\r\n\r\n            var trident = ua.indexOf('Trident/');\r\n            if (trident > 0) {\r\n                // IE 11 => return version number\r\n                var rv = ua.indexOf('rv:');\r\n                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n            }\r\n\r\n            var edge = ua.indexOf('Edge/');\r\n            if (edge > 0) {\r\n                // Edge (IE 12+) => return version number\r\n                return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n            }\r\n\r\n            // other browser\r\n            return false;\r\n        },\r\n\r\n        isRTL: function() {\r\n            var html = KTUtil.getByTagName('html')[0];\r\n\r\n            if (html) {\r\n                return (KTUtil.attr(html, 'direction') == 'rtl');\r\n            }\r\n        },\r\n\r\n        // Scroller\r\n        scrollInit: function(element, options) {\r\n            if (!element) {\r\n                return;\r\n            }\r\n\r\n            // Learn more: https://github.com/mdbootstrap/perfect-scrollbar#options\r\n            var pluginDefOptions = {\r\n                wheelSpeed: 0.5,\r\n                swipeEasing: true,\r\n                wheelPropagation: false,\r\n                minScrollbarLength: 40,\r\n                maxScrollbarLength: 300,\r\n                suppressScrollX: true\r\n            };\r\n\r\n            options = KTUtil.deepExtend({}, pluginDefOptions, options);\r\n\r\n            // Define init function\r\n            function init() {\r\n                var ps;\r\n                var height;\r\n\r\n                // Get extra options via data attributes\r\n                var attrs = element.getAttributeNames();\r\n                if (attrs.length > 0) {\r\n                    attrs.forEach(function(attrName) {\r\n            \t\t\t// more options; https://github.com/ganlanyuan/tiny-slider#options\r\n            \t\t\tif ((/^data-.*/g).test(attrName)) {\r\n                            if (['scroll', 'height', 'mobile-height'].includes(optionName) == false) {\r\n                                var optionName = attrName.replace('data-', '').toLowerCase().replace(/(?:[\\s-])\\w/g, function(match) {\r\n                \t\t\t\t\treturn match.replace('-', '').toUpperCase();\r\n                \t\t\t\t});\r\n\r\n                                options[optionName] = KTUtil.filterBoolean(element.getAttribute(attrName));\r\n                            }\r\n            \t\t\t}\r\n            \t\t});\r\n                }\r\n\r\n                if (options.height instanceof Function) {\r\n                    height = options.height.call();\r\n                } else {\r\n                    if (KTUtil.isMobileDevice() === true && options.mobileHeight) {\r\n                        height = parseInt(options.mobileHeight);\r\n                    } else if (options.height) {\r\n                        height = parseInt(options.height);\r\n                    } else {\r\n                        height = parseInt(KTUtil.css(element, 'height'));\r\n                    }\r\n                }\r\n\r\n                if (height === false) {\r\n                    KTUtil.scrollDestroy(element, true);\r\n\r\n                    return;\r\n                }\r\n\r\n                height = parseInt(height);\r\n\r\n                // Destroy scroll on table and mobile modes\r\n                if ((options.mobileNativeScroll || options.disableForMobile) && KTUtil.isMobileDevice() === true) {\r\n                    ps = KTUtil.data(element).get('ps');\r\n                    if (ps) {\r\n                        if (options.resetHeightOnDestroy) {\r\n                            KTUtil.css(element, 'height', 'auto');\r\n                        } else {\r\n                            KTUtil.css(element, 'overflow', 'auto');\r\n                            if (height > 0) {\r\n                                KTUtil.css(element, 'height', height + 'px');\r\n                            }\r\n                        }\r\n\r\n                        ps.destroy();\r\n                        ps = KTUtil.data(element).remove('ps');\r\n                    } else if (height > 0){\r\n                        KTUtil.css(element, 'overflow', 'auto');\r\n                        KTUtil.css(element, 'height', height + 'px');\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                if (height > 0) {\r\n                    KTUtil.css(element, 'height', height + 'px');\r\n                }\r\n\r\n                if (options.desktopNativeScroll) {\r\n                    KTUtil.css(element, 'overflow', 'auto');\r\n                    return;\r\n                }\r\n\r\n                // Pass options via HTML Attributes\r\n                if (KTUtil.attr(element, 'data-window-scroll') == 'true') {\r\n                     options.windowScroll = true;\r\n                }\r\n\r\n                // Init scroll\r\n                ps = KTUtil.data(element).get('ps');\r\n\r\n                if (ps) {\r\n                    ps.update();\r\n                } else {\r\n                    KTUtil.css(element, 'overflow', 'hidden');\r\n                    KTUtil.addClass(element, 'scroll');\r\n\r\n                    ps = new PerfectScrollbar(element, options);\r\n\r\n                    KTUtil.data(element).set('ps', ps);\r\n                }\r\n\r\n                // Remember scroll position in cookie\r\n                var uid = KTUtil.attr(element, 'id');\r\n\r\n                // Todo:Consider using Localstorage\r\n                if (options.rememberPosition === true && KTCookie && uid) {\r\n                    if (KTCookie.getCookie(uid)) {\r\n                        var pos = parseInt(KTCookie.getCookie(uid));\r\n\r\n                        if (pos > 0) {\r\n                            element.scrollTop = pos;\r\n                        }\r\n                    }\r\n\r\n                    element.addEventListener('ps-scroll-y', function() {\r\n                        KTCookie.setCookie(uid, element.scrollTop);\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Init\r\n            init();\r\n\r\n            // Handle window resize\r\n            if (options.handleWindowResize) {\r\n                KTUtil.addResizeHandler(function() {\r\n                    init();\r\n                });\r\n            }\r\n        },\r\n\r\n        scrollUpdate: function(element) {\r\n            var ps = KTUtil.data(element).get('ps');\r\n            if (ps) {\r\n                ps.update();\r\n            }\r\n        },\r\n\r\n        scrollUpdateAll: function(parent) {\r\n            var scrollers = KTUtil.findAll(parent, '.ps');\r\n            for (var i = 0, len = scrollers.length; i < len; i++) {\r\n                KTUtil.scrollUpdate(scrollers[i]);\r\n            }\r\n        },\r\n\r\n        scrollDestroy: function(element, resetAll) {\r\n            var ps = KTUtil.data(element).get('ps');\r\n\r\n            if (ps) {\r\n                ps.destroy();\r\n                ps = KTUtil.data(element).remove('ps');\r\n            }\r\n\r\n            if (element && resetAll) {\r\n                element.style.setProperty('overflow', '');\r\n                element.style.setProperty('height', '');\r\n            }\r\n        },\r\n\r\n        filterBoolean: function(val) {\r\n            // Convert string boolean\r\n\t\t\tif (val === true || val === 'true') {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif (val === false || val === 'false') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n            return val;\r\n        },\r\n\r\n        setHTML: function(el, html) {\r\n            el.innerHTML = html;\r\n        },\r\n\r\n        getHTML: function(el) {\r\n            if (el) {\r\n                return el.innerHTML;\r\n            }\r\n        },\r\n\r\n        getDocumentHeight: function() {\r\n            var body = document.body;\r\n            var html = document.documentElement;\r\n\r\n            return Math.max( body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight );\r\n        },\r\n\r\n        getScrollTop: function() {\r\n            return  (document.scrollingElement || document.documentElement).scrollTop;\r\n        },\r\n\r\n        changeColor: function(col, amt) {\r\n\r\n            var usePound = false;\r\n\r\n            if (col[0] == \"#\") {\r\n                col = col.slice(1);\r\n                usePound = true;\r\n            }\r\n\r\n            var num = parseInt(col,16);\r\n\r\n            var r = (num >> 16) + amt;\r\n\r\n            if (r > 255) r = 255;\r\n            else if  (r < 0) r = 0;\r\n\r\n            var b = ((num >> 8) & 0x00FF) + amt;\r\n\r\n            if (b > 255) b = 255;\r\n            else if  (b < 0) b = 0;\r\n\r\n            var g = (num & 0x0000FF) + amt;\r\n\r\n            if (g > 255) g = 255;\r\n            else if (g < 0) g = 0;\r\n\r\n            return (usePound?\"#\":\"\") + (g | (b << 8) | (r << 16)).toString(16);\r\n\r\n        },\r\n\r\n        // Throttle function: Input as function which needs to be throttled and delay is the time interval in milliseconds\r\n        throttle:  function (timer, func, delay) {\r\n        \t// If setTimeout is already scheduled, no need to do anything\r\n        \tif (timer) {\r\n        \t\treturn;\r\n        \t}\r\n\r\n        \t// Schedule a setTimeout after delay seconds\r\n        \ttimer  =  setTimeout(function () {\r\n        \t\tfunc();\r\n\r\n        \t\t// Once setTimeout function execution is finished, timerId = undefined so that in <br>\r\n        \t\t// the next scroll event function execution can be scheduled by the setTimeout\r\n        \t\ttimer  =  undefined;\r\n        \t}, delay);\r\n        },\r\n\r\n        // Debounce function: Input as function which needs to be debounced and delay is the debounced time in milliseconds\r\n        debounce: function (timer, func, delay) {\r\n        \t// Cancels the setTimeout method execution\r\n        \tclearTimeout(timer)\r\n\r\n        \t// Executes the func after delay time.\r\n        \ttimer  =  setTimeout(func, delay);\r\n        },\r\n\r\n        btnWait: function(el, cls, message, disable) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            if (typeof disable !== 'undefined' && disable === true) {\r\n                KTUtil.attr(el, \"disabled\", true);\r\n            }\r\n\r\n            if (cls) {\r\n                KTUtil.addClass(el, cls);\r\n                KTUtil.attr(el, \"wait-class\", cls);\r\n            }\r\n\r\n            if (message) {\r\n                var caption = KTUtil.find(el, '.btn-caption');\r\n\r\n                if (caption) {\r\n                    KTUtil.data(caption).set('caption', KTUtil.getHTML(caption));\r\n                    KTUtil.setHTML(caption, message);\r\n                } else {\r\n                    KTUtil.data(el).set('caption', KTUtil.getHTML(el));\r\n                    KTUtil.setHTML(el, message);\r\n                }\r\n            }\r\n        },\r\n\r\n        btnRelease: function(el) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n\r\n            /// Show loading state on button\r\n            KTUtil.removeAttr(el, \"disabled\");\r\n\r\n            if (KTUtil.hasAttr(el, \"wait-class\")) {\r\n                KTUtil.removeClass(el, KTUtil.attr(el, \"wait-class\"));\r\n            }\r\n\r\n            var caption = KTUtil.find(el, '.btn-caption');\r\n\r\n            if (caption && KTUtil.data(caption).has('caption')) {\r\n                KTUtil.setHTML(caption, KTUtil.data(caption).get('caption'));\r\n            } else if (KTUtil.data(el).has('caption')) {\r\n                KTUtil.setHTML(el, KTUtil.data(el).get('caption'));\r\n            }\r\n        },\r\n\r\n        isOffscreen: function(el, direction, offset) {\r\n            offset = offset || 0;\r\n\r\n            var windowWidth = KTUtil.getViewPort().width;\r\n            var windowHeight = KTUtil.getViewPort().height;\r\n\r\n            var top = KTUtil.offset(el).top;\r\n            var height = KTUtil.outerHeight(el) + offset;\r\n            var left = KTUtil.offset(el).left;\r\n            var width = KTUtil.outerWidth(el) + offset;\r\n\r\n            if (direction == 'bottom') {\r\n                if (windowHeight < top + height) {\r\n                    return true;\r\n                } else if (windowHeight > top + height * 1.5) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            if (direction == 'top') {\r\n                if (top < 0) {\r\n                    return true;\r\n                } else if (top > height) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            if (direction == 'left') {\r\n                if (left < 0) {\r\n                    return true;\r\n                } else if (left * 2 > width) {\r\n                    //console.log('left 2');\r\n                    //return true;\r\n                }\r\n            }\r\n\r\n            if (direction == 'right') {\r\n                if (windowWidth < left + width) {\r\n                    return true;\r\n                } else {\r\n                    //console.log('right 2');\r\n                    //return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }\r\n}();\r\n\r\n// webpack support\r\nif (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\r\n    module.exports = KTUtil;\r\n}\r\n\r\n// Initialize KTUtil class on document ready\r\nKTUtil.ready(function() {\r\n\tif (typeof KTAppSettings !== 'undefined') {\r\n\t\tKTUtil.init(KTAppSettings);\r\n\t} else {\r\n\t\tKTUtil.init();\r\n\t}\r\n});\r\n\nexport default KTUtil;"]}]}